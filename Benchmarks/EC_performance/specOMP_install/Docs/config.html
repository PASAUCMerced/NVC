<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>SPEC Config files </title>
<!-- $Id: config.html 506 2012-10-10 23:57:10Z BrianWhitney $ -->
<!-- You'll want a nice wide screen (132 columns) when editing this ............................................................ -->

<link rel="STYLESHEET" href="css/omp2012docs.css" type="text/css" />
<style type="text/css">

a.switchstrike {white-space:nowrap; margin-left:1.3em; text-decoration:line-through;}
span.switchstrike {white-space:nowrap; text-decoration:line-through;}

.resultpage a:link, .resultpage a:visited {
  text-decoration: none;
  border-bottom: 1px dashed black;
  color: inherit;
}

div.notes h2 {
  text-align: center;
  margin: 0.1em;
}

</style>

</head>
<body>

<h1>SPEC OMP2012 Config Files</h1>
<p class="snug"><span style="font-size:80%;">
Last updated: $Date: 2012-10-10 19:57:10 -0400 (Wed, 10 Oct 2012) $ by $Author: BrianWhitney $</span> </p>
<p class="snugtop">(To check for possible updates to this document, please see <a class="external"
href="http://www.spec.org/omp2012/Docs/">http://www.spec.org/omp2012/Docs/</a>  ) </p> 
<p class="contents">Overview</p>
<p class="contentsl2">Click one of the following to go to the detailed contents about that item:</p>

<p class="contentsl3"> <a href="#Dtoc_I">I.</a> Introduction</p>
<p class="contentsl3"> <a href="#Dtoc_II">II.</a> Config file options for runspec</p>
<p class="contentsl3"> <a href="#Dtoc_III">III.</a> Config file options for specmake</p>
<p class="contentsl3"> <a href="#Dtoc_IV">IV.</a> Config file options for the shell</p>
<p class="contentsl3"> <a href="#Dtoc_V">V.</a> Config file options for readers</p>
<p class="contentsl3"> <a href="#Dtoc_VI">VI.</a> Using Feedback Directed Optimization (FDO)</p>
<p class="contentsl3"> <a href="#Dtoc_VII">VII.</a> The config file preprocessor</p>
<p class="contentsl3"> <a href="#Dtoc_VIII">VIII.</a> Output files - and how they relate to your config file</p>
<p class="contentsl3"> <a href="#Dtoc_IX">IX.</a> About Alternate Sources</p>
<p class="contentsl3last"> <a href="#Dtoc_X">X.</a> Troubleshooting</p>

<p class="contents">Contents</p>

<p class="contentsl1" id="Dtoc_I"> <a href="#sectionI">    I.</a> Introduction</p>
<p class="contentsl2"> <a href="#sectionI.A">     A.</a> What is a config file?  (Background: benchmark philosophy.)</p>
<p class="contentsl2"> <a href="#sectionI.B">     B.</a> What does a config file affect?</p>
<p class="contentsl3"> <a href="#sectionI.B.1">      1.</a> runspec</p>
<p class="contentsl3"> <a href="#sectionI.B.2">      2.</a> specmake</p>
<p class="contentsl3"> <a href="#sectionI.B.3">      3.</a> The shell</p>
<p class="contentsl3"> <a href="#sectionI.B.4">      4.</a> Readers of the results</p>
<p class="contentsl3"> <a href="#sectionI.B.5">      5.</a> The config file preprocessor</p>
<p class="contentsl2"> <a href="#sectionI.C">     C.</a> Config file structure</p>
<p class="contentsl3"> <a href="#sectionI.C.1">      1.</a> Comments and whitespace</p>
<p class="contentsl3"> <a href="#sectionI.C.2">      2.</a> Header section</p>
<p class="contentsl3"> <a href="#sectionI.C.3">      3.</a> Named sections, section markers, section specifiers</p>
<p class="contentsl4"> <a href="#sectionI.C.3.a">       a.</a> Precedence for the benchmark specifier</p>
<p class="contentsl5"> <a href="#defaultbenchmark">Default benchmark</a></p>
<p class="contentsl5"> <a href="#namedsuite">Named suite</a></p>
<p class="contentsl5"> <a href="#namedbenchmark">Named benchmark</a></p>
<p class="contentsl5"> <a href="#orderdifferentsections">Order of differing sections does not matter</a></p>
<p class="contentsl5"> <a href="#ordersamesection">Order of the same section does matter</a></p>
<p class="contentsl4"> <a href="#sectionI.C.3.b">       b.</a> Precedence for the tuning specifier</p>
<p class="contentsl4"> <a href="#sectionI.C.3.c">       c.</a> Precedence for the extension specifier</p>
<p class="contentsl5"> <a href="#extfound">Extension found in config file</a></p>
<p class="contentsl5"> <a href="#extnotfound">Extension not found in config file</a></p>
<p class="contentsl5"> <a href="#extoverride">Extension override</a></p>
<p class="contentsl4"> <a href="#sectionI.C.3.d">       d.</a> Combining specifier types</p>
<p class="contentsl4"> <a href="#sectionI.C.3.e">       e.</a> Precedence among section types</p>
<p class="contentsl3"> <a href="#sectionI.C.4">      4.</a> MD5 section</p>
<p class="contentsl3"> <a href="#sectionI.C.5">      5.</a> Shell-like "here documents" and backslash continued lines</p>
<p class="contentsl3"> <a href="#sectionI.C.6">      6.</a> Included files</p>

<p class="contentsl2"> <a href="#sectionI.D">     D.</a> Variable substitution</p>
<p class="contentsl3"> <a href="#sectionI.D.1">      1.</a> By runspec</p>
<p class="contentsl4"> <a href="#sectionI.D.1.a">       a.</a> At startup: $[variable] </p>
<p class="contentsl4"> <a href="#sectionI.D.1.b">       b.</a> During a run: $variable and ${variable}</p>
<p class="contentsl4"> <a href="#sectionI.D.1.c">       c.</a> Example: cleaning files before a training run</p>
<p class="contentsl4"> <a href="#sectionI.D.1.d">       d.</a> Example: submit to multiple nodes, Tru64 Unix</p>
<!--
<p class="contentsl4"> <a href="#sectionI.D.1.e">       e.</a> Example: bind to processors, SPEC TurboBlaster9000</p>
-->
<p class="contentsl3"> <a href="#sectionI.D.2">      2.</a> By the shell \$VARIABLE</p>
<p class="contentsl4"> <a href="#sectionI.D.2.a">       a.</a> Protecting shell variables</p>
<!--
<p class="contentsl4"> <a href="#sectionI.D.2.b">       b.</a> Example: submitting to multiple nodes, SGI Origin 2000</p>
-->
<p class="contentsl3"> <a href="#sectionI.D.3">      3.</a> By specmake $(VARIABLE)</p>
<p class="contentsl3"> <a href="#sectionI.D.4">      4.</a> Limitations on variable substitution</p>
<p class="contentsl3"> <a href="#sectionI.D.5">      5.</a> Unsetting a variable with "%undef%"</p>

<p class="contentsl1" id="Dtoc_II"> <a href="#sectionII"     >   II.</a> Config file options for runspec</p>
<p class="contentsl2"> <a href="#sectionII.A">        A.</a> Precedence: config file vs. runspec command line</p>
<p class="contentsl2"> <a href="#sectionII.B">B.</a> Options </p>

<!-- OK, here's an oddity.  With the web browser Safari 1.3.2 (v312.6) it has sometimes appeared that if there is a space
(and then a newline) after each of the items in the list below, they wrap as expected.  But if they only have newline
characters, the display sometimes has wraps that appear odd to the eye.  So, we add a space. -->

<p class="contentsl3">
<!--
<a class="switch" href="#absolutely_no_locking"> absolutely_no_locking</a> 
-->
<a class="switch" href="#action">            action</a> 
<a class="switch" href="#allow_extension_override">         allow_extension_override</a> 
<a class="switch" href="#backup_config">         backup_config</a> 
<a class="switch" href="#basepeak">              basepeak</a> 
<!-- <a class="switch" href="#bind">                  bind</a> -->
<a class="switch" href="#build_in_build_dir">     build_in_build_dir</a>
<a class="switch" href="#check_md5">             check_md5</a> 
<a class="switch" href="#check_version">     check_version</a> 
<a class="switch" href="#command_add_redirect">  command_add_redirect</a> 
<!-- <a class="switch" href="#copies">            copies</a> -->
<a class="switch" href="#current_range">     current_range</a> 
<a class="switch" href="#delay"     >        delay</a> 
<a class="switch" href="#deletework">        deletework</a> 
<a class="switch" href="#difflines">             difflines</a> 
<a class="switch" href="#env_vars">              env_vars</a> 
<a class="switch" href="#expand_notes">          expand_notes</a> 
<a class="switch" href="#expid">                 expid</a> 
<a class="switch" href="#ext">               ext</a> 
<a class="switch" href="#fail">                  fail</a> 
<a class="switch" href="#fail_build">            fail_build</a> 
<a class="switch" href="#fail_run">              fail_run</a> 
<a class="switch" href="#feedback">          feedback</a> 
<a class="switch" href="#flagsurl">          flagsurl</a> 
<a class="switch" href="#http_proxy">        http_proxy</a> 
<a class="switch" href="#http_timeout">      http_timeout</a> 
<a class="switch" href="#idle_current_range">     idle_current_range</a> 
<a class="switch" href="#ignore_errors">     ignore_errors</a> 
<a class="switch" href="#ignore_sigint">         ignore_sigint</a> 
<a class="switch" href="#info_wrap_columns"> info_wrap_columns</a> 
<a class="switch" href="#inherit_from">          inherit_from</a> 
<a class="switch" href="#iterations">        iterations</a> 
<a class="switch" href="#keeptmp">           keeptmp</a> 
<a class="switch" href="#line_width">            line_width</a> 
<a class="switch" href="#locking">               locking</a> 
<a class="switch" href="#log_line_width">        log_line_width</a> 
<a class="switch" href="#log_timestamp">     log_timestamp</a> 
<a class="switch" href="#mach">              mach</a> 
<a class="switch" href="#mail_reports">          mail_reports</a> 
<a class="switch" href="#mailcompress">          mailcompress</a> 
<a class="switch" href="#mailmethod">            mailmethod</a> 
<a class="switch" href="#mailport">              mailport</a> 
<a class="switch" href="#mailserver">            mailserver</a> 
<a class="switch" href="#mailto">                mailto</a> 
<a class="switch" href="#make">                  make</a> 
<a class="switch" href="#make_no_clobber">   make_no_clobber</a> 
<a class="switch" href="#makeflags">             makeflags</a> 
<!--
<a class="switch" href="#max_active_compares">max_active_compares</a> 
-->
<a class="switch" href="#mean_anyway">           mean_anyway</a> 
<a class="switch" href="#minimize_builddirs">    minimize_builddirs</a> 
<a class="switch" href="#minimize_rundirs">      minimize_rundirs</a> 
<a class="switch" href="#no_input_handler">      no_input_handler</a> 
<a class="switch" href="#no_monitor">            no_monitor</a> 
<a class="switch" href="#nobuild">           nobuild</a> 
<a class="switch" href="#notes_wrap_columns">notes_wrap_columns</a> 
<a class="switch" href="#notes_wrap_indent">     notes_wrap_indent</a> 
<a class="switch" href="#output_format">     output_format</a> 
<a class="switch" href="#output_root">           output_root</a> 
<!--
<a class="switch" href="#parallel_setup">    parallel_setup</a> 
<a class="switch" href="#parallel_setup_prefork">parallel_setup_prefork</a> 
<a class="switch" href="#parallel_setup_type">parallel_setup_type</a> 
<a class="switch" href="#parallel_test">     parallel_test</a> 
<a class="switch" href="#parallel_test_submit">parallel_test_submit</a> 
-->
<a class="switch" href="#plain_train">           plain_train</a> 
<a class="switch" href="#power">        power</a> 
<a class="switch" href="#power_analyzer">        power_analyzer</a> 
<a class="switch" href="#preenv">            preenv</a> 
<!--
<a class="switch" href="#rate">              rate</a> 
-->
<a class="switch" href="#rebuild">           rebuild</a> 
<a class="switch" href="#reportable">        reportable</a> 
<a class="switch" href="#runlist">           runlist</a> 
<a class="switch" href="#section_specifier_fatal">section_specifier_fatal</a> 
<a class="switch" href="#sendmail">              sendmail</a> 
<a class="switch" href="#setprocgroup">      setprocgroup</a> 
<a class="switch" href="#size">              size</a> 
<a class="switch" href="#srcalt">                src.alt</a> 
<a class="switch" href="#strict_rundir_verify">  strict_rundir_verify</a> 
<a class="switch" href="#sysinfo-program">       sysinfo_program</a> 
<a class="switch" href="#table">             table</a> 
<a class="switch" href="#teeout"     >           teeout</a> 
<a class="switch" href="#temp_meter">        temp_meter</a> 
<a class="switch" href="#threads">           threads</a> 
<a class="switch" href="#train_with" >       train_with</a> 
<a class="switch" href="#tune">              tune</a> 
<a class="switch" href="#use_submit_for_speed">  use_submit_for_speed</a> 
<a class="switch" href="#verbose">           verbose</a> 
<a class="switch" href="#version_url">           version_url</a> 
<a class="switch" href="#voltage_range">         voltage_range</a> 
</p>

<p class="contentsl2"> <a href="#sectionII.C">C.</a> About sysinfo</p>
<p class="contentsl3"> <a href="#sectionII.C.1">      1.</a> The example sysinfo program</p>
<p class="contentsl4"> <a href="#sectionII.C.1.a">       a.</a> Location and updates</p>
<p class="contentsl4"> <a href="#sectionII.C.1.b">       b.</a> Turning the feature on or off </p>
<p class="contentsl4"> <a href="#sectionII.C.1.c">       c.</a> Output</p>
<p class="contentsl4"> <a href="#sectionII.C.1.d">       d.</a> Avoiding warnings about conflicting fields</p>
<p class="contentsl4"> <a href="#sectionII.C.1.e">       e.</a> Example: where does the example sysinfo program send its output?</p>

<p class="contentsl3"> <a href="#sectionII.C.2">      2.</a> Writing your own sysinfo program</p>

<p class="contentsl1" id="Dtoc_III"> <a href="#sectionIII">  III.</a> Config file options for specmake    </p>

<p class="contentsl3"><a class="switch" href="#compiler">    CC, CXX, FC</a> 
<br /><a class="switch" href="#ld">          CLD, CXXLD, FLD</a> 
<br /><a class="switch" href="#onestep">     ONESTEP</a> 
<br /><a class="switch" href="#optimize">    OPTIMIZE, COPTIMIZE, CXXOPTIMIZE, FOPTIMIZE</a> 
<br /><a class="switch" href="#portability"> PORTABILITY, CPORTABILITY, CXXPORTABILITY, FPORTABILITY...</a> 
<br /><a class="switch" href="#rm_sources">  RM_SOURCES</a> 
<br /><a class="switch" href="#pass">        PASSn_CFLAGS, PASSn_CXXFLAGS, PASSn_FFLAGS</a></p>
<p class="contentsl2"> <a href="#plusequals">The syntax "+=" is available (but should be used with caution)</a></p>
<p class="contentsl2"> <a href="#about.auto.rebuilds">About Automatic Rebuilds</a></p>


<p class="contentsl1" id="Dtoc_IV"> <a href="#sectionIV"     >   IV.</a> Config file options for the shell </p> 

<p class="contentsl2"> <a href="#sectionIV.A">       A.</a> Options</p>

<p class="contentsl3">
<a class="switch" href="#bench_post_setup"> bench_post_setup</a> 
<a class="switch" href="#fdo_pre0">         fdo_pre0</a> 
<a class="switch" href="#fdo_preN">         fdo_preN</a> 
<a class="switch" href="#fdo_make_cleanN">  fdo_make_cleanN</a> 
<a class="switch" href="#fdo_pre_makeN">    fdo_pre_makeN</a> 
<a class="switch" href="#fdo_make_passN">   fdo_make_passN</a> 
<a class="switch" href="#fdo_post_makeN">   fdo_post_makeN</a> 
<a class="switch" href="#fdo_runN">         fdo_runN</a> 
<a class="switch" href="#fdo_postN">        fdo_postN</a> 
<a class="switch" href="#post_setup">       post_setup</a> 
<a class="switch" href="#submit">           submit</a></p>

<p class="contentsl2"> <a href="#sectionIV.B">       B.</a> Using and Changing fdo Options</p>
<p class="contentsl2"> <a href="#sectionIV.C">       C.</a> Using submit</p>
<p class="contentsl3"> <a href="#sectionIV.C.1">1. </a>Basic Usage</p>
<p class="contentsl3"> <a href="#sectionIV.C.2">2. </a>Useful features related to submit </p>
<p class="contentsl3"> <a href="#sectionIV.C.3">3. </a>Continuation of Submit Lines</p>
<p class="contentsl4"> <a href="#sidebar.quoting">Sidebar: About Quoting and Submit</a></p>
<p class="contentsl3"> <a href="#sectionIV.C.4">4. </a>Reporting of submit usage</p>

<p class="contentsl1" id="Dtoc_V"> <a href="#sectionV">  V.</a> Config file options for readers</p>
<p class="contentsl2"> <a href="#sectionV.A">       A.</a> Descriptive fields</p>

<p class="contentsl3">
<!--<a class="switchstrike" href="#company_name">company_name</a>-->
<a class="switch" href="#hw_avail">         hw_avail</a> 
<a class="switch" href="#hw_cpu_name">      hw_cpu_name</a> 
<a class="switch" href="#hw_cpu_char">      hw_cpu_char</a> 
<a class="switch" href="#hw_cpu_mhz">       hw_cpu_mhz</a> 
<a class="switch" href="#hw_cpu_max_mhz">   hw_cpu_max_mhz</a> 
<a class="switch" href="#hw_disk">          hw_disk</a> 
<a class="switch" href="#hw_fpu">           hw_fpu</a> 
<a class="switch" href="#hw_memory">        hw_memory</a> 
<a class="switch" href="#hw_model">         hw_model</a> 
<a class="switch" href="#hw_nchips">        hw_nchips</a> 
<a class="switch" href="#hw_ncores">        hw_ncores</a> 
<a class="switch" href="#hw_ncoresperchip"> hw_ncoresperchip</a> 
<a class="switch" href="#hw_ncpuorder">     hw_ncpuorder</a> 
<a class="switch" href="#hw_nthreadspercore">hw_nthreadspercore</a> 
<a class="switch" href="#hw_ocache">        hw_ocache</a> 
<a class="switch" href="#hw_other">         hw_other</a> 
<a class="switch" href="#hw_pcache">        hw_pcache</a> 
<a class="switch" href="#hw_power_cal_date">     hw_power_{id}_cal_date</a> 
<a class="switch" href="#hw_power_cal_label">    hw_power_{id}_cal_label</a> 
<a class="switch" href="#hw_power_cal_org">      hw_power_{id}_cal_org</a> 
<a class="switch" href="#hw_power_met_inst">     hw_power_{id}_met_inst</a> 
<a class="switch" href="#hw_power_connection">   hw_power_{id}_connection</a> 
<a class="switch" href="#hw_power_label">        hw_power_{id}_label</a> 
<a class="switch" href="#hw_power_model">        hw_power_{id}_model</a> 
<a class="switch" href="#hw_power_serial">       hw_power_{id}_serial</a> 
<a class="switch" href="#hw_power_setup">        hw_power_{id}_setup</a> 
<a class="switch" href="#hw_power_vendor">       hw_power_{id}_vendor</a> 
<a class="switch" href="#hw_psu">           hw_psu</a> 
<a class="switch" href="#hw_psu_info">      hw_psu_info</a> 
<a class="switch" href="#hw_scache">        hw_scache</a> 
<a class="switch" href="#hw_tcache">        hw_tcache</a> 
<a class="switch" href="#hw_temperature_connection">        hw_temperature_{id}_connection</a> 
<a class="switch" href="#hw_temperature_label">        hw_temperature_{id}_label</a> 
<a class="switch" href="#hw_temperature_model">        hw_temperature_{id}_model</a> 
<a class="switch" href="#hw_temperature_serial">        hw_temperature_{id}_serial</a> 
<a class="switch" href="#hw_temperature_setup">        hw_temperature_{id}_setup</a> 
<a class="switch" href="#hw_temperature_vendor">        hw_temperature_{id}_vendor</a> 
<a class="switch" href="#hw_vendor">        hw_vendor</a> 
<a class="switch" href="#license_num">      license_num</a> 
<!--<a class="switchstrike" href="#machine_name">machine_name</a>-->
<a class="switch" href="#prepared_by">      prepared_by</a> 
<!--<a class="switchstrike" href="#sw_auto_parallel"> sw_auto_parallel</a> -->
<a class="switch" href="#sw_avail">         sw_avail</a> 
<a class="switch" href="#sw_base_ptrsize" > sw_base_ptrsize</a>
<a class="switch" href="#sw_compiler">      sw_compiler</a> 
<a class="switch" href="#sw_file">          sw_file</a> 
<a class="switch" href="#sw_os">            sw_os</a> 
<!--<a class="switch" href="#sw_parallel_defeat">sw_parallel_defeat</a> -->
<!--<a class="switch" href="#sw_parallel_other">sw_parallel_other</a> -->
<a class="switch" href="#sw_state">         sw_state</a> 
<a class="switch" href="#sw_other">         sw_other</a> 
<a class="switch" href="#sw_peak_ptrsize" > sw_peak_ptrsize</a>
<a class="switch" href="#tester">           tester</a>
<!--<a class="switchstrike" href="#tester_name">tester_name</a>-->
<!--<a class="switchstrike" href="#test_date">        test_date</a> -->
<a class="switch" href="#test_sponsor">     test_sponsor</a>
<!--<a class="switchstrike" href="#VENDOR">  VENDOR</a>-->
</p>

<p class="contentsl2"> <a href="#sectionV.B"     >       B.</a> Field scoping and numbered continuation lines </p>
<p class="contentsl2"> <a href="#sectionV.C"     >       C.</a> Additional notes for the reader</p>

<p class="contentsl3"><a href="#sectionV.C.1">1 </a>Notes sections</p>

<p class="contentsl3"> 
<a class="switch" href="#notes_comp">       notes_comp_NNN</a> 
<a class="switch" href="#notes_port">       notes_port_NNN</a> 
<a class="switch" href="#notes_base">       notes_base_NNN</a> 
<a class="switch" href="#notes_peak">       notes_peak_NNN</a> 
<a class="switch" href="#notes_submit">     notes_submit_NNN</a> 
<a class="switch" href="#notes_os">         notes_os_NNN</a> 
<a class="switch" href="#notes_plat">       notes_plat_NNN</a> 
<a class="switch" href="#notes_part">       notes_part_NNN</a> 
<a class="switch" href="#notes">            notes_NNN</a></p>

<p class="contentsl3"><a href="#sectionV.C.2">2 </a>Note numbering</p>
<p class="contentsl3"><a href="#sectionV.C.3">3 </a>Additional tags</p>
<p class="contentsl3"><a href="#sectionV.C.4">4 </a>Links in notes sections</p>
<p class="contentsl3"><a href="#sectionV.C.5">5 </a>Attachments</p>

<!--
<p class="contentsl2"> <a href="#sectionV.D"     >       D.</a> About Auto Parallel Reporting</p>
-->
<p class="contentsl1" id="Dtoc_VI"><a href="#sectionVI" >VI. </a> Using Feedback Directed Optimization (FDO)</p>
<p class="contentsl2"><a href="#sectionVI.A">       A. </a>The minimum requirement: <tt>PASSn_&lt;language&gt;FLAGS</tt>, <tt>PASSn_&lt;language&gt;OPTIMIZE</tt>, or <tt>fdo*n</tt></p>
<p class="contentsl2"><a href="#sectionVI.B">       B. </a>Combining <tt>PASS*n</tt> and <tt>fdo*n</tt>; fake is your
friend</p>
<p class="contentsl2"><a href="#sectionVI.C">       C. </a>Interaction with the config file <tt>feedback</tt> option</p>
<p class="contentsl2"><a href="#sectionVI.D">       D. </a>If the config file <tt>feedback</tt> option is used at multiple
levels</p>
<p class="contentsl2"><a href="#sectionVI.E">       E. </a>Interaction with <tt>runspec --feedback</tt></p>
<p class="contentsl2"><a href="#sectionVI.F">       F. </a>More examples</p>

<p class="contentsl1" id="Dtoc_VII"> <a href="#sectionVII" >VII.</a> The config file preprocessor</p>
<p class="contentsl2">  <a href="#sectionVII.A">     A.</a> Defining macros</p>
<p class="contentsl2">  <a href="#sectionVII.B">     B.</a> Un-doing macro definition</p>
<p class="contentsl2">  <a href="#sectionVII.C">     C.</a> Using macros</p>
<p class="contentsl2">  <a href="#sectionVII.D">     D.</a> Conditionals</p>
<p class="contentsl3">  <a href="#sectionVII.D.1">      1.</a> %ifdef .. %endif</p>
<p class="contentsl3">  <a href="#sectionVII.D.2">      2.</a> %ifndef .. %endif</p>
<p class="contentsl3">  <a href="#sectionVII.D.3">      3.</a> %if .. %endif</p>
<p class="contentsl3">  <a href="#sectionVII.D.4">      4.</a> %else</p>
<p class="contentsl3">  <a href="#sectionVII.D.5">      5.</a> %elif</p>
<p class="contentsl2">  <a href="#sectionVII.E">     E.</a> Informational directives</p>
<p class="contentsl3">  <a href="#sectionVII.E.1">      1.</a> %warning</p>
<p class="contentsl3">  <a href="#sectionVII.E.2">      2.</a> %error</p>

<p class="contentsl1" id="Dtoc_VIII"> <a href="#sectionVIII" >   VIII.</a> Output files - and how they relate to your config file</p>
<p class="contentsl2"> <a href="#sectionVIII.A"     >       A.</a> Automatic backup of config files </p>
<p class="contentsl2"> <a href="#sectionVIII.B"     >       B.</a> The log file and verbosity levels</p>
<p class="contentsl3"> <a href="#sectionVIII.B.1"   >          1.</a> Useful Search Strings</p>
<p class="contentsl3"> <a href="#sectionVIII.B.2"   >          2.</a> About Temporary Debug Logs</p>
<p class="contentsl3"> <a href="#sectionVIII.B.3"   >          3.</a> Definitions of verbosity levels</p>
<p class="contentsl2"> <a href="#sectionVIII.C"     >       C.</a> Log file example: Feedback-directed optimization.</p>
<p class="contentsl2"> <a href="#sectionVIII.D"     >       D.</a> Help, I've got too many logs</p>
<p class="contentsl2"> <a href="#sectionVIII.E"     >       E.</a> Finding the build directory</p>
<p class="contentsl2"> <a href="#sectionVIII.F"     >       F.</a> Files in the build directory</p>
<p class="contentsl2"> <a href="#sectionVIII.G"     >       G.</a> For more information</p>

<p class="contentsl1" id="Dtoc_IX"> <a href="#sectionIX" >  IX.</a> About Alternate Sources</p>     
<p class="contentsl2">              <a href="#sectionIX.A">   A.</a> Example: Applying a src.alt</p>
<p class="contentsl2">              <a href="#sectionIX.B">   B.</a> Developing a src.alt (brief introduction)</p>

<p class="contentsl1last" id="Dtoc_X"> <a href="#sectionX" >  X.</a> Troubleshooting</p>     

<p>&nbsp;<br /></p>
      <p class="commentarystart" style="margin-top:.5em"> <i>Note:</i> links to SPEC documents on this web page
      assume that you are reading the page from a directory that also contains the other SPEC documents.  If by
      some chance you are reading this web page from a location where the links do not work, try accessing the referenced
      documents at one of the following locations:</p>
      <ul class="commentaryul">
      <li class="commentaryli"><a class="external" href="http://www.spec.org/omp2012/Docs/">www.spec.org/omp2012/Docs/</a></li> 
      <li class="commentaryli">The <span class="ttnobr">$SPEC/Docs/</span> (Unix) or <span class="ttnobr">%SPEC%\Docs\</span>
      (Windows) directory on a system where SPEC OMP2012 has been installed.</li>
      <li class="commentaryli">The <span class="tt">Docs/</span> directory on your SPEC OMP2012 distribution.</li>
      </ul>
      <p class="commentaryend"></p>



<h2 id="sectionI">I. Introduction</h2>

<table style="border:none;">
<tr style="border:none;">
<td style="border:none; padding-right:1em;">

<p>SPEC config files provide very detailed control of testing.  Before learning about these details, most users will
find it helpful to begin with: </p>
<ul>
<li><a class="external" href="readme1st.html">readme1st.html</a> and</li> 
<li><a class="external" href="runspec.html">runspec.html</a>, such as the section <a class="external"
href="runspec.html#section1.2">About config files</a>.</li> 
</ul>


<p>The <tt>runspec</tt> document discusses the primary user interface for running SPEC OMP2012; with this document, attention
turns more toward how things work inside.</p>
</td>

<td style="background:#fff28a; width: 33%; padding:.5em; border:thin solid gray;">
<p style="font-family:cursive;" id="nodummy"> 
q. This document looks big and intimidating.  Where do I start?</p>

<p>a. Don't start here.  Start with runspec.html.  But, once you do read this document, please be sure to notice:</p>
<ul style="margin-left:0em; padding-left:1em;">
<li style="margin-bottom:.5em;"><a href="#sectionI.B">Section I.B</a>, which explains that a config file contains options that are 
used by five (5) different consumers.</li>
<li>The table of contents, which lists the options accepted by each of those consumers.  For example, the shell options
are listed <a href="#Dtoc_IV">here.</a></li>
</ul>
<p>If you keep track of which options are addressed to which consumer, you will considerably ease your
learning curve.</p>
</td>
</tr>
</table>


<h3 id="sectionI.A">I.A. What is a config file?  (Background:    benchmark philosophy.)   </h3>

<p>A config file contains:</p>
<ul>
      <li>The instructions for building the benchmarks.</li>
      <li>The instructions for running the benchmarks.</li>
      <li>The description of the system under test.</li>
      <li>The key to result reproducibility.</li>
      <li>The guts, the real controls, the Good Stuff.</li>
      <li>The place where the benchmark philosophy hits the road.</li>
</ul>

<p>A key decision that must be made by designers of a benchmark suite is whether to allow the benchmark source code to be
changed when the suite is used.  </p>
   
<p class="snugbot">If source code changes are allowed:</p>
<table style="margin-left:5%; margin-right:15%" >
<tr><td><b>&nbsp;+&nbsp;</b> </td>
    <td>The benchmark can be adapted to the system under test.</td>
</tr>
<tr><td><b>&nbsp;+&nbsp;</b> </td>
    <td>Portability may be easier.</td>
</tr>
<tr><td><b>&nbsp;&#8211;&nbsp;</b> </td>
    <td>But it may be hard to compare results between systems, unless some formal audit is done to ensure that comparable
    work is done. </td>
</tr>
</table>

<p class="snugbot">If source code changes are not allowed:</p>
<table style="margin-left:5%; margin-right:15%" >
<tr><td><b>&nbsp;+&nbsp;</b> </td>
    <td>Results may be easier to compare.</td>
</tr>
<tr><td><b>&nbsp;&#8211;&nbsp;</b> </td>
    <td>It may take more time and effort to develop the benchmark, because portability will have to be built in ahead of
    time. </td>
</tr>
<tr><td><b>&nbsp;&#8211;&nbsp;</b> </td>
    <td>Portability may be hard to achieve, at least for real applications.  Simple loops of 15 lines can port with little
    effort, and such benchmarks have their uses.  But real applications are more complex.</td>
</tr>
</table>

<p>SPEC has chosen not to allow source code changes for the OMP2012 suite, except under very limited circumstances.  </p>

<p>By restricting source code changes, SPEC separates the activity of porting benchmarks, which has a goal of being
performance neutral, from the activity of using the benchmarks, where the goal is getting the best score possible.  
</p>

<p>Are source code changes ever allowed?  Normally, no.  But if you discover a reason why you believe such a change is essential,
<a class="external" href="techsupport.html#source">SPEC wants to hear about it</a>, and will consider such requests for a future
revision of the suite.  SPEC will normally not publish OMP2012 results using modified source code, unless such modifications are
unavoidable for the target environment, are reviewed by SPEC, are made available to all users of the suite, and are formally
approved by a vote.</p> 

<p>So, if source code changes are not allowed, but the benchmarks must be compiled in a wide variety of environments, can the
users at least write their own makefiles, and select <span class="ttnobr">-D</span> options to select different environments?
The answer to these two questions are "no", and "yes", respectively:</p>

<ul><li>No, you can't write your own makefiles.</li>
<li>Yes, you can select portability options (such as <span class="ttnobr">-D</span>). Note that portability flags must be
<a href="runrules.html#section2.2.4" class="external">approved by SPEC</a> if you wish to use your results in public.</li>
</ul>

<p>You do this in the config file, which contains a centralized collection of all the portability options and optimization
options for all the benchmarks in the suite.  The SPEC tools then automatically generate the makefiles for you.</p>

<p>The config file contains places where you can specify the characteristics of both your compile time and run time
environments.  It allows the advanced user to perform detailed manipulation of makefile options, but retains all the changes
in one place so that they can be examined and reproduced.</p>

<p>The config file is one of the key ingredients in making results reproducible.  For example, if a customer would like to
run the OMP2012 suite on her own SuperHero Model 4 and discover how close results are in her environment to the environment
used when the vendor published a OMP2012 result, she should be able to do that using only 3 ingredients:</p>

<ol>
   <li>The SPEC OMP2012 media, ordered from SPEC.</li>

   <li>The software and hardware as specified in the full disclosure when the vendor published the original results.</li>

   <li>The config file from the vendor's submission.</li>
</ol>


<h3 id="sectionI.B">I.B. What does a config file affect?</h3>

<p>A config file contains options targetting five distinct consumers: </p>
<ol>
<li>The <tt>runspec</tt> tool, which provides overall control of the test,</li> 
<li>The tool that compiles benchmarks: <tt>specmake</tt>,</li> 
<li>Your shell, which is used for certain operations such as <a href="#submit">submit</a>ing to specific processors,</li> 
<li>Readers of the results, and</li> 
<li>The config file preprocessor. </li> 
</ol>
<p>To understand how to write a config file effectively, you need to understand which consumer you are addressing at any
given point.  </p>

<p class="snugbot">The above point seems worth emphasizing: </p>
<p style="background:#fff28a; margin: .4em 2em; font-size:110%; font-family:sans; width: 33%; text-align:center;">To
understand how to write a config file effectively, you need to understand which consumer you are addressing at any given
point.  </p> 

<p>This section gives you an overview of the consumers; more detail
is included in later sections.</p>
   
<h4 id="sectionI.B.1">I.B.1. runspec </h4>

<p>Various aspects of the operation of <tt>runspec</tt> can be affected by setting options within a config file.  You'll find
a list of these options in the <a href="#Dtoc_II">table of contents for section II</a> - including some that are available
both on the runspec command line and some that can only be set within a config file.</p>

<p>For example, if <tt>michael.cfg</tt> includes
the lines:</p>

<pre>   output_format = text,ps
   tune          = base
   reportable    = 1
   runlist       = gross
</pre>

<p>then the defaults for the <tt>runspec</tt> command would change as specified.  A user who types either of the following
two commands would get precisely the same effect:</p>

<pre>   runspec --config=michael
   runspec --config=michael --output=text,ps --tune=base --reportable gross 
</pre>         
         
<h4 id="sectionI.B.2">I.B.2. specmake</h4>

<p>The tool <tt>specmake</tt> is simply GNU  make renamed to avoid any possible conflicts with other versions of make that may
be on your system.  The options commonly used for <tt>specmake</tt> are listed 
in the <a href="#Dtoc_III">table of contents for section III</a>.</p>

<p>For example, these config file lines:</p>

<pre>   CC           = cc
   CPORTABILITY = -DSPEC_LP64
   OPTIMIZE     = -O4
</pre>

<p>are written to the makefile set that is ultimately used to build the benchmark, and are interpreted by
<tt>specmake</tt>.</p>


<h4 id="sectionI.B.3">I.B.3. The shell </h4>

<p>Some config file lines define commands that are handed off to the shell or, on Windows, the command interpreter.  The
list of these is in the <a href="#Dtoc_IV">table of contents for section IV</a>.</p>

<p>For example, consider a config file that contains:</p> 

<pre>   fdo_pre0     = mkdir /tmp/joydeep/feedback; rm -f /tmp/joydeep/feedback/* 
</pre>

<p>When using this config file, <tt>runspec</tt> will pass the above command to the shell prior to running a training run for
feedback directed optimization.  It is the shell that actually carries out the requested commands, not <tt>runspec</tt>, so
the syntax of the command depends on whether you are using the Unix shell (<tt>/bin/sh</tt>) or the Windows command
interpreter (<tt>cmd.exe</tt>).  </p>

<p><span style="background:#fff28a; font-size:115%"> Because <tt>runspec</tt> can cause arbitrary commands to be executed,
<span class="alarm"> it is therefore important to read a config file you are given before using it.</span></span></p>


<h4 id="sectionI.B.4">I.B.4. Readers of the results</h4>

<p>If a SPEC OMP2012 result is published (for example, at <a class="external"
href="http://www.spec.org/">http://www.spec.org/</a>), it is expected to contain all the information needed for a reader to
understand exactly what was tested.  Fields that are informative for readers are listed in the <a href="#Dtoc_V">table of contents
for section V</a>.</p> 

<p>For example, config file lines such as these are addressed to the human reader:</p>

<pre>   hw_avail  = Aug-2012
   sw_avail  = Jul-2012
   notes_base_015  = Note: Bios was set to use performance option.
</pre>

<p>In addition, for results published by SPEC, the config file itself is available to readers at <a class="external"
href="http://www.spec.org/omp2012/">http://www.spec.org/omp2012/</a>. The config file is presented as you wrote it, with three
exceptions (<a href="#sectionI.C.1">protected comments</a>, the <a href="#sectionI.C.4">MD5 section</a>, and 
<a class="external"
href="utility.html#description">rawfile corrections for reader fields</a>).  The config file is made available because it is so
important to reproducing results, as described in the <a href="#sectionI.A">Introduction</a>.  The config file is saved on every
run, as a compressed portion of the rawfile, and can be accessed with <span class="ttnobr">runspec --rawformat
--output_format=config &lt;rawfile&gt;</span>.</p> 


<h4 id="sectionI.B.5">I.B.5. The config file preprocessor</h4>

<p>There is also a config file <a href="#sectionVII">preprocessor</a>, which is addressed via lines that begin with
<tt>%</tt> in the first column.  
</p>


<h3 id="sectionI.C">I.C. Config file structure </h3>

<p>A config file contains:</p>
<ul>
        <li> A <a href="#sectionI.C.2">header section</a>.</li>
        <li> An arbitrary number of user-defined <a href="#sectionI.C.3">named sections</a>, delimited by section markers.</li>
        <li> An automatically-generated <a href="#sectionI.C.4">MD5 section</a>.</li>
</ul>

<p id="scope"><b>About "scope":</b> Every line of the config file is considered to be within the scope of one of the above
three.  Lines prior to the first section marker are in the scope of the header section.  All other lines are either in the
scope of the most recently preceding user-defined section marker, or else in the MD5 section.</p>

<p>A line within the scope of a named section may be overridden by a line within the scope of a different named section,
according to rules that are described <a href="#sectionI.C.3">below</a>.</p>

<h4 id="sectionI.C.1">I.C.1. <a name="whitespace"></a>Comments and whitespace</h4>

<p>Comment lines begin with a <tt><b>#</b></tt> (also known as a "hash mark"), and can be placed anywhere in a config file.
You can also add comments at the end of a line, as shown below.  </p>

<pre>
#
# This config file contains new tuning for the new C++ compiler
# 
iterations = 1   # For quick testing.  Reportable runs use 3.
OPTIMIZE = -O11  # Most go up to ten.  These go to eleven.
</pre>

<p>If you need to include a hash mark that you do NOT want to be treated as the start-of-comment delimiter, put a backslash in
front of it:</p>

<pre>
hw_model = Mr. Lee's \#1 Semi-Autonomous Unit
</pre>

<p>When the config file is saved as an encoded portion of the rawfile, the comments are included.  But if a comment line
begins with <tt><b>#&gt;</b></tt>, it is a "protected comment" that will not be saved in the rawfile.  Thus you could use
<tt><b>#</b></tt> for most of your comments, and use <tt><b>#&gt;</b></tt> for proprietary information, such as:</p>

<pre>   #&gt; I didn't use the C++ beta version because of Bob's big back-end bug.
</pre>

<p>Blank lines can be placed anywhere in a config file.</p>

<p>Trailing spaces and tabs are stripped, unless they are preceeded by a backslash:</p>
<pre>   CC_PATH=/path/with/no/trailing/spaces  
</pre>
<p>That is turned into "/path/with/no/trailing/spaces".  To preserve those trailing spaces, you'd simply add a backslash:</p>
<pre>   CC_PATH=/path/with/trailing/spaces\ 
</pre>
<p>That is turned into "/path/with/trailing/spaces ".</p>

<p>Spaces within a line are usually ignored.  Of course, you wouldn't want to spell OPTIMIZE as OPT I MIZE, but you are
perfectly welcome to do either of the following:</p>

<pre>   OPTIMIZE=-O2
   OPTIMIZE   =  -02
</pre>

<p>One place where spaces are considered significant is in <a href="#sectionV.C">notes</a>, where the tools assume you
are trying to line up your comments in the full disclosure reports.  (Notes are printed in a fixed-width font.)</p>

<p>Spaces at the beginning of lines are ignored, except when attempting to address the preprocessor.  Preprocessor directives
always begin with a percent sign (%) in the first column.  You can put spaces after the percent sign, if you wish, as shown by the
examples <a href="#percentspace">below</a>.</p>

<h4 id="sectionI.C.2"><a name="header">I.C.2. Header section </a></h4>
   

<p>The header section is simply the first section, prior to the first occurrence of a named section.</p>

<p>Most attempts to address <tt>runspec</tt> itself must be done in the header section.  For example, if you want to set
<tt>reportable=1</tt>, you must do so before any occurrences of section markers.</p> 

<p id="RelaxedHeader"><b>Relaxed Header Restrictions:</b> Options that are
restricted to appear only in the header section may nevertheless be entered in a named section, <span class="u">if and only
if that section's name is <span class="ttnobr">default=default=default=default:</span></span> (or a <a
href="#omitspecs">shorter</a> spelling thereof, such as just <span class="ttnobr">default:</span>).</p>  
<p class="l1">It is, usually, still a
good idea to put these options up top, since they tend to be global in nature and config files are typically more
maintainable when global options are kept together.  </p>
<p class="l1">Nevertheless, there may be circumstances where it is more convenient to,
effectively, 'return' to the header section, for example, if multiple <a href="#sectionVII">preprocessor macros</a> want to
write text into both the header section and named sections.  </p>
<p class="l1">(Internally, the tools still think of your option as a header
section option, even if you take advantage of this relaxed syntax and enter it into <span
class="ttnobr">default=default=default=default:</span> instead.  Therefore this document, also retains the "header section"
terminology.)</p>

<h4 id="sectionI.C.3"> I.C.3. Named sections, section markers, section specifiers</h4>

<p>A named section is a portion of the config file that begins with a section marker and continues until the next section
marker or the MD5 section is reached. The contents of the named section are applied based upon the precedence rules 
described in the following sections.</p>

<p id="section_marker">A "section marker" is a one- to four-part string of the form:</p>

<pre>   benchmark[,...]=tuning[,...]=extension[,...]=machine[,...]:
</pre>

<p>These are referred to below as the 4 "section specifiers".  The allowed values for the section specifiers are:</p>

<table> 
<tr><td><tt><b>benchmark:</b></tt>  </td>
               <td><tt>default</tt>
               <br /> <tt>gross</tt>
               <br /> Any individual benchmark, such as <tt>350.md</tt>
               <br /> A list of benchmarks, such as <tt>350.md,359.botsspar</tt> 
               <br /> A benchmark set, using one of the <tt>bset</tt> names found in <span
               class="ttnobr">$SPEC/benchspec/OMP2012</span> or <span class="ttnobr">%SPEC%\benchspec\OMP2012</span> 
               </td>
</tr>
<tr><td><tt><b>tuning: </b> </tt>  </td>
               <td> <tt>default</tt>
               <br /> <tt>base</tt>
               <br /> <tt>peak</tt>
               <br /> A list of tuning levels, such as <tt>base,peak</tt> 
               </td>
</tr>
<tr><td><tt><b>extension:</b></tt> </td>
               <td> <tt>default</tt>
               <br />An arbitrary string, such as "<span class="ttnobr">cloyce-naturalblonde</span>"
               <br />A list of extensions, separated by commas 
               </td>
</tr>
<tr><td><tt><b>machine:</b>  </tt> </td>
               <td> <tt>default</tt> 
               <br />An arbitrary string <span class="alarm">[*]</span>
               <br />A list of machine types, separated by commas 
               </td>
</tr>
</table>

<p id="omitspecs">Trailing <tt>default</tt> section specifiers may be omitted from a section marker.  Thus all three of these
section markers are equivalent:</p>

<pre>   363.swim=base=default=default:
   363.swim=base=default:
   363.swim=base:
</pre>

<p id="machineVSext" class="commentarystart"><span class="alarm">[*]</span> The "machine" specifier works similarly to the extension
specifier, but it does not affect the name of the executable produced, which, in many environments, makes it less useful than
the extension specifier.  This document does not describe details of the usage of the "machine" specifier, other than to note that it
exists; if you feel particularly courageous, you may experiment with it.  </p>
<p class="commentarycont"><b><span class="alarm">Warning:</span></b> Please be aware that if you use a single config file to
build with two different machine settings, you will likely overwrite the original binaries each time you change the machine,
since the machine specifier does not affect the name of the generated executable.  </p>
<!--
<p class="commentaryend">An example of the usage of the machine specifier may be found in your config directory, in <span
class="ttnobr" style="background:red">Example-solaris-sparc-sunstudio.cfg</span>.  That config file applies <span class="ttnobr">-DSPEC_LP64</span> when
the machine <span class="ttnobr">native64</span> is selected; it also takes steps to work around the limitation mentioned in
the previous paragraph by using the config file <a href="#sectionVII">preprocessor</a> to change the extension.  
</p>
-->


<p>Section markers can be entered in any order.  Section markers can be repeated; material from identical section markers
will automatically be consolidated.  That is, you are welcome to start one section, start a different one, then go back and
add more material to the first section.  </p>

<p>By constructing section markers, you specify how you would like your options applied, with powerful defaulting and
overriding capabilities.  The next several sections walk through examples to demonstrate precedence, including how sections
interact with each other.</p>

<h5 id="sectionI.C.3.a"> I.C.3.a. Precedence for the benchmark specifier</h5>

<p>For the benchmark specifier, the precedence is:</p>
<pre>
  highest   named benchmark(s)
            suite name
  lowest    default
</pre>

<p id="defaultbenchmark"><b>Using default as the benchmark specifier</b> </p>

<p class="l1">For example, consider this config file that only mentions <tt>default</tt> for the benchmark specifier:</p>

<pre>   $ <b>cat tmp.cfg</b>
   runlist       = smithwa
   size          = test
   iterations    = 1
   tune          = base
   output_format = text
   teeout        = 1

   default=default=default=default:
   OPTIMIZE = -xO1 -w

   $ <b>runspec --config=tmp | grep genScalData.c</b>
   cc -c -o genScalData.o -DSPEC -DSPEC_OMP -DNDEBUG   -xO1 -w    genScalData.c
   $ 
</pre>

<p class="l1">The config file above is designed for quick, simple testing: it runs only one benchmark, namely
<tt>372.smithwa</tt>, using the smallest (<tt>test</tt>) workload, runs it only once, uses only <tt>base</tt> tuning, outputs
only the text-format (ASCII) report, and displays the build commands to the screen (<tt>teeout</tt>).  To use it, we issue a
<tt>runspec</tt> command, and pipe the output to <tt>grep</tt> to search for the actual generated compile command.
(Alternatively, on Windows, we could use <tt>findstr</tt> on the generated log file).</p>

<p id="EyeOnTheBall" class="commentary">The careful reader may ask, "Why does the <a href="#runlist">runlist</a> reference
<tt>smithwa</tt> rather than <tt>372.smithwa</tt>?"  The answer is that the runlist can use benchmark numbers or any abbreviation that
is sufficient for uniqueness; any of the following would have the same effect: <tt>"372.smithwa", "372", "smithwa", "sm",
"372.sm"</tt>.  This is the same rule as for the corresponding option on the 
<a class="external" href="runspec.html#runlist">command line</a>.
</p> 

<p class="l1">The results show that the tuning applied was the expected <tt>-xO1 -w</tt> (which mean optimization level 1 and
suppress warnings, for the Oracle Solaris Studio Compilers).  The tools have automatically added <span class="ttnobr">-c -o
genScalData.o</span> to specify where the object file is to be written.  The switches <span class="ttnobr">-DSPEC -DSPEC_OMP
-DNDEBUG</span> were also added automatically.  The former may enable benchmark code changes from SPEC's porting process (if
any), and the latter turns off C language "assert" statements (if any).
</p>


<p><b id="namedsuite">Using a named suite as the benchmark specifier</b> </p>

<p class="l1">The next example differs from the previous one by adding a section marker with <tt>int</tt>,
for the integer suite, as the first section specifier:</p>

<pre>   $ <b> cat tmp.cfg</b>
   runlist       = smithwa
   size          = test
   iterations    = 1
   tune          = base
   output_format = text
   teeout        = 1

   default=default=default=default:
   OPTIMIZE = -xO2 -w

   gross=default=default=default:
   OPTIMIZE = -xO3 -w

   $ <b>runspec --config=tmp | grep genScalData.c</b>
   cc -c -o genScalData.o -DSPEC -DSPEC_OMP -DNDEBUG   -xO3 -w    genScalData.c
   $
</pre>

<p class="l1">The second <tt>OPTIMIZE</tt> line is used above because the reference to the gross suite is considered to be
more specific than the overall default.</p>  

<p id="bsets" class="l1snugbot">You can also
mention the "bsets" found in <span class="ttnobr">$SPEC/benchspec/OMP2012</span> or <span
class="ttnobr">%SPEC%\benchspec\OMP2012</span>.  For example, you could reference all the C++ benchmarks by saying:</p>
<pre>
   all_cpp=default=default=default:
   OPTIMIZE = -xO3 -w
</pre>
<p class="l1snug">You can mention multiple sets:</p>
<pre>
   all_c,all_cpp=default=default=default:
   OPTIMIZE = -xO3 -w
</pre>


<p id="namedbenchmark"><b>Using a named benchmark as the benchmark specifier</b> </p>

<p class="l1">Furthermore, we can add a specifier that mentions <tt>smithwa</tt> by name:</p>

<pre>   $ <b> cat tmp.cfg</b>
   runlist       = smithwa
   size          = test
   iterations    = 1
   tune          = base
   output_format = text
   teeout        = 1

   default=default=default=default:
   OPTIMIZE = -xO2 -w

   gross=default=default=default:
   OPTIMIZE = -xO3 -w

   372.smithwa=default=default=default:
   OPTIMIZE = -xO4 -w

   $ <b>runspec --config=tmp | grep genScalData.c</b>
   cc -c -o genScalData.o -DSPEC -DSPEC_OMP -DNDEBUG   -xO4 -w    genScalData.c
   $
</pre>

<p class="l1">The third <tt>OPTIMIZE</tt> line wins above, because it is included in the section that is considered to be the
most specific.  </p>

<p id="benchmarklists" class="l1"> You can name more than one benchmark if you wish, as in:</p>
<pre>
   359.botsspar,372.smithwa=default=default=default:
   OPTIMIZE = -xO4 -w
</pre>

<p id="orderdifferentsections"><b>Order of differing sections does not matter:</b> </p>

<p class="l1">Let's change the example from the previous section to a different order.</p>

<pre>   $ <b>cat tmp.cfg</b>
   runlist       = smithwa
   size          = test
   iterations    = 1
   tune          = base
   output_format = text
   teeout        = 1

   372.smithwa=default=default=default:
   OPTIMIZE = -xO4 -w

   default=default=default=default:
   OPTIMIZE = -xO2 -w

   gross=default=default=default:
   OPTIMIZE = -xO3 -w

   $ <b>runspec --config=tmp | grep genScalData.c</b>
   cc -c -o genScalData.o -DSPEC -DSPEC_OMP -DNDEBUG   -xO4 -w    genScalData.c
   $
</pre>

<p class="l1">Notice above that the order of entry is not significant; it's the order of precedence from least specific to
most specific.</p>

<p id="ordersamesection"><b>Order of the same section does matter:</b>  </p>

<p class="l1">When a specifier is listed more than once at the same descriptive level, the last instance of the specifier is
used.  Consider this case:</p>

<pre>   
   372.smithwa=default=default=default:
   OPTIMIZE = -xO4

   350.md=default:
   OPTIMIZE = -fast

   372.smithwa=default=default=default:
   OPTIMIZE = -xO3
</pre>

<p class="l1">The ending value of <tt>OPTIMIZE</tt> for <tt>372.smithwa</tt> is <tt>-xO3</tt>, not <tt>-xO4</tt>.</p>


<h5 id="sectionI.C.3.b"> I.C.3.b. Precedence for the tuning specifier</h5>

<p>For the tuning specifier, either <tt>base</tt> or <tt>peak</tt> has higher precedence than
<tt>default</tt>.  </p>

<p>Here is an example of its use:</p>

<pre>   $ <b>cat tmp.cfg</b>
   runlist       = smithwa
   size          = test
   iterations    = 1
   tune          = base,peak
   output_format = text
   teeout        = 1

   default=default=default=default:
   CC       = /opt/SUNWspro/bin/cc -w

   default=base=default=default:
   CC       = /update1/bin/cc -w

   default=peak=default=default:
   CC       = /update2/bin/cc -w

   $ <b>runspec --config=tmp | grep genScalData.c</b>
   /update1/bin/cc -w -c -o genScalData.o -DSPEC -DSPEC_OMP -DNDEBUG   genScalData.c
   /update2/bin/cc -w -c -o genScalData.o -DSPEC -DSPEC_OMP -DNDEBUG   genScalData.c
   $ 
</pre>

<p>In the above example, we compile smithwa twice: once for base tuning, and once for peak.  Notice that in both cases the
compilers defined by the more specific section markers have been used, namely <span class="ttnobr">/update1/bin/cc</span> and
<span class="ttnobr">/update2/bin/cc</span>, rather than <span class="ttnobr">/opt/SUNWspro/bin/cc</span> from <span
class="ttnobr">default=default=default=default</span>.</p>   

<h5 id="sectionI.C.3.c"> I.C.3.c. Precedence for the extension specifier</h5>

<p>For the extension specifier, any named extension is at a higher precedence level than the <tt>default</tt>.</p>

<p id="extfound"><b>Using an extension found in the config file</b></p>

<p class="l1">The next example, builds with either the library for the "<tt>bsdmalloc</tt>" memory allocation routines, or
the alternative multi-threaded "<tt>mtmalloc</tt>" routines.  
</p>

<pre>   $ <b>cat tmp.cfg</b>
   runlist       = smithwa
   size          = test
   iterations    = 1
   tune          = base
   output_format = text
   teeout        = 1

   default=default=default:
   LIBS = -lslowmalloc

   default=default=myke:
   LIBS = -lbsdmalloc

   default=default=yusuf:
   LIBS = -lthread -lmtmalloc
   $
   $ <b>runspec --config=tmp --extension=myke | grep genScalData.o</b>
   cc -c -o genScalData.o -DSPEC -DSPEC_OMP -DNDEBUG   genScalData.c
   cc sequenceAlignment.o getUserParameters.o genSimMatrix.o genScalData.o 
   verifyData.o pairwiseAlign.o scanBackward.o verifyAlignment.o mergeAlignment.o 
   verifyMergeAlignment.o dispElapsedTime.o specrand.o -lm -lbsdmalloc  
   -o smithwaterman
   $
   $ <b>runspec --config=tmp --extension=yusuf | grep genScalData.o</b>
   cc -c -o genScalData.o -DSPEC -DSPEC_OMP -DNDEBUG   genScalData.c
   cc sequenceAlignment.o getUserParameters.o genSimMatrix.o genScalData.o 
   verifyData.o pairwiseAlign.o scanBackward.o verifyAlignment.o mergeAlignment.o 
   verifyMergeAlignment.o dispElapsedTime.o specrand.o -lm -lthread -lmtmalloc  
   -o smithwaterman
   $ 
   $ <b>cd $SPEC/benchspec/OMP2012/372.smithwa/exe</b>
   $ <b>ls -lt | head -3</b>
   total 5888
   -rwxrwxr-x   1 alan  staff      244688 May 11 16:32 smithwaterman_base.yusuf
   -rwxrwxr-x   1 alan  staff      244628 May 11 16:31 smithwaterman_base.myke
   $ 

</pre>

<p class="l1">Notice above that two different versions of smithwa were built from the same config file, and neither one used
<tt>slowmalloc</tt>, since the named extension is higher priority than the default.  Both executables are present in the
<tt>exe</tt> directory for <tt>372.smithwa</tt>.</p> 

<p id="extnotfound"><b>Using an extension that is not found in the config file</b></p>

<p class="l1">The previous section demonstrated use of the <tt>runspec</tt> switch <span class="ttnobr">--extension</span> to
select among extensions defined in the config file.  But what if the extension on the command line is not mentioned in the
config file?  The example below continues immediately from the example just above:</p>

<pre>   $ <b>runspec --config=tmp --extension=yusoff</b>
   runspec v1698 - Copyright 1999-2012 Standard Performance Evaluation Corporation
   ...
   ERROR: The extension 'yusoff' defines no settings in the config file!
          If this is okay and you'd like to use the extension to just change
          the extension applied to executables, please put
       allow_extension_override = yes
          into the header section of your config file.
</pre>

<p class="l1">By default, if you mention an extension on the <tt>runspec</tt> command line that does not exist in the config
file, the tools refuse to build.</p>

<p id="extoverride"><b>Extension override</b></p>

<p class="l1">But if you add <a href="#allow_extension_override">allow_extension_override=yes</a> to the top of the config
file, then the tools will build or run with the extension you specified, using the same settings as they would have used if
no extension had been entered on the <tt>runspec</tt> command line.  </p>

<p class="l1">The next example continues with a config file that adds <tt>allow_extension_override</tt> to the previous
example config file:</p>

<pre>   $ <b>diff tmp.cfg tmp2.cfg</b>
   0a1
   &gt; allow_extension_override=yes
   $
   $ <b>runspec --config=tmp2 --extension=yusoff | grep genScalData.o</b>
   cc -c -o genScalData.o -DSPEC -DSPEC_OMP -DNDEBUG   genScalData.c
   cc sequenceAlignment.o getUserParameters.o genSimMatrix.o genScalData.o 
   verifyData.o pairwiseAlign.o scanBackward.o verifyAlignment.o mergeAlignment.o 
   verifyMergeAlignment.o dispElapsedTime.o specrand.o -lm -lslowmalloc  
   -o smithwaterman
   $
   $ <b>cd $SPEC/benchspec/OMP2012/372.smithwa/exe</b>
   $ <b>ls -lt | head -2</b>
   total 6384
   -rwxrwxr-x   1   alan   staff        244628 May 11 16:39 smithwaterman_base.yusoff
</pre>

<p class="l1">Notice above that although the tools now consent to build with the requested extension, the library
settings now falls back to the <tt>default</tt>, since "<tt>yusoff</tt>" does not match any section markers.</p>

<h5 id="sectionI.C.3.d"> I.C.3.d. Combining specifier types</h5>

<p>If more than one section applies to a particular benchmark without disagreement among them, then all are applied.</p>

<p>Consider this example:</p>

<pre>   $ <b>cat tmp.cfg</b>
   runlist       = smithwa
   size          = test
   iterations    = 1
   tune          = base
   output_format = text
   teeout        = 1

   default=default=default=default:
   OPTIMIZE = -xO2 -w
   CC       = /opt/SUNWspro/bin/cc 
   LIBS     = -lbsdmalloc

   372.smithwa=default=default=default:
   OPTIMIZE = -xO4 -w

   default=peak=default=default:
   CC       = /update1/bin/cc 

   default=default=mt=default:
   LIBS     = -lthread -lmtmalloc

   $ <b>runspec --config=tmp --tune=peak --ext=mt | grep genScalData.o</b>
   /update1/bin/cc -c -o genScalData.o -DSPEC -DSPEC_OMP -DNDEBUG  -xO4 -w  
   genScalData.c
   /update1/bin/cc  sequenceAlignment.o getUserParameters.o genSimMatrix.o 
   genScalData.o verifyData.o pairwiseAlign.o scanBackward.o verifyAlignment.o 
   mergeAlignment.o verifyMergeAlignment.o dispElapsedTime.o specrand.o 
   -lm -lthread -lmtmalloc   -o smithwaterman

   $ 
</pre>

<p>Notice above that all three sections applied: the section specifier for <tt>372.smithwa</tt>, the specifier for
<tt>peak</tt> tuning, and the specifier for extension <tt>mt</tt>.</p>  


<h5 id="sectionI.C.3.e"> I.C.3.e. Precedence among section types</h5>

<p>If sections conflict with each other, the order of precedence is:</p>

<pre>
     highest     benchmark
                 suite
                 tuning
     lowest      extension
</pre>

<p>And this order can be demonstrated as follows:</p>

<pre>    $  <b>cat tmp.cfg</b>
     runlist       = smithwa
     size          = test
     iterations    = 1
     tune          = base
     output_format = text
     teeout        = 1
     makeflags     = -j30
  
     default=default=default=default:
     OPTIMIZE = -xO1 -w
  
     gross=default=default=default:
     OPTIMIZE = -xO2 -w
  
     372.smithwa=default=default=default:
     OPTIMIZE = -xO3 -w
  
     default=peak=default=default:
     OPTIMIZE = -xO4 -w
  
     default=default=mt=default:
     OPTIMIZE = -xO5 -w

     376.kdtree=peak=default=default:
     OPTIMIZE = -xO6 -w

     376.kdtree=default=mt=default:
     OPTIMIZE = -xO7 -w
     $
     $ <b>runspec --config=tmp smithwa | grep genScalData.o</b>
[1]  cc -c -o genScalData.o -DSPEC -DSPEC_OMP -DNDEBUG   -x03 -w genScalData.c
     $ <b>runspec --config=tmp --tune=peak smithwa | grep genScalData.o</b>
[2]  cc -c -o genScalData.o -DSPEC -DSPEC_OMP -DNDEBUG   -x03 -w genScalData.c
     $ <b>runspec --config=tmp --extension=mt smithwa | grep genScalData.o</b>
[3]  cc -c -o genScalData.o -DSPEC -DSPEC_OMP -DNDEBUG   -x03 -w genScalData.c
     $ 
     $ <b>runspec --config=tmp --tune=base nab | grep nabmd.c</b>
[4]  cc -c -o nabmd.o -DSPEC -DSPEC_OMP -DNDEBUG   -xO2 -w   nabmd.c
     $ <b>runspec --config=tmp --tune=peak nab | grep nabmd.c</b>
[5]  cc -c -o nabmd.o -DSPEC -DSPEC_OMP -DNDEBUG   -xO2 -w   nabmd.c
     $ <b>runspec --config=tmp --extension=mt nabp | grep nabmd.c</b>
[6]  cc -c -o nabmd.o -DSPEC -DSPEC_OMP -DNDEBUG   -xO2 -w   nabmd.c
     $ 
     $ <b>runspec --config=tmp --tune=base kdtree | grep kdtree.cc</b>
[7]  CC -c -o kdtree.o -DSPEC -DSPEC_OMP -DNDEBUG -xO2 -w   kdtree.cc
     $ <b>runspec --config=tmp --tune=peak kdtree | grep kdtree.cc</b>
[8]  CC -c -o kdtree.o -DSPEC -DSPEC_OMP -DNDEBUG -xO6 -w   kdtree.cc
     $ <b>runspec --config=tmp --extension=mt kdtree | grep kdtree.cc</b>
[9]  CC -c -o kdtree.o -DSPEC -DSPEC_OMP -DNDEBUG -xO7 -w   kdtree.cc
     $ <b>runspec --config=tmp --tune=peak --extension=mt kdtree | grep kdtree.cc</b>
[10] CC -c -o kdtree.o -DSPEC -DSPEC_OMP -DNDEBUG -xO6 -w   kdtree.cc
     $ 
</pre>

<p>Notice above that the named benchmark always wins: lines [1], [2], and [3].  If there is no section specifier that names a
benchmark, but there is a section specifier that names a suite, then the suite wins: lines [4], [5], and [6].  If a named benchmark
does not exist for the specified tunings, it will only use the default suite tuning in line [7].  Since there is an applicable benchmark 
specifiers, then tuning or extension can be applied in lines [8] and [9].  If both tuning and extension are applied to a named benchmark, tuning
wins [10].</p>


<h4 id="sectionI.C.4"> I.C.4. MD5 Section</h4>

<p>The final section of your config file is generated automatically by the tools when the benchmarks are compiled, and looks
something like this:</p>

<pre>
   __MD5__
   376.kdtree=base=oss12.3=default:
   # Last updated Fri Jul  6 07:46:06 2012
   optmd5=16a3b148495576c508be87f036f6b208
   baggage=
   compile_options=\
   @eNqtUVFPwjAQfu+vuPS9TMSYSByJlElQ2JbAIvGFjK6Q4toubWfw39shID5IjOFeeu3d9/W+72Kt\
   iMzf+EqUHHTlhFa2i6wzgrmFqVUhzOKdG7H6CPEVRj61viXE7TuMoi1ntRNqDUxLmavCIwFsxVnD\
   CGQDnQMlIucC0WSSdiHwzcE0i19sZXT7utUJlkIFlAJhQPSBqqWBDKZpRPfHwmOPaRrFu1s8iPrZ\
   EHyQNZBVbh0QeXsDZKsrrmQFpBRLk5uP0Lqy0sY1JakLXoaSF6KWcIx7q2vDeA/RLtD5PMS/jYn3\
   HUn/KUlnIf4xNUZeIE2zx/HDcOprf1SAUfLFmc5Gk9Fr5JH/04PReBQ/n/H4Ek7p5YYzZ3vfTycO\
   NO6MB+fsu5jU3U9J1uzgZAGfosLiLA==
   exemd5=9e48ab4b360e9de4cd123b44e75f456d

</pre>

<p>The "MD5" is a checksum that ensures that the binaries referenced in the config file are in fact built using the options
described therein.  For example, if you edit the config file to change the optimization level for 376.kdtree, the next time
the file is used for kdtree, the tools will notice the change and will recompile it.</p>

<p>You can optionally disable this behavior, but doing so is strongly discouraged.  See the acerbic remarks in the
description of <a href="#check_md5"><tt>check_md5</tt></a>, below.</p>

<p>If you would like to see what portions of your config file are used in computing the MD5 hash, <tt>runspec</tt> with
<span class="ttnobr">--debug=30</span> or higher, and examine the log file.</p>

<p>For published results, the published config file (from <span class="ttnobr">rawformat --output_format=config</span>) does
not include the MD5 section.</p>

<h4 id="sectionI.C.5"> I.C.5. Shell-like <a name="here_docs"></a>"here documents" and <a
name="backslash_continuation"></a>backslash continued lines</h4>

<p>Shell-style "here documents" are supported for setting variables to multi-line values.  Backslash-continued lines are also
supported:</p>

<pre>   $ <b>cat tmp2.cfg</b>
   expand_notes  = 1
   size          = test
   runlist       = smithwa
   iterations    = 1
   output_format = text

   foo =&lt;&lt;EOT

   This +
   is a +
   test +
   EOT

   bar = \
         and +\
         so  +\
         is  +\
         this+

   notes01 = $foo
   notes02 = $bar

   $ <b>runspec --config=tmp2 | grep txt</b>
           format: ASCII -&gt; /ailuropoda/raj/spec/result/OMPG2012.017.test.txt
   $ <b>grep + ../result/*017*txt</b>
       This +
       is a +
       test +
             and +
             so  +
             is  +
             this+
   $
</pre> 

<p>Note: although the above forms of continued lines are supported, they are rarely used.  The more common method of
continuation is by appending a number to a field, as described in the section <a href="#sectionV.B">"Field scoping and
numbered continuation lines"</a>.</p>

<h4 id="sectionI.C.6"> I.C.6. Included files</h4>

<p>It is possible to include another file in your config file.  A typical use for this feature might be to keep all the
software information in the main config file, but to include the hardware information about the current System Under Test
(SUT) in another file.  For example:</p>

<pre>   $ <b>cat tmp.cfg</b>
   output_format = text
   iterations    = 1
   size          = test
   sw_compiler   = myC V1.0
   sw_avail      = Mar-2012
   runlist       = smithwa
   include: SUT.inc

   default=base:
   OPTIMIZE = -O
   $ <b>cat SUT.inc</b>
   hw_model = SuperHero IV
   hw_avail = Feb-2012

   $ <b>runspec --config tmp | grep txt</b>
           format: ASCII -&gt; /manas/spec/result/OMPG2012.160.test.txt
   $ <b>grep avail ../result/*160.test.txt</b>
    [...]       Hardware availability: Feb-2012
    [...]       Software availability: Mar-2012
   $ 
</pre>

<p>Notice above that the report mentions both the hardware and software dates.</p>

<h3 id="sectionI.D"> I.D. Variable Substitution</h3>

<table style="border:none;">
<tr style="border:none;">
<td style="border:none; padding-right:1em;">

<p>You can do variable substitution using your config file.  But, as described in the <a href="#sectionI.B">Introduction</a>,
the contents of a config file are directed to various consumers.  Therefore, effective use of variable substitution requires
you to be aware of which software is doing the substitution.  Differing syntax is used for each.</p>

<table>
<tr>
   <th>%{macro_name}</th>
   <td><p class="snug">The config file preprocessor does <i>macro</i> substitution.  Macros to be substituted always use a
   percent sign and curly brackets: <tt>%{macro_name}</tt> See the <a href="#sectionVII">preprocessor</a> section for more
   information.  </p> </td>
</tr>

<tr>
  <th>$[variable]</th>
  <td><p class="snug">A dollar sign and square brackets cause <tt>runspec</tt> to do substitution immediately after reading
  the config file.  This is useful for variables that don't change during a run, for example <tt>$[top]</tt> to refer to the
  directory where SPEC OMP2012 has been installed.</p> </td>
</tr>

<tr>
  <th>$variable<br />${variable}</th>
  <td><p class="snug">A dollar sign and the name of a variable cause Perl variable interpolation to be used, for example
  <tt>$hw_avail</tt>.  Curly brackets can be used to help the parser avoid confusion with contiguous other content:
  <tt>${hw_avail}ish</tt>.</p> </td>
</tr>

<tr>
   <th>\$VARIABLE</th>
   <td><p class="snug">If <tt>runspec</tt> generates an external command which is handed off to your shell (or command
   interpreter), the variable will be interpreted according to the rules of your shell.  Such a variable might look like
   this: <tt>\$SPEC</tt>.</p></td>
</tr>

<tr>
   <th>$(VARIABLE)</th>
   <td><p class="snug">If the variable is handed off to <tt>specmake</tt>, it is interpreted by the usual rules of GNU 
   make.  Such variables might look like this: <tt>$(FOPTIMIZE)</tt>.</p></td>
</tr>

</table>

</td>
<td style="background:#fff28a; width: 25%; padding:.5em; border:thin solid gray;">
<p style="font-family:cursive;">
q. Wait a minute... all these choices for substitution?  Which one do I want?</p>

<p>a. You probably want <a href="#sectionVII">the preprocessor</a>.</p>

<p>Have a look at the example at the top of <a href="#sectionVII">Section VII</a>.   If that looks like what you want, you're
all set; otherwise, you'll have to think through which consumer you are addressing (runspec, specmake, or the shell) and pick
your syntax accordingly.</p>
</td></tr></table>



<h4 id="sectionI.D.1"> I.D.1. By runspec</h4>

<p>Substitution by <tt>runspec</tt> itself uses two different methods: the <a href="#sectionI.D.1.a">first</a> is immediately
after the config file is read, and the <a href="#sectionI.D.1.b">second</a> is via Perl variable interpolation.</p>

<h5 id="sectionI.D.1.a">I.D.1.a At startup: $[variable]</h5>

<p>Substitution for variables of the form <tt>$[variable]</tt> happens immediately after the config file is read.  Any value
that's set in the config file and is visible in the scope where the variable is used can be substituted.  Because of the
named section scoping restriction, if you want to use variable substitution to note your optimization flags, the notes for
the individual benchmarks must be in those benchmarks' sections:</p>

<pre>
350.md=peak=default=default:
PEAKFLAG=-gofast
# The following will turn into what you expect
notes_peak_350_1=I use $[PEAKFLAG]

350.md=base=default=default:
BASEFLAG=-besafe
# The following will turn into what you expect:
notes_base_350_1=I use $[BASEFLAG]
<span class="alarm"># The following will NOT WORK:
notes_base_350_2=My brother likes $[PEAKFLAG]</span>
</pre>

<p>You can't substitute variables that don't exist or whose values aren't known when the config file is read.</p>

<p class="snugbot"><span class="alarm">Wrong:</span></p>
<pre class="alarm" style="margin-top:0em;
padding-left:.2em;;border-left: thin solid red;">ext = foo

default:
OPTIMIZE = -xO2
notes01 = my ext is $[ext]

default=default=bar:
OPTIMIZE = -xO1
notes02 = my ext is $[ext]
</pre>

<p>This doesn't work because the sorting of which extensions to use doesn't happen until after the config file is
processed.  In this particular example, it's obvious (to <b>you</b>) what the value should be, but the tools aren't as clever
as you are.</p>


<p>Perhaps the most useful variable is the one for the top of the SPEC OMP2012 tree, <tt>$[top]</tt>, often found in 
contexts such as:</p>

<pre>
    flagsurl = $[top]/myflagsdir/myflagsfile.xml
</pre>

<p>Variables of possible interest might include:</p>

<table>
<tr>
  <th>configpath</th>
  <td>The location of your config file</td>
</tr>
<tr>
  <th>dirprot</th>
  <td>protection that is applied to directories created by runspec</td>
</tr>
<tr>
  <th>endian</th>
  <td>4321 for big endian, 1234 for little</td>
</tr>
<tr>
  <th>flag_url_base</th>
  <td>directory where flags files are looked up</td>
</tr>
<tr>
  <th>OS</th>
  <td>unix or windows</td>                 
</tr>
<tr>
  <th>os_exe_ext</th>
  <td>exe for windows, nil elsewhere </td>
</tr>
<tr>
  <th>realuser</th>
  <td>the user name according to the OS</td>
</tr>
<tr>
  <th>top</th>
  <td>the top directory of your installed SPEC OMP2012 tree</td>
</tr>
<tr>
  <th>username</th>
  <td>the <a class="external" href="runspec.html#username">username</a> for purposes of tagging run directories</td> 
</tr>
<tr>
  <th>uid</th>
  <td>the numeric user id</td>
</tr>
</table>

<p>You can substitute for most options that you enter into the config file, including: <tt>
action, allow_extension_override, backup_config, basepeak, check_md5, check_version, command_add_redirect, config, copies, delay,
deletework, difflines, env_vars, expand_notes, expid, ext, fake, feedback, flagsurl, http_proxy, http_timeout, ignore_errors,
ignore_sigint, info_wrap_columns, iterations, line_width, locking, log_line_width, mach, mail_reports, mailcompress,
mailmethod, mailport, mailserver, mailto, make, make_no_clobber, makeflags, <!-- max_active_compares, --> mean_anyway,
minimize_builddirs, minimize_rundirs, no_input_handler, no_monitor, notes_wrap_columns, notes_wrap_indent, output_format,
output_root, plain_train, power, power_analyzer, rawformat, rebuild, reportable, runlist, section_specifier_fatal, sendmail, 
setprocgroup, size, strict_rundir_verify, sysinfo_program, table, teeout, temp_meter, threads, 
tune, use_submit_for_speed, username, verbose, version_url.</tt></p>

<p>You can also print out the value of additional variables that you may have created.</p>

<p>Here is a sample config file that illustrates square bracket variable substitution:</p>

<pre>
$ <b>cat x.cfg</b>
expand_notes = 1
runlist      = gross
action       = validate
myfriend     = jamiemeow
output_root  = /tmp
flagsurl     = $[top]/Docs/flags/flags-advanced.xml

notes01      = Today, I am running $[runlist] in $[top] on a $[OS] system 
notes02      = Today the flags file is $[flagsurl]
notes03      = Today, my favorite friend is $[myfriend]

$ <b>runspec --config=x  --fakereportable | grep txt</b>
        format: ASCII -&gt; /tmp/result/OMPG2012.002.txt
$ <b>grep Today /tmp/result/OMPG2012.002.txt</b>
     Today, I am running fp in /spec/omp2012 on a unix system 
     Today the flags file is /spec/omp2012/Docs/flags/flags-advanced.xml
     Today, my favorite friend is jamiemeow
</pre>

<p>You can't use square brackets to substitute variables whose value changes during a run or build.</p>

<p class="snugbot"><span class="alarm">Wrong:</span></p>
<pre class="alarm" style="margin-top:0em;
padding-left:.2em;;border-left: thin solid red;">default=default=default=default:
#        I executed ''
notes0 = I executed '$[command]'
</pre>

<p>What did you expect?</p>

<p>Don't worry -- you'll receive a warning if you use a variable that the tools don't know about.  It's up to you to heed
them.</p>

<h5 id="sectionI.D.1.b">I.D.1.b During a run: $variable, ${variable}</h5>

<p>The second round uses Perl variable interpolation.  Only Perl scalars (denoted by a leading $) can be interpolated.  For
example, <tt>notes001</tt> below uses the log file number (generated by the tools) and the hardware availability date (which
was set directly):</p>

<pre>
$ <b>cat tmp.cfg</b>
runlist       = md
tune          = base
size          = test

iterations    = 1
output_format = text

expand_notes  = 1
hw_avail      = May-2012
notes001      = This run is from log.$lognum with hw_avail $hw_avail

$ <b>runspec -c tmp | grep txt</b>
        format: ASCII -&gt; /spec/david/result/OMPG2012.029.test.txt
$ <b>grep with ../result/*029*txt</b>
     This run is from log.029 with hw_avail May-2012
$ 
</pre>

<p>In this case, <tt>$hw_avail</tt> could also have been substituted in the first round by writing it as
<tt>$[hw_avail]</tt>.  In general, for variable interpolation, the earlier the better.</p>

<p>To put text immediately after a variable, you need to make it possible for the parser to see the variable that you want,
by using braces:</p>

<pre>   % <b>tail -2 tmp.cfg</b>
   notes001 =You have done ${lognum}x runs tonight, go to bed.

   % <b>runspec -c tmp | grep txt</b>
      format: ASCII -&gt; /john/result/OMPG2012.103.test.txt
   % <b>grep done /john/result/OMPG2012.103.test.txt</b>
      You have done 103x runs tonight, go to bed.
</pre>

<p>Interpolation won't always do what you wish it might do: for example, some variables are only defined at certain times, and
your <tt>submit</tt> or <tt>notes</tt> line might be interpolated at a different time.  When debugging a config files that uses
variable interpolation, you will probably find 
<a class="external" style="white-space:nowrap;" href="runspec.html#size">--size
test</a> 
useful.</p> 

<p>Some things that you might choose to interpolate include:</p>
<table>
<tr>
    <th>baseexe</th>
    <td>The first part of the executable name, which is <span class="ttnobr">&lt;baseexe&gt;_&lt;tune&gt;.&lt;ext&gt;</span>.
    For example, in "<span class="ttnobr">smithwaterman_base.foo</span>", <span class="ttnobr">baseexe</span> is "<span
    class="ttnobr">smithwaterman</span>".</td>
</tr>
<tr>
    <th>benchmark</th>
    <td>The number and name of the benchmark currently being run, for example <tt>372.smithwa</tt></td>
</tr>
<tr>
    <th>benchname</th>
    <td>The name of the benchmark currently being run, for example <tt>smithwa</tt></td>
</tr>
<tr>
    <th>benchnum</th>
    <td>The number of the benchmark currently being run, for example <tt>372</tt></td>
</tr>
<tr>
    <th>benchtop</th>
    <td>The top directory for the benchmark currently being run, for example
    <tt>/spec/omp2012/benchspec/OMP2012/372.smithwa</tt></td>
</tr>
<!--
<tr>
    <th>BIND</th>
    <td>A value from your <a href="#bind">bind</a> list.  This variable is actually interpreted by <a class="external"
    href="utility.html#specinvoke">specinvoke</a>, and cannot be spelled with braces.  Say <tt>$BIND</tt>, do not say
    <tt>${BIND}</tt>.</td> 
</tr>
-->
<tr>
    <th id="command">command</th>
    <td>The shell command line to run the current benchmark, for example 
    <span class="ttnobr"> ../run_base_test_foo.0000/kdtree_base.foo 100000 10 2 &gt; testset.out 2&gt;&gt; testset.err</span>
    </td>
</tr>
<tr>
    <th>commandexe</th>
    <td>The executable for the current command, for example <span class="ttnobr"> ../run_base_test_foo.0000/kdtree_base.foo</span></td>
</tr>
<tr>
    <th>ext</th>
    <td>The extension for the benchmark being run</td>
</tr>
<tr>
    <th>iter</th>
    <td>The current iteration number</td>
</tr>
<tr>
    <th>logname</th>
    <td>The complete log file name, for example <span class="ttnobr">/spec/omp2012/result/OMP2012.168.log</span></td>
</tr>
<tr>
    <th>lognum</th>
    <td>The log file number, for example <tt>168</tt></td>
</tr>
<tr>
    <th>tune</th>
    <td>The tuning for the benchmark being run (<tt>base</tt> or <tt>peak</tt>)</td>
</tr>
<tr>
    <th>workload</th>
    <td>The current workload number (within the iteration)</td>
</tr>
</table>

<p>For example, let's say you want to go for minimal performance.  You might want to do this with the <tt>nice</tt> command.
You can say:</p> 

<pre>   submit=nice 20 '$command'
</pre>

<p>and the <tt>$command</tt> gets expanded to whatever would normally be executed but with <tt>nice 20</tt> stuck in front of it.</p>

<p>If you'd like a complete list of the variables that you can use in your commands (relative to the config file you're
using), set <tt>runspec</tt>'s verbosity to 35 or higher (<span class="ttnobr">-v 35</span>) and do a run that causes a
command substitution to happen, with <span class="ttnobr">expand_notes=1</span>.</p>


<h5 id="sectionI.D.1.c"> I.D.1.c Example: cleaning files before a training run</h5>

<p> Perhaps a more useful example is this one, which directs the shell to clean files related to the current executable in
the temporary directory, before a training run for feedback directed optimization:</p>

<pre>   fdo_pre0     = mkdir /tmp/pb; rm -f /tmp/pb/${baseexe}*
</pre>

<p> NOTICE in this example that although the commands are carried out by the shell, the variable substitution is done by
<tt>runspec</tt>.</p>


<h5 id="sectionI.D.1.d">I.D.1.d Example: submit to multiple nodes, Tru64 Unix</h5>

<p> The following lines submit to multiple nodes on a Compaq AlphaServer SC Series Supercomputer running Tru64 Unix:</p>

<pre>   submit= echo "$command" &gt; dobmk; prun -n 1 sh dobmk
   command_add_redirect=1
</pre>

<p> In this example, the command that actually runs the benchmark is written to a small file, <tt>dobmk</tt>, which is then
submitted to a remote node selected by <tt>prun</tt>.  The parallel run command, <tt>prun</tt>, can execute multiple copies
of a process, but in this case we have requested just one copy by saying <tt>-n 1</tt>.  The SPEC tools will create as many
copies as required.</p>

<p>The <tt>command_add_redirect</tt> is crucial.  What happens without it?</p>

<pre>$ <b>head prun1.cfg</b>
submit= echo "$command" &gt; dobmk; prun -n 1 sh dobmk

ext            = prun
action         = validate
runlist        = md
size           = test
use_submit_for_speed = 1
iterations     = 1        
ignore_errors  = 1
output_format  = text
$ <b>runspec -c prun1.cfg </b>
...
$ <b>cd $SPEC/benchspec/OMP2012/350.md/run/run_base_test_prun.0000/</b>
$ <b>cat dobmk </b>
../run_base_test_prun.0000/md_omp_base.prun 
$ 
</pre>

<p>Now let's use command_add_redirect, and see how dobmk changes:</p>

<pre>$ <b>diff prun1.cfg prun2.cfg </b>
1a2
&gt; command_add_redirect=1
$
$ <b>runspec -c prun1.cfg </b>
...
$ <b>cd $SPEC/benchspec/OMP2012/350.md/run/run_base_test_prun.0000/</b>
$ <b>cat dobmk </b>
../run_base_test_prun.0000/md_omp_base.prun &gt; 1.out 2&gt;&gt; 1.err
$ 
</pre>

<p> Notice that with <span class="ttnobr">command_add_redirect=1</span>, the substitution for <tt>$command</tt> includes both
the name of the executable and the file assignments for standard in, standard out, and standard error.  This is needed
because otherwise the files would not be connected to md on the remote node.  That is, the former generates [*]:</p>

<pre>echo "md_omp_base.prun " &gt; dobmk; 
prun -n 1 sh dobmk &gt; 1.out 2&gt;&gt; 1.err
</pre>

<p> And the latter generates [*]:</p>

<pre>echo "md_omp_base.prun &gt; 1.out 2&gt;&gt; 1.err" &gt; dobmk; 
prun -n 1 sh dobmk
</pre>
         <p class="commentary">[*] The picky reader may wish to know that the examples were editted for readability: a line wrap
         was added, and the directory string <tt>.../run_base_test_prun.0000/</tt> was omitted.  The advanced reader may wonder
         how the above lines were discovered: for the former, we found out what <tt>runspec</tt> would generate by going to the
         run directory and typing <tt>specinvoke -n</tt>, where <tt>-n</tt> means dry run; in the latter, we typed <tt>specinvoke
         -nr</tt>, where <tt>-r</tt> means that <tt>$command</tt> already has device redirection.  For more information on
         <tt>specinvoke</tt>, see <a class="external" href="utility.html#specinvoke">utility.html</a>.  </p>  

<!--
<h5 id="sectionI.D.1.e">I.D.1.e Example: bind to processors, SPEC TurboBlaster9000</h5>

<p> The following lines bind copies to individual processors on a SPEC TurboBlaster 9000 running *nix:</p>

<pre>
   bind= 0, 4, 8, 12, 16, 20
   submit= procbind -p $BIND $command
</pre>

<p> In this example, the list of processors to bind is set using the <a href="#bind">bind</a> facility, which is then used as
an argument to the <tt>procbind</tt> command.  With these settings, the first copy will be bound to processor 0, the second
to processor 4, the third to processor 8, and so on.  If more than six copies are run, the list is re-used starting from the
beginning; that is, copy seven would also be bound to processor 0 and so on.</p>

<p>An equivalent way to say the same as the above would be</p>

<pre>
   bind0= procbind -p 0
   bind1= procbind -p 4
   bind2= procbind -p 8
   bind3= procbind -p 12
   bind4= procbind -p 16
   bind5= procbind -p 20
   submit= $BIND $command
</pre>

<p> The content of each of the <tt>bind</tt> settings need not be the same, or even similar.</p>

<p>Two important notes about the above submit commands:</p>

<ol>
     <li><tt>$BIND</tt> must be spelled exactly as it is in the examples above.  It is a limitation of the tools that saying
     things like <tt>${BIND}</tt> just won't work.</li>

     <li><p class="snugbot">For <tt>bind</tt> settings that contain whitespace or commas, the second form (multiple assignments) must be
     used.  You can't say something like this:</p>
     
     <pre>bind = "procbind -p 0", "procbind -p 4", "procbind -p 8"  <span class="alarm"><b>&lt;-- WRONG</b></span>
</pre>
     
     </li>

</ol>
-->


<h4 id="sectionI.D.2"> I.D.2. By the shell \$VARIABLE </h4>

<p>Substitution by the shell - or by the windows command interpreter - uses backslash dollar sign.  The next two sections explain
why both punctuation marks are required, and then provide an example.</p> 

<h5 id="sectionI.D.2.a">I.D.2.a Protecting shell variables</h5>

<p> Because Perl variables look a lot like shell variables, you need to specially protect shell variables if you want to
prevent Perl from trying to interpret them.  Notice what happens with the protected and unprotected versions:</p>

<pre>$ <b>cat tmp.cfg</b>
runlist              = md
size                 = test
tune                 = base,peak
iterations           = 1

output_format        = text
teeout               = 1
expand_notes         = 1
use_submit_for_speed = 1

default=peak=default=default:
submit = echo "home=$HOME; spec=$SPEC;" &gt; /tmp/chan; $command

default=base=default=default:
submit = echo "home=\$HOME; spec=\$SPEC;" &gt; /tmp/nui; $command
$ <b>runspec --config=tmp > /dev/null</b>
$ <b>cat /tmp/chan</b>
home=; spec=;
$ <b>cat /tmp/nui</b>
home=/home/chris; spec=/spec/omp2012;
$ 
</pre>

<p>In the first <tt>submit</tt> command, <tt>$HOME</tt> and <tt>$SPEC</tt> were gobbled up by <tt>runspec</tt>.  But since
those are not the names of variables that can be interpolated, empty strings were the result.  In the second command, the
backslashes prevented <tt>runspec</tt> from interpreting the variables, so they were seen by the shell instead.</p>

<!-- cpu comment
<p>By default, <tt>submit</tt> is only applied to SPECrate runs.  In this example, we used it for a SPECspeed run
as well, by setting</p>
-->

<p>By default, <tt>submit</tt> may be applied to runs.  In this example this capability was redundantly enabled
by setting</p>

<pre>use_submit_for_speed = 1 
</pre>

<p> in the configuration file.</p>

<!-- not needed for OMP2012
<h5 id="sectionI.D.2.b">I.D.2.b Example: submitting to multiple nodes, SGI Origin 2000</h5>

<p> Here is a more complex example which uses substitution by both <tt>runspec</tt> and by the shell (the lines will be
concatenated before execution):</p>

<pre>   submit0= let "NODE=$SPECCOPYNUM/2"; 
   submit1= export NODE=/hw/nodenum/\$NODE; 
   submit2= let "CPU=2*(($SPECCOPYNUM+1)/2)-$SPECCOPYNUM "; 
   submit3= export CPU; 
   submit4= /usr/sbin/dplace -place \$SPEC/submit.pf -mustrun $command
</pre>

<p>(Note that the above example originated on an SGI Origin system where the shell uses <tt>let</tt> and <tt>dplace</tt> and
other commands that might not apply to your shell.)  Let's walk through how it works.</p>

<p>First, <tt>runspec</tt> substitutes the current copy number for<tt> $SPECCOPYNUM</tt>, and then passes the above command
to the shell which does the substitutions for CPU and NODE.  This example originated on an SGI Origin 2000 system, where
there are two CPUs per node.  Suppose that <tt>runspec</tt> is about to submit the copy for copy number 17.  In that
case, the above lines effectively cause::</p>

<pre>   submit0= let "NODE=$SPECCOPYNUM/2";      # i.e. 17, so NODE=8
   submit1= export NODE=/hw/nodenum/\$NODE;      # Now NODE=/hw/nodenum/8
   submit2= let "CPU=2*(($SPECCOPYNUM+1)/2)-$SPECCOPYNUM ";  # and CPU=1
   submit3= export CPU; 
   submit4= /usr/sbin/dplace                     # So we execute dplace
            -place \$SPEC/submit.pf              # using $SPEC/submit.pf
            -mustrun $command                    # and the expected command
</pre>

<p> The desired <tt>$command</tt> is run under the control of <tt>submit.pf</tt>, with <tt>$NODE=/hw/nodenum/8</tt> and
<tt>$CPU=1</tt>.  Here are the contents of the placement file, <tt>submit.pf</tt>:</p>

<pre>   memories 1 in topology physical near $NODE
   threads 1
   run thread 0 on memory 0 using cpu $CPU
</pre>

<p> An important note about the above submit command:</p>

<ul>
     <li><tt>$SPECCOPYNUM</tt> must be spelled exactly as it is in the examples above.  It is a limitation of the tools that
     saying things like <tt>${SPECCOPYNUM}</tt> just won't work.</li>
</ul>
-->


<h4 id="sectionI.D.3"> I.D.3. By specmake: $(VARIABLE)</h4>

<p>Variables with a dollar sign and parentheses, aka "round brackets", are substituted by <tt>specmake</tt>.  For
example:</p>
<pre>
    COMPILER_DIR=/usr/local/bin/
    CC=$(COMPILER_DIR)cc
</pre>

<p>For a more extensive example of variable substitution handled by <tt>specmake</tt>, see the example in the file 
$(SPEC)/config/example-advanced.cfg. 
Search that file for LIBS, and note the long comment which provides a walk-through of a complex substitution handled by
<tt>specmake</tt>. </p>

<p><span class="alarm">Deprecated feature alert: Although it is also possible to pass information to <tt>specmake</tt> using
curly brackets: <tt>${SPECMAKE}</tt>, this is not recommended.</span>  Instead, you should consistently use curly brackets to
address <tt>runspec</tt> and round brackets to address <tt>specmake</tt>.  It is possible that a future version of
<tt>runspec</tt> may insist on interpolating curly brackets itself, rather than allowing <tt>specmake</tt> to do so.</p>


<h4 id="sectionI.D.4"> I.D.4. Limitations on variable substitution</h4>

<p>Once <tt>runspec</tt> hands control over to <tt>specmake</tt> or to the shell, the results of further substitution are
invisible to <tt>runspec</tt>.  For this reason, you can't say:</p>

<p class="snugbot"><span class="alarm">Wrong:</span></p>
<pre class="alarm" style="margin-top:0em;
padding-left:.2em;;border-left: thin solid red;">MYDIR         = /usr/gretchen/compilers
FC             = $(MYDIR)/f90
notes_comp_001 = compiler: $(FC)
</pre>

<p>However, there are a couple of ways to get around this restriction.  The best way for global settings is to use the <a
href="#sectionVII">preprocessor</a>:</p>

<pre>
%define MYDIR /usr/gretchen/compilers
FC             = %{MYDIR}/f90
notes_comp_001 = compiler: %{MYDIR}/f90
</pre>

<p>That leaves a little to be desired, though, doesn't it?  If your Fortran compiler is changed to 'f2001', you still need
to remember to change it in two places.  You could of course define a whole macro for this:</p>

<pre>
%define MYFC /usr/gretchen/compilers/f90
FC             = %{MYFC}
notes_comp_001 = compiler: %{MYFC}
</pre>

<p>But what if you have a config file where FC might be set in multiple places, and you really want to know how it was set
<strong>right here</strong>?  In that case, use a combination of the preprocessor and variable substitution:</p>

<pre>
$ <b>cat right_here.cfg </b>
%define MYDIR /usr/gretchen/compilers

default=base:
FC              = %{MYDIR}/f2001
notes_comp_001  = For base, we used this Fortran: $[FC] 

351.bwaves=peak:
FC             = %{MYDIR}/f77
notes_comp_002 = For 351.bwaves peak, we used this Fortran: $[FC]

$ <b>runspec -c right_here.cfg --fakereportable fp | grep txt       </b>
        format: ASCII -&gt; /usr/gretchen/spec/result/OMPG2001.179.test.txt
$ <b>show ../result/*179*.txt</b>

                          Compiler Invocation Notes
                          -------------------------
     For base, we used this Fortran: /usr/gretchen/compilers/f2001 
     For 351.bwaves peak, we used this Fortran: /usr/gretchen/compilers/f77

</pre>


<h4 id="sectionI.D.5"> I.D.5. Unsetting a variable with "%undef%"</h4>

<p>It is sometimes useful to be able to undo the setting of a variable that is defined in a lower-precedence section.
This is easily accomplished using the special value '%undef%':</p>

<pre>  $ <b>cat gnana.cfg</b>
   teeout = yes
   action = build
   runlist = smithwa

   default=default:
   OPTIMIZE = -O
   COPTIMIZE = -fast

   372.smithwa=peak:
   COPTIMIZE = %undef%

   $ <b>runspec --config=gnana --tune=base | grep genScalData.c</b>
   cc -c -o genScalData.o -DSPEC -DSPEC_OMP -DNDEBUG   -fast genScalData.c
   $ <b>runspec --config=gnana --tune=peak | grep genScalData.c</b>
   cc -c -o genScalData.o -DSPEC -DSPEC_OMP -DNDEBUG   genScalData.c

   $ <b>go smithwa</b>
   /spec/gnana/test/benchspec/OMP2010/372.smithwa
   $ <b>cd run/build_peak_none.0000/</b>
   $ <b>grep OPT Make*</b>
   Makefile.spec:COPTIMIZE        = 
   Makefile.spec:OPTIMIZE         = -O

</pre>

<p>As you can see in the peak compilation, the '-fast' flag was not present because the setting for COPTIMIZE had been
deleted.</p>


<h2 id="sectionII">II. Config file options for runspec</h2>

<p>This section documents options that control the operation of <tt>runspec</tt> itself.</p>  

<h3 id="sectionII.A">II.A. Precedence: config file vs. runspec command line</h3>

<p>In the list that follows, some items are 
<a class="external" href="runspec.html#options">linked to runspec.html</a>, because
they can be specified either in a config file, or on the <tt>runspec</tt> command line. </p> 

<p>If options can be specified on both the <tt>runspec</tt> command line and in a config file, the command line will win vs.
items specified in the <a href="#header">header section</a>, but will not win over items specified in named sections.
Effectively, the order of precedence is:
</p>
<pre>
   named sections (highest)
   command line
   header section (lowest)
</pre>

<p>For an example of these precedence rules in action, see <a href="#sectionVI.E">section VI.E.</a> on
<tt>--feedback</tt></p>

<h3 id="sectionII.B">II.B. Options </h3>

<p class="snugbot">In the table that follows, the "Use In" column indicates where the option can be used:</p>

<table style="border-style:none; padding:2px 2em 1em">
<tr>
   <td style="border-style:none;"><tt>H</tt></td>
   <td style="border-style:none;">use only in <a href="#sectionI.C.2">header section</a></td>
</tr>
<tr>
   <td style="border-style:none;"><tt>N</tt></td>
   <td style="border-style:none;">use in a <a href="#sectionI.C.3">named section</a>.</td>
</tr>
<tr>
   <td style="border-style:none;"><tt>H,N</tt></td>
   <td style="border-style:none;"> can be used in both the <a href="#sectionI.C.2">header section</a> and in <a
   href="#sectionI.C.3">named sections</a>.  The item can therefore be applied on a global basis, and/or can be applied to
   individual benchmarks.</td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<!--
<tr>
   <td id="absolutely_no_locking" > <tt>absolutely_no_locking</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>0</tt></td>
   <td>Do not try to lock <strong>any</strong> files.  Use of this option practically ensures that multiple concurrent runs
   in the ame installation, even by the same user, will get mixed or no output.  It is just barely possible that this option
   might be useful in obscure support circumstances but is NOT normally expected to be used.</td>
</tr>
-->

<tr>

   <td id="action"><a class="external" href="runspec.html#action"><tt>action</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>validate</tt></td>
   <td>What to do.  </td>
</tr>

<tr>
   <td id="allow_extension_override" > <tt>allow_extension_override</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>0</tt></td>
   <td><p class="snugtop">The <tt>runspec</tt> command can use <span class="ttnobr">--extension</span> to select among
   different options in a config file, as mentioned <a href="#sectionI.C.3.c">above</a>.  But what if the extension mentioned
   on the <tt>runspec</tt> command does not occur in any section marker?  What should be done then?</p>

   <ul>
   <li>If <tt>allow_extension_override</tt> is 0 (or <tt>no</tt> or <tt>false</tt>), the tools will print an error message
   and exit.</li>
   <li>If <tt>allow_extension_override</tt> is 1 (or <tt>yes</tt> or <tt>true</tt>), then the tools will attempt to build (or
   run) the same binary they would have built by default, but will name the binary with specified extension.  See the example
   <a href="#extoverride">above</a>.</li>
   </ul>
   </td>
</tr>

<tr>
   <td id="backup_config" > <tt>backup_config</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>1</tt></td>
   <td>When updating the MD5 hashes in the config file, make a backup copy first.  Highly recommended to defend against
   full-file-system errors, system crashes, or other unfortunate events.</td>

</tr>

<tr>
   <td id="basepeak" > <tt>basepeak</tt> </td>
   <td><tt>H,N</tt></td>
   <td><tt>0</tt></td>
   <td>Use base binary and/or base result for peak.  If applied to the whole suite (in the header section), then only base is
   run, and its results are reported for both the base and peak metrics.  If applied to a single benchmark, the same binary
   will be used for both base and peak runs, and the median of the base run will be reported for both.</td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
<!-- this doesn't make a lot of sense for OMP2012
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="bind" > <tt>bind</tt> </td>
   <td><tt>H,N</tt></td>
   <td><tt>''</tt></td>
   <td>

<p class="snug">List of values with which $BIND should be replaced in a <a href="#submit">submit</a> command.  This can be a
simple comma (or white-space) separated list, such as:</p>

<pre>
bind = 0,1,2,3,4,5,6,7, 16,17,18,19,20,21,22,23     
</pre>

<p class="snug">If your line is too long, don't try to continue it by adding a numeral to 'bind'; that has a different
meaning, as described a little below.  Instead, you can continue it either by putting a backslash at the end of lines, or by
using a <a href="#sectionI.C.5">here document</a>.  The above single line could equally well be expressed as:</p>

<pre>
bind = &lt;&lt;EOT
0,   1,   2,   3,   4,   5,   6,   7,
16, 17,  18,  19,  20,  21,  22,  23        
EOT
</pre>

<p class="snugtop">Note above that the trailing comma after the "7" is both optional and harmless.   It can be present or
not, as you wish; in either case, the sequence of values for this example will be 6, 7, 16, 17.</p>

<p class="snugbot">The bind values do not have to be a simple number.  You can also use it to substitute longer strings
that themselves contain whitespace or commas.  To do so, use the format</p>
<pre>bindN = string </pre>
<p class="snug">The example that follows effectively assigns 1 copy to processor 1, and 3 copies to processor 0.
</p>
<pre>
bind0 = taskset -c 1 
bind1 = taskset -c 0 
bind2 = taskset -c 0 
bind3 = taskset -c 0 

submit    = $BIND $command
</pre>
<p class="snugtop">Like <a href="#sectionV.C">notes</a>, the indices are not important and are used for ordering only.</p>

<p class="snugbot">If there are more copies than bind values, they will be re-used in a circular fashion.  If there are more
bind values specified than copies, then only as many as needed will be used.  <span class="oldnews">(History: The bind
feature was added with SPEC CPU2006 V1.0.  The ability to change bind on a per-benchmark basis was added in SPEC CPU2006
V1.1.)</span></p></td>
</tr>

-->

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="build_in_build_dir" > <tt>build_in_build_dir</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>1</tt></td>
   <td><p class="snug">When set, put build directories in a subdirectory named</p>
   <pre style="margin-left:1em;">benchspec/OMP2012/<i>nnn.benchmark</i>/build/build... (Unix) or
benchspec\OMP2012\<i>nnn.benchmark</i>\build\build... (Windows)</pre>
<!--
   <p class="snug">Specifying '0' will cause the build directories to be the same as in SPEC CPU2006 V1.0: </p>
-->
   <p class="snug">Specifying '0' will cause the build directories to be the run tree: </p>
   <pre style="margin-left:1em;">benchspec/OMP2012/<i>nnn.benchmark</i>/run/build... (Unix)
benchspec\OMP2012\<i>nnn.benchmark</i>\run\build... (Windows)</pre>

<p><b>Why are build directories separated?</b> Benchmarks are now built in directories named <span
class="ttnobr">nnn.benchmark/build</span> rather than under the benchmark's <span class="ttnobr">run</span> subdirectory in
order to make it easier to copy, backup, or delete build and run directories separately from each other.  It may also make
problem diagnosis easier in some situations, since your habit of removing all the run directories will no longer destroy
essential evidence 10 minutes before the compiler developer says "Wait - what exactly happened at build time?".</p>

<!--
<p>If you prefer the SPEC CPU2006 V1.0 behavior, you can revert to it by setting <span
class="ttnobr">build_in_build_dir</span> to 0.</p>

<p class="snugbot"><span class="oldnews">(History: The build_in_build_dir feature was added in SPEC CPU2006
V1.1.)</span></p></td>
-->
</tr>

<tr>
   <td id="check_md5" > <tt>check_md5</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>1</tt></td>
   <td><p class="snugtop"><tt>Runspec</tt> uses MD5 hashes to verify that executables match the config file that invokes
   them, and if they do not, <tt>runspec</tt> forces a recompile.  You can turn that feature off by setting <span
   class="ttnobr">check_md5=0</span>.</p>

   <p><span class="alarm">Warning: It is strongly recommended that you keep this option at its default, '1' (that is,
   enabled).  </span>  If you disable this feature, you effectively say that you are willing to run a benchmark even if you
   don't know what you did or how you did it -- that is, you lack information as to how it was built!  </p>
   
   <p>The feature can be turned off because it may be useful to do so sometimes when debugging (for an example, see <a
   href="#env_vars">env_vars</a>, below), but it should not be routinely disabled.</p>
   
   <p class="snugbot">Since SPEC requires that you disclose how you build benchmarks, reportable runs (using the command-line
   switch <span class="ttnobr">--reportable</span> or config file setting <span class="ttnobr">reportable=1</span>) will
   cause check_md5 to be automatically enabled.</p></td> 
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="check_version" > <a class="external" href="runspec.html#check_version"><tt>check_version</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>0 (1 for<br />reportable<br />runs)</tt></td>
   <td><p class="snugtop">When set, before doing a <a href="#reportable">reportable</a> run, <tt>runspec</tt> will download a
   small file (~15 bytes) from www.spec.org containing the current version of the suite and the date it was released, and
   check your copy vs.  that file.  In this way, you can be notified if the version of the suite that you're using is
   out-of-date.  </p>
   
   <p>Setting this variable to <tt>0</tt> will disable this check.</p>  
   
   <p>If you'd like to check a local file instead, you can modify <a
   href="#version_url">version_url</a> to point to your internal copy.  </p>

   <p class="snugbot">If you would like to check your version for a NON-reportable run, you will need to add <span
   class="ttnobr">--check_version</span> to your command line.  Setting <span class="ttnobr">check_version=1</span> in the
   config file only causes the check for reportable runs.  <!-- <span class="oldnews">(History: The check_version feature was
   added in SPEC CPU2006 V1.0.)</span> --></p></td>
</tr>

<tr>
   <td id="command_add_redirect" > <tt>command_add_redirect</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>0</tt></td>
   <td>If set, the generated <a href="#command">$command</a> will include redirection operators (stdout, stderr), which are
   passed along to the shell that executes the command.  If this variable is not set, specinvoke does the redirection itself.
   This option is commonly used when using the <a href="#submit">submit</a> command; please see the example in <a
   href="#sectionI.D.1.d">section I.D.1.d</a>.</td>
</tr>

<!-- cpu thing
<tr>
   <td id="copies" > <a class="external" href="runspec.html#copies"><tt>copies</tt></a> </td> 
   <td><tt>H,N</tt></td>
   <td><tt>1</tt></td>
   <td> <p class="snugtop">Number of copies.  For base, the number of copies must be the same for all benchmarks, but for
   peak it is allowed to vary: for example, you could decide to run 64 copies of all benchmarks except <tt>458.sjeng</tt>,
   which would run only 63.</p>

   <p class="snugbot"><span class="oldnews">(History: change introduced with SPEC CPU2006 V1.1)</span> If you select <a
   href="#basepeak">basepeak=1</a> for a benchmark, the number of copies in peak will be forced to be the same as in base.
   In SPEC CPU2006 V1.0, selection of the number of copies could differ, but this was deemed to be an error.  If you want to
   run the same tuning in both base and peak, while changing the number of copies, you will need to build two binaries with
   the same compiler switches.  </p>
   </td>
</tr>
-->

<tr>
   <td id="current_range" > <tt>current_range</tt> </td> 
   <td><tt>H,N</tt></td>
   <td><tt>none</tt></td>
   <td>Set the maximum current in amps to be used by the power analyzer(s).
This can be used to control the settings on a per benchmark level 
(named section) or across all benchmarks (header section).
   </td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="delay" ><a class="external" href="runspec.html#delay"> <tt>delay</tt></a> </td> 
   <td><tt>H,N</tt></td>
   <td><tt>0</tt></td>
   <td>Insert a delay of the specified number of seconds before and after benchmark execution.  This delay does not
   contribute to the measured runtime of the benchmark.  This delay is also not available in a reportable run. <!--<span
   class="oldnews">(History: The delay feature was added in SPEC CPU2006 V1.0.)</span>--></td>
</tr>

<tr>
   <td id="deletework" ><a class="external" href="runspec.html#deletework"> <tt>deletework</tt></a> </td> 
   <td><tt>H,N</tt></td>
   <td><tt>0</tt></td>
   <td>If set to 1, always delete existing benchmark working directories.  An extra-careful person might want to set this to
   ensure no unwanted leftovers from previous benchmark runs, but the tools are already trying to enforce that property.</td>
</tr>
  
<tr>
   <td id="difflines" > <tt>difflines</tt> </td>
   <td><tt>H,N</tt></td>
   <td><tt>10</tt></td>
   <td>Number of lines of differences to print when comparing results.</td>
</tr>

<tr>
   <td id="env_vars" > <tt>env_vars</tt> </td>
   <td><tt>H,N</tt></td>
   <td><tt>0</tt></td>
   <td><p class="snugtop">If this variable is set to 1, then environment settings can be changed for benchmarks using <span
   class="ttnobr">ENV_*</span> options in the config file.  For example, consider the following executable, which fails
   because the library directory has been removed:</p>

<pre style="margin-left:1em;">$ <b>ls -l bwaves_base.tmp3</b>
-rwxrwxr-x  1 david ptg 304964 May 16 9:16 bwaves_base.tmp
$ <b>ldd bwaves_base.tmp | head -3</b>
       libmvec.so.1 =&gt;  /lib/libmvec.so.1
       libfui.so.2 =&gt;   (file not found)
       libfai.so.3 =&gt;   (file not found)
$ 
</pre>

    <p class="snugbot">But if we add the following to the config file:</p>

<pre>check_md5=0
env_vars=1
351.bwaves:
ENV_LD_LIBRARY_PATH=/spec/david/lovecraft/lib
</pre>

    <p class="snugtop">then bwaves gets an LD_LIBRARY_PATH which points to the new library directory, and the benchmark runs
    successfully.  (The addition of <a href="#check_md5">check_md5=0</a> allows us to change the settings for 351.bwaves
    without triggering a rebuild.)</p>
 
   <p><!--<span class="alarm">Note that <tt>env_vars</tt> is not legal for a reportable run.</span> The -->See the <a class="external"
   href="runrules.html#section3.4">run rules</a> for requirements on setting the environment. 
<!--
   Nevertheless, the feature is available, since it might be useful during debugging, or for instrumentation purposes when doing
   performance analysis.--></p> 

   <p>If you are trying to do a reportable run, perhaps the <a href="#preenv">preenv</a> feature is what you're looking
   for.</p>

   <p><b>Which environment?</b>  If you are attempting to communicate settings from your shell environment into
   <tt>runspec</tt>, this is not the feature that you are looking for.  Try the <a href="#sectionVII">config file
   preprocessor</a> instead.  The <tt>env_vars</tt> option and <tt>ENV*</tt> are about communication from the config file to
   the environment of the invoked benchmark.</p>
   
   <p class="snugbot">When developing a config file that uses <tt>env_vars</tt>, you may find it useful to set the <a
   href="#verbose">verbosity level</a> to 35 (or higher), which will cause the tools to log environment settings.  <!-- <span
   class="oldnews">(History: since SPEC CPU2006 V1.0, env_vars settings are logged.)</span> --></p></td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="expand_notes" > <tt>expand_notes</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>0</tt></td>
   <td>If set, will expand variables in notes.  This capability is limited because notes are NOT processed by
   <tt>specmake</tt>, so you cannot do repeated substitutions.  You'll find some suggestions <a
   href="#sectionI.D.4">above</a>.</td>
</tr>

<tr>
   <td id="expid" > <tt>expid</tt> </td>
   <td><tt>H</tt></td>
   <td></td>
   <td>If set to a non-empty value, will cause executables, run directories, results, and log files to be put in a
   subdirectory (with the same name as the value set) in their normal directories.  For example, setting <tt>expid = CDS</tt>
   will cause benchmark binaries to end up in <tt>exe/CDS</tt>, run directories to end up in <tt>run/CDS</tt>, and results
   and logs in <tt>$SPEC/result/CDS</tt>.  <!-- <span class="oldnews">(History: The expid feature was added with SPEC CPU2006
   V1.0.)</span> --></td>
</tr>

<tr>
   <td id="ext" ><a class="external" href="runspec.html#ext"> <tt>ext</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>none</tt></td>
   <td>Extension for executables created.  This may not be set to any value that contains characters other than
   alphanumerics, underscores, hyphens, or periods.</td>
</tr>

<tr>
   <td id="fail" > <tt>fail</tt> </td>
   <td><tt>H,N</tt></td>
   <td><tt>0</tt></td>
   <td>If set, will cause a build or run to fail. <!-- <span class="oldnews">(History: The ability to force a run to fail is new
   was added in SPEC CPU2006 V1.0.)</span> --></td>
</tr>

<tr>
   <td id="fail_build" > <tt>fail_build</tt></td>
   <td><tt>H,N</tt></td>
   <td><tt>0</tt></td>
   <td><p class="snugtop">If set, will cause a build to fail.  For example, you could say something like this:</p>
<pre style="margin-left:1em;">
350.md=default:
#&gt; I am posting this config file for use by others in the
#&gt; company, but am forcing it to fail here because
#&gt; I want to force users to review this section.
#&gt;
#&gt; Once you find your way here, you should test whether
#&gt; bug report 234567 has been fixed, by using the first
#&gt; line below.  If it has not been fixed, then use the
#&gt; second.  In either case, you'll need to remove the
#&gt; fail_build.
#&gt;
#&gt;   - Pney Guvaxre
#&gt;     Boomtime, the 66th day of Confusion in the YOLD 3172

# OPTIMIZE = -Osuperduper
# OPTIMIZE = -Omiddling
fail_build = 1
</pre>

<p>In the example above, the build is forced to fail until the user examines and modifies that section of the config file.
Notice that Pney has used <a href="#sectionI.C.1">protected comments</a> to cause the comments about the internal bug
report to disappear if the config file were to be published as part of a reportable run.</p>
 
   
<!--   <span class="oldnews">(History: The ability to force a build to fail was added in SPEC CPU2006 V1.0.)</span> --></td>
</tr>

<tr>
   <td id="fail_run" > <tt>fail_run</tt> </td>
   <td><tt>H,N</tt></td>
   <td><tt>0</tt></td>
   <td>If set, will cause a run to fail.  <!-- <span class="oldnews">(History: The ability to force a run to fail was added in
   SPEC CPU2006 V1.0.)</span> --></td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="feedback" ><a class="external" href="runspec.html#feedback"> <tt>feedback</tt></a> </td> 
   <td><tt>H,N</tt></td>
   <td><tt>1</tt></td>

   <td><p class="snugtop">
   The <tt>feedback</tt> option applies an on/off switch for the use of feedback directed
   optimization (FDO), without specifying how the feedback will be done.</p>
   <ul>
     <li>If set to 0, then feedback will not be used, even if other options would normally cause it to occur.</li>
     <li>If set to 1, then feedback is allowed to be used, provided that additional options are also set to describe how the
     FDO build should be carried out.</li>
   </ul>

   <p class="snugbot">The interaction between <tt>feedback</tt> and these other options is described in <a
   href="#sectionVI">section VI</a>, below.</p>

   </td> 
</tr>   

<tr>
   <td id="flagsurl" ><a class="external" href="runspec.html#flagsurl"> <tt>flagsurl</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>none</tt></td>
   <td><p class="snugtop">If set, retrieve the named URL or filename and use that as the "user" flags file.  If the special value
   "noflags" is used, runspec will not use any file and (if formatting previously run results) will remove any stored file. 
   For more about automated processing of flags, see <a class="external"href="flag-description.html">flag-description.html</a>.</p>  

   <p>If you want to list more than one flagsfile, the recommended method is by using  <a href="#continuation">numbered
   continuation lines</a>, for example:</p>

   <pre>
     flagsurl1 = mycompiler.xml
     flagsurl2 = myplatform.xml </pre> 

   <p class="snug">Using other methods (such as <a href="#backslash_continuation">backslash continuation</a>) to specify multiple
   flags files may appear to work, but may result in unexpected differences between the original config file and the config file
   as written by <a class="external" href="runspec.html#out">output format config</a>. </p> 

<!--
   <p><span class="new">New with CPU2006 V1.2,</span> multiple flags files will typically be needed, because flags files are
   now separated into two types.  See the overview in <a class="external"
   href="changes-in-v1.2.html#flagsfiles">changes-in-v1.2.html</a>.</p>
-->

   </td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="http_proxy" > <a class="external" href="runspec.html#http_proxy"><tt>http_proxy</tt></a></td> 
   <td><tt>H</tt></td>
   <td></td>
   <td><p class="snugtop">In some cases, such as when doing <a href="#check_version">version checks</a> and loading <a
   class="external" href="flag-description.html">flag description files</a>, <tt>runspec</tt> will use HTTP or FTP to fetch a
   file.  If you need to specify the URL of a proxy server, this is the variable to use.  By default, no proxy is used.  Note that
   this setting will override the value of the <tt>http_proxy</tt> environment variable.  For example, one might set:</p> 
<pre style="margin-left:1em;">http_proxy = http://webcache.tom.spokewrenchdad.com:8080 
</pre>

   <p>Note: if an FTP proxy is needed, it must be set in the <tt>ftp_proxy</tt> environment variable; there is no
   corresponding config file setting.  </p>
   <p class="snugbot">Config files as posted at <a class="external"
   href="http://www.spec.org/omp2012/">www.spec.org/omp2012</a> will not include whatever you put on this line.  <!--<span
   class="oldnews">(History: Support for http proxies was added in SPEC CPU2006 V1.0.)</span> --></p> 
   </td>
</tr>

<tr>
   <td id="http_timeout" > <a class="external" href="runspec.html#http_timeout"><tt>http_timeout</tt></a> </td> 
   <td><tt>H</tt></td>
   <td>30</td>
   <td>This is the amount of time (in seconds) to wait while attempting to fetch a file via HTTP or FTP.  If the connection
   cannot be established in this amount of time, the attempt will be aborted.
   <!-- <span class="oldnews">(History: Support for http timeout was added in SPEC CPU2006 V1.0.)</span> --></td>
</tr>

<tr>
   <td id="idle_current_range" > <tt>idle_current_range</tt> </td> 
   <td><tt>H</tt></td>
   <td><tt>none</tt></td>
   <td>Set the maximum current in amps to be used by the power analyzer(s) for the idle power measurement.
   </td>
</tr>

<tr>
   <td id="ignore_errors" ><a class="external" href="runspec.html#ignore_errors"> <tt>ignore_errors</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>0</tt></td>
   <td>Ignore certain errors which would otherwise cause the run to stop.  Very useful when debugging a new compiler and new
   set of options: with this option set, you'll find out about all the benchmarks that have problems, instead of only finding
   out about the first one.</td>
</tr>

<tr>
   <td id="ignore_sigint" > <tt>ignore_sigint</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>0</tt></td>
   <td>Ignore SIGINT.  If this is set, <tt>runspec</tt> will attempt to continue running when you interrupt one of its child
   processes by pressing ^C (assuming that you have ^C mapped in the common way). Note that this does NOT cause runspec
   itself to ignore SIGINT.</td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="info_wrap_columns" ><a class="external" href="runspec.html#info_wrap_columns"> <tt>info_wrap_columns</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>50</tt></td>
   <td>When set to a value greater than <tt>0</tt>, attempts to split non-notes informational lines such that they are no
   longer than <tt>info_wrap_columns</tt> columns wide.  Lines are split on whitespace, and newly created lines are
   guaranteed to have at least the same indentation as the original line.  If a line contains an item that is longer than
   <tt>info_wrap_columns</tt>, a warning is logged and the original line is left unchanged.  <!-- <span class="oldnews">(History:
   Automatic line wrapping was added in SPEC CPU2006 V1.0.)</span>.--></td>
</tr>

<tr>
   <td id="inherit_from" > <tt>inherit_from</tt> </td>
   <td><tt>N</tt></td>
   <td><tt>''</tt></td>

   <td><p class="snugtop">If set within a benchmark section, allows explicit inheritance of settings from another benchmark's
   section.  The section to be inherited from is referenced using colons between the four <a href="#sectionI.C.3">section
   specifiers</a>.  Other inheritance mechanisms continue to work.  Effectively, the referenced benchmark is the second
   highest priority -- second only to items specifically mentioned in the referring section.  An example may help to clarify
   these points:</p>

<pre style="margin-left:1em;margin-bottom:.2em">$ <b>cat -n tmp.cfg</b>
     1  iterations = 1
     2  size       = test
     3  teeout     = yes
     4
     5  default=default:
     6  OPTIMIZE = -xO1 
     7
     8  gross=default:
     9  OPTIMIZE = -xO2
    10  LIBS     = -lbsdmalloc
    11
    12  352.nab=default:
    13  OPTIMIZE = -xO3 
    14  CC = /update1/cc
    15
    16  372.smithwa=peak:
    17  inherit_from = 352.nab:default:default:default
    18  CC = /update2/cc
$ <b>runspec --config=tmp --tune base smithwa | grep genScalData.o</b>
cc -c -o genScalData.o -DSPEC -DSPEC_OMP -DNDEBUG   -x02 genScalData.c
cc -xO2 sequenceAlignment.o getUserParameters.o genSimMatrix.o genScalData.o 
verifyData.o pairwiseAlign.o scanBackward.o verifyAlignment.o mergeAlignment.o 
verifyMergeAlignment.o dispElapsedTime.o specrand.o -lm -lbsdmalloc  
-o smithwaterman
$ <b>runspec --config=tmp --tune peak smithwa | grep genScalData.o</b>
/update2/cc -c -o genScalData.o -DSPEC -DSPEC_OMP -DNDEBUG   -x03 genScalData.c
/update2/cc -xO3 sequenceAlignment.o getUserParameters.o genSimMatrix.o genScalData.o 
verifyData.o pairwiseAlign.o scanBackward.o verifyAlignment.o mergeAlignment.o 
verifyMergeAlignment.o dispElapsedTime.o specrand.o -lm -lbsdmalloc  
-o smithwaterman
</pre>

   <p>In the above example,</p>
   <ul>

     <li>The first <tt>runspec</tt> command uses the tuning for gross benchmarks, from the config file lines 8-10. </li>

     <li>The second <tt>runspec</tt> command:
        <ul>
        <li>Still applies the gross tuning at line 10 (<tt>-lbsdmalloc</tt>).</li>
        <li>Does not apply the optimization level on line 9, because it is overridden by other options.  Line 17 says that we
        are to inherit from the nab section, so the optimization level at line 13 (<span class="ttnobr">-xO3</span>) is
        used instead.</li>
        <li>But the compiler path at line 14 (<tt>/update1</tt>) is not used: line 18 (<span class="ttnobr">/update2</span>)
        is highest priority.</li>
        </ul></li>

   </ul>

  <p class="snugbot">Line 17 above could have been simplified.  Just as trailing <tt>default</tt> section specifiers can be
  omitted at the original definition points, as explained <a href="#omitspecs">above</a>, they can also be omitted on an
  <tt>inherit_from</tt> option.  <!-- <span class="oldnews">(History: The inherit_from feature was added in SPEC CPU2006
  V1.0.)</span> --></p></td>

</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="iterations" ><a class="external" href="runspec.html#iterations"> <tt>iterations</tt></a> </td> 
   <td><tt>H,N</tt></td>
   <td><tt>3</tt></td>
   <td>Number of iterations to run.</td>
</tr>

<tr>
   <td id="keeptmp" ><a class="external" href="runspec.html#keeptmp"> <tt>keeptmp</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>0</tt></td>
   <td><p class="snugtop">Whether or not to keep various temporary files.  If you leave <span class="ttnobr">keeptmp</span>
   at its default setting, temporary files will be automatically deleted after a successful run.  If not, temporary files may
   accumulate at a prodigious rate, and you should be prepared to clean them by hand.  Temporary files include:</p>

   <ul>
   <li><p><span class="ttnobr">OMP2012.nnn.log.debug</span> in your result directory (<span
   class="ttnobr">$SPEC/result</span>, <span class="ttnobr">%SPEC%\result</span>, or the corresponding location under your <a
   href="#output_root">output_root</a>).</p> </li>
   <li><p>A directory named <span class="ttnobr">tmp</span> under your top level SPEC directory, or under your 
   <a href="#output_root">output_root</a>. </p> </li>
   <li><p>If <span class="ttnobr">tmp</span> is not usable, you might find temporaries under <span
   class="ttnobr">tmp.omp2012</span> or, possibly, <span class="ttnobr">tmp.omp2012.n</span>, where <span
   class="ttnobr">n</span> may range from 1 to 15. </p> </li>
   </ul>
<!--
   <p class="snugbot">The keeptmp feature is new with SPEC CPU2006 V1.1.</p>
   </td>
-->
</tr>

<tr>
   <td id="line_width" > <tt>line_width</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>0</tt></td>
   <td>Line wrap width for screen.  If left at the default, 0, then lines will not be wrapped and may be arbitrarily
   long.</td>
</tr>

<tr>
   <td id="locking" > <tt>locking</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>1</tt></td>
   <td>Try to use file locking to avoid race conditions, e.g. if more than one copy of <tt>runspec</tt> is in use.  Although
   performance tests are typically done with only one copy of <tt>runspec</tt> active, it can be handy to run multiple copies
   if you are just testing for correctness, or if you are compiling the benchmarks. </td>
</tr>

<tr>
   <td id="log_line_width" > <tt>log_line_width</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>0</tt></td>
   <td>Line wrap width for logfiles.  If your editor complains about lines being too long when you look at logfiles, try
   setting this to some reasonable value, such as 80 or 132.  If left at the default, 0, then lines will not be wrapped and
   may be arbitrarily long.</td>
</tr>

<tr>
   <td id="log_timestamp" ><a class="external" href="runspec.html#log_timestamp"> <tt>log_timestamp</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>0</tt></td>
   <td>Whether or not to prepend time stamps to log file lines. <!-- <span class="oldnews">(History: The log_timestamp feature was
   added in SPEC CPU2006 V1.1)</span> --></td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="mach" ><a class="external" href="runspec.html#machine"> <tt>mach</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>default&nbsp;&nbsp;</tt></td>
   <td>Default machine ID.  This may not be set to any value that contains characters other than alphanumerics, underscores,
   hyphens, or periods.  See the <span class="alarm">warning</span> in the description of section specifiers, <a
   href="#machineVSext">above</a>.</td>
</tr>

<tr>
   <td id="mailcompress" > <tt>mailcompress</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>0</tt></td>
   <td>When using the 'mail' output format, turning this on will cause the various report attachments to be compressed with
   bzip2.  <!-- <span class="oldnews">(History: Report mailing was added in SPEC CPU2006 V1.0.)</span> --></td>
</tr>

<tr>
   <td id="mailmethod" > <tt>mailmethod</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>smtp</tt></td>
   <td>When using the 'mail' output format, this specifies the method that should be used to send the mail.  On UNIX and
   UNIX-like systems, there are three choices: 'smtp' (communicate directly with an SMTP server over the network), 'mail'
   (try using mail(1) if available), and 'sendmail' (try invoking sendmail directly).  On Windows systems, only 'smtp' is
   available.  SMTP is the recommended setting.  <!-- <span class="oldnews">(History: Report mailing was added in SPEC CPU2006
   V1.0.)</span>--></td>
</tr>

<tr>
   <td id="mailport" > <tt>mailport</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>25</tt></td>
   <td>When using the 'mail' output format, and when the mailmethod is 'smtp', this specifies the port to use on the mail
   server.  The default is the standard SMTP port and should not be changed.   <!-- <span class="oldnews">(History: Report mailing
   was added in SPEC CPU2006 V1.0.)</span>--></td>
</tr>

<tr>
   <td id="mailserver" > <tt>mailserver</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>127.0.0.1</tt></td>
   <td>When using the 'mail' output format, and when the mailmethod is 'smtp', this specifies the IP address or hostname of
   the mailserver through which to send the results.   <!--<span class="oldnews">(History: Report mailing was added in SPEC
   CPU2006 V1.0.)</span>--></td>
</tr>


<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="mailto" > <tt>mailto</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>''</tt></td>
   <td><p class="snugtop">The address or addresses to which results should be sent when using the 'mail' output format.  If
   multiple addresses are specified, they should be separated by commas or whitespace.  Each address should consist
   <b>only</b> of the name@domain part (i.e. no "full name" type info).  The addresses are not checked for correct
   formatting; if a mistake is made, the results may be sent to an unknown location.  Think: comp.arch.  OK, probably not
   there, but seriously be careful about security on this one.</p>

   <p>Config files as posted at <a class="external" href="http://www.spec.org/omp2012/">www.spec.org/omp2012</a> will not include
   whatever you put on this line (thus, spambots will not see the contents of this field).</p>  
   
   <p><b>Note</b> that to get your reports mailed to you,
   you need to specify both <tt>mail</tt> as an <tt>output_format</tt> and an address to which they should be mailed.  For
   example:</p>

<pre>   mailto=fast.guy@welovebenchmarks.org
   output_format=text,mail
</pre>
   <p class="snugbot">If no addresses are specified, no mail will be sent.  <!-- <span class="oldnews">(History: Report mailing
   was added in SPEC CPU2006 V1.0.)</span>--></p></td>
</tr>

<tr>
   <td id="mail_reports" > <tt>mail_reports</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>all</tt></td>
   <td>The list of report types to mail.  The format and possible values are the same as for <a
   href="#output_format">output_format</a>, with the addition of <tt>log</tt>, which will cause the current log file to be sent.
   The default is for all files associated with the run to be mailed (so, this will include what you listed as your desired
   <tt>output_format</tt> plus <tt>log</tt> (the log file) and <tt>rsf</tt> (the rawfile).  You can cut your email down to
   the bare essentials with something like this:

<pre>   mailto=fast.guy@welovebenchmarks.org
   output_format=text,mail
   mail_reports=text
</pre>
   If none of the requested report types were generated, no mail will be sent.  <!--<span class="oldnews">(History: Report mailing
   was added in SPEC CPU2006 V1.0.)</span>--></td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="make" > <tt>make</tt> </td>
   <td><tt>H,N</tt></td>
   <td><tt>specmake</tt></td>
   <td>Name of make executable.  Note that  the tools will enforce use of <tt>specmake</tt> for reportable results.  </td>
</tr>

<tr>
   <td id="make_no_clobber" ><a class="external" href="runspec.html#make_no_clobber"> <tt>make_no_clobber</tt></a> </td> 
   <td><tt>H,N</tt></td>
   <td><tt>0</tt></td>
   <td>Don't delete directories when building executables.  This option should only be used for troubleshooting a problematic
   compile.  The tools will not allow you to use this option when building binaries for a reportable result.  Note that you
   could issue multiple successive <tt>runspec</tt> commands with this option set (either in the config file, or with the
   <span class="ttnobr">--make_no_clobber</span> switch), and the build directories will be preserved.  But once you remove
   <span class="ttnobr">make_no_clobber</span> (allowing it to default back to <tt>0</tt>), then the tools will attempt a
   normal build with a fresh build directory.
   </td>
</tr>

<tr>
   <td id="makeflags" > <tt>makeflags</tt> </td>
   <td><tt>H,N</tt></td>
   <td><tt>''</tt></td>
   <td><p class="snugtop">Extra flags for make (such as <span class="ttnobr">-j</span>).  Set this to <span class="ttnobr">-j
   <i>n</i> </span> where <i>n</i> is the number of concurrent processes to run during a build.  Omitting <i>n</i> or setting
   it to zero unlimits the number of jobs that will be run in parallel.  (Use of <span class="ttnobr">-j</span> in
   conjunction with ONESTEP will still result in successful builds, but they will be necessarily serialized unless your
   compiler implements the parallelism itself.)  <b>Use with care!</b> Other flags should be used here only if you are
   familiar with GNU make. </p>

   <p class="snugbot"><b>Note</b> that requesting a parallel build with <span class="ttnobr">makeflags = -j N</span> causes multiple
   processors to be used at <i>build</i> time.  It has no effect on whether multiple processors are used at run time<!--, and so
   does not affect how you <a href="#parallelreporting">report</a> on parallelism-->. </p>

<!--
   <p class="snugbot"><span class="oldnews">(History: As of SPEC CPU2006 V1.1, you can use makeflags on Microsoft
   Windows)</span></p>
-->
   </td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<!-- not really useful for OMP2012
<tr>
   <td id="max_active_compares" ><a class="external"
   href="runspec.html#max_active_compares"><tt>max_active_compares</tt></a>&nbsp;&nbsp; </td> 
   <td><tt>H,N</tt></td>
   <td><tt># copies</tt></td>
   <td>Max number of compares to run simultaneously while checking that the benchmarks computed acceptable answers.  Useful
   when doing large SPECrate runs on a system with lots of CPUs. </td>
</tr>
-->

<tr>
   <td id="mean_anyway" > <tt>mean_anyway</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>0</tt></td>
   <td>Calculate mean even if invalid.  <span class="alarm">DANGER:</span> this will write a mean to all reports even if no
   valid mean can be computed (e.g. half the benchmarks failed).  A mean from an invalid run is not "reportable" (that is, it
   cannot be represented in public as the SPEC metric).</td>
</tr>

<tr>
   <td id="minimize_rundirs" > <tt>minimize_rundirs</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>0</tt></td>
   <td>Try to keep working disk size down.  Cannot be used in a reportable run.</td>
</tr>
    
<tr>
   <td id="minimize_builddirs" > <tt>minimize_builddirs</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>0</tt></td>
   <td>Try to keep working disk size down during builds.</td>
</tr>

<tr>
   <td id="nobuild" ><a class="external" href="runspec.html#nobuild"> <tt>nobuild</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>0</tt></td>
   <td>Do not attempt to build benchmarks.  Useful to prevent attempts to rebuild benchmarks that cannot be built.  
   Also comes in handy when testing whether proposed config file options would potentially force an <a
   href="#about.auto.rebuilds">automatic rebuild</a>.  
   <!-- <span class="oldnews">(History: The <span class="nobr">--nobuild</span> feature was added in SPEC CPU2006 V1.0.)</span>--></td>
</tr>

<tr>
   <td id="no_monitor" > <tt>no_monitor</tt> </td>
   <td><tt>H,N</tt></td>
   <td><tt>''</tt></td>
   <td>Exclude the listed workloads from monitoring via the various <tt>monitor_*</tt> hooks.  <!-- <span
   class="oldnews">(History: The no_monitor feature was added in SPEC CPU2006 V1.0)</span>--></td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="no_input_handler" > <tt>no_input_handler</tt> </td>
   <td><tt>H,N</tt></td>
   <td><tt>close</tt></td>
   <td><p class="snugtop">Method to use to simulate an empty input.  Choices are:</p>
    <ul><li><tt>close</tt> - Just close stdin before executing the benchmark (this is the default). </li> 
        <li><tt>zero</tt>  - Create a zero-length file and attach it to stdin.</li>
        <li><tt>file</tt>  - Synonym for <tt>zero</tt>.</li>
        <li><tt>null</tt>  - Open the null device (<tt>/dev/null</tt> or <tt>NUL:</tt>) and attach it to stdin.</li>
    </ul>
    <p class="snugbot">Normally, this option should be left at the default<!--; it was actually added to the tools for the
    benefit of a different SPEC suite that needed the feature-->.  If a reportable run for OMP2012 uses this feature, an
    explanation should be provided as to why it was used.  <!--<span class="oldnews">(History: The no_input_handler feature was
    added in SPEC CPU2006 V1.0.)</span>--></p>
    </td>
</tr>

<tr>
   <td id="notes_wrap_columns" ><a class="external" href="runspec.html#notes_wrap_columns"> <tt>notes_wrap_columns</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>0</tt></td>
   <td>When set to a value greater than <tt>0</tt>, attempts to split notes lines such that they are no longer than
   <tt>notes_wrap_columns</tt> columns wide.  Lines are split on whitespace, and newly created lines are guaranteed to have
   at least the same indentation as the original line.  If a line contains an item that is longer than
   <tt>notes_wrap_columns</tt>, a warning is logged and the original line is left unchanged. <!--<span class="oldnews">(History:
   Automatic line wrapping  was added in SPEC CPU2006 V1.0.)</span>.--></td> 
</tr>

<tr>
   <td id="notes_wrap_indent" > <tt>notes_wrap_indent</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>'    '</tt></td>
   <td>When line wrapping is enabled (see <a href="#notes_wrap_columns">notes_wrap_columns</a>), this is the string that will
   be prepended to newly created lines <b>after</b> the indentation from the original line is applied.  The default is four
   spaces, but it can be set to any arbitrary string.  <!--<span class="oldnews">(History: Automatic line wrapping  was added in
   SPEC CPU2006 V1.0.)</span>--></td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="output_format" ><a class="external" href="runspec.html#out"> <tt>output_format</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>all</tt></td>
   <td>Format for reports.  Valid options are listed at <a class="external" href="runspec.html#out">runspec.html</a> under
   <tt>--output_format</tt>; major options include <tt>txt</tt> (ASCII text), <tt>html</tt>, <tt>pdf</tt>, and <tt>ps</tt>.  You
   might prefer to set this to <tt>txt</tt> if you're going to be doing lots of runs, and only create the pretty reports at the
   end of the series.  See also the information in <a class="external" href="runspec.html#rawformat">runspec.html</a> about
   <tt>--rawformat</tt>.</td> 
</tr>

<tr>
   <td id="output_root" > <tt>output_root</tt> </td> 
   <td><tt>H</tt></td>
   <td></td>
   <td><p class="snugtop">When set to a non-empty value, causes all files written (other than config files) to be rooted in
   the directory named by the value, instead of being rooted in <tt>$SPEC</tt>.  For example, setting <span
   class="ttnobr">output_root = /tmp/foo</span> will cause results and logs to be deposited in <span
   class="ttnobr">/tmp/foo/result</span>.  This also applies to benchmark binaries and run directories.</p>

   <p>This feature can be used to easily allow multiple people to access a single benchmark installation to which (with one
   exception) they do not need write access.  The exception is <tt>$SPEC/config</tt>.  Because the setting for the location
   comes from the config file, the config files still live under <tt>$SPEC</tt>.  On Unix systems, you might choose to set
   the permissions on the <tt>config</tt> subdirectory to 1777 (which is the same as <tt>/tmp</tt> on many systems).</p>
   
   <p class="snugbot">For an example of the use of <tt>output_root</tt>, see the section on it in <a class="external"
   href="runspec.html#output_root">runspec.html</a>.  <!--<span class="oldnews">(History: The output_root feature  was added in
   SPEC CPU2006 V1.0.)</span>--></p></td> </tr>

<!-- Insert this every now and then to keep headers in view -->
<!-- not particularly useful for OMP2012
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="parallel_setup" ><a class="external" href="runspec.html#parallel_setup"> <tt>parallel_setup</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>1</tt></td>
   <td><p class="snugtop">The number of run directories to setup simultaneously.  For large <a href="#rate">SPECrate</a> runs,
   directory setup takes significant time, as files for each copy are written and are checked for correctness.  Using this
   feature may decrease the time required at the beginning of a large SPECrate run.   </p>
   
   <p>Parallelism is only applied per-benchmark: that is, all run directories will be setup for 400.perlbench before
   beginning to setup 401.bzip2, and so forth.  Therefore, this option has no effect for SPECspeed runs or 1-copy 
   SPECrate runs.</p>
   
   <p>The maximum number of benchmark directory setups that will be done in parallel is equal to the number of copies being
   run.  </p>

   <p>A setting of "1" (the default) effectively disables this feature.</p>

   <p class="snugbot" id="parallel_setup_notes"><b>Notes:</b></p>
   <ol class="snugtop">
   <li>The parallel setup/test features 

  (<span class="ttnobr">parallel_setup</span>, 
   <span class="ttnobr">parallel_setup_type</span>, 
   <span class="ttnobr">parallel_setup_prefork</span>,
   <span class="ttnobr">parallel_test</span>, and
   <span class="ttnobr">parallel_test_submit</span>)

   control parallelism during the <i>preparation</i> phase for running the benchmarks, not the actual runs.  Therefore, they
   have no effect on the setting of the report field "Auto&nbsp;Parallel:&nbsp;Yes/No", discussed <a
   href="#parallelreporting">below</a>.</li>  

   <li>These parallel setup/test features are not available on Microsoft Windows.</li>

   <li>Data may be written to stable storage using <a href="#bench_post_setup">bench_post_setup</a> and <a
   href="#post_setup">post_setup</a>.</li>

   <li>A few statistics regarding potential benefit are included in <a class="external"
   href="changes-in-v1.1.html#parallelsetup">changes-in-v1.1.html</a>.  Your performance will vary depending on how you have
   laid out your disk.  </li>

   <li>When considering your disk layout options, bear in mind that the <a class="external"
   href="runrules.html#rule_3.1.1">run rules</a> require use of a single file system.  </li>

   <li><span class="oldnews">(History: The parallel setup/test features were added in SPEC CPU2006 V1.1.)</span> </li>

   </ol>
   <p class="snugbot">The above notes apply to all the parallel_setup and parallel_test switches.</p>
   </td>
</tr>
-->
<!-- Insert this every now and then to keep headers in view -->
<!-- not particularly useful for OMP2012
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="parallel_setup_prefork" ><a class="external" href="runspec.html#parallel_setup_prefork">
   <tt>parallel_setup_prefork</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>none</tt></td>
   <td><p class="snugtop"> If <a href="#parallel_setup_type">parallel_setup_type</a> is set to <tt>fork</tt>, then the <span
   class="ttnobr">parallel_setup_prefork</span> feature can be used to specify a command to be executed prior to doing the work in
   the forked child process.  According to the <a class="external" href="runrules.html#rule_3.2.5">run rules</a>, the command must
   be one that causes a setup process to run on a particular processor.  </p> 

   <p>The command must be able to bind a pre-existing process to a processor.  The current process I.D. is available in the
   <tt>$$</tt> variable.  The <tt>$SPECCOPYNUM</tt> and <tt><a href="#bind">$BIND</a></tt> variables are also available for
   substitution.  </p>
   
   <p>Example: if your operating system uses the "<tt>runon</tt>" command to assign work to a processor, you could enter the
   following to cause setup to use 8 threads, with processes assigned to the even numbered processors:</p>

<pre>   bind                   = 0, 2, 4, 6, 8, 10, 12, 14 
   parallel_setup         = 8
   parallel_setup_type    = fork
   parallel_setup_prefork = runon $BIND $$ 
</pre>

   <p>Note that we do not use any particular <a href="#sidebar.quoting">quoting</a> methods in this case, because we <span
   class="u">do</span> want <span class="ttnobr">runspec</span> to interpret the variables <span class="ttnobr">$BIND</span> and
   <span class="ttnobr">$$</span>.</p>

   <div style="color:#616161;">Technicality alert: the specified command is actually executed
   <strong>after</strong> the call to fork() that creates the new process, but <strong>before</strong> the forked child
   begins doing its work.  Therefore, perhaps a more accurate name for the feature might have been something like
   <tt>parallel_setup_post_fork_pre_doing_the_work_within_the_fork</tt>, but such would exceed even the SPEC CPU2006
   toolset's pedantry limit.  </div>

   <p class="snugbot"><b>Notes: </b>See notes under <span class="ttnobr">parallel_setup</span>, <a
   href="#parallel_setup_notes">above</a>.</p>

</td>
</tr>
-->

<!-- Insert this every now and then to keep headers in view -->
<!-- not particularly useful for OMP2012
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="parallel_setup_type" ><a class="external" href="runspec.html#parallel_setup_type"> <tt>parallel_setup_type</tt></a>
   </td> 
   <td><tt>H</tt></td>
   <td><tt>fork</tt></td>
   <td><p class="snug">When doing <a href="#parallel_setup">parallel setup</a>, select how the parallelism is accomplished.
   The possible values are:</p> 
   <ul> 
   <li><tt>none</tt>: Do no parallel setup, regardless of the setting for <a href="#parallel_setup">parallel_setup</a></li>
    <li><tt>fork</tt>: Use fork() to create setup processes.  Use the command in <a
    href="#parallel_setup_prefork">parallel_setup_prefork</a> (if any) to bind them to processors.  This option has 
    lower overhead than the next option, but is less flexible in terms of how jobs are
    distributed.</li> 
    <li><tt>submit</tt>: Start a separate runspec invocation to do each setup, using the contents of the <a
    href="#submit">submit</a> and <a href="#bind">bind</a> variables as appropriate to distribute the jobs.  Requires more
    overhead than the previous option, since runspec goes through its full initialization, including loading of perl modules.
    </li>
   </ul>

   <p class="snugbot"><b>Notes: </b>See notes under <span class="ttnobr">parallel_setup</span>, <a
   href="#parallel_setup_notes">above</a>.</p>

   </td>
</tr>

<tr>
   <td id="parallel_test" ><a class="external" href="runspec.html#parallel_test"> <tt>parallel_test</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>#base<br />copies</tt></td>
   <td><p class="snugtop">For <a href="#reportable">reportable</a> runs, the tools verify that benchmark binaries get the
   correct answer for the test and train workloads.  The time required for such verification does not count toward the
   reported score, but does add to the cost of benchmarking.  To reduce that cost, you can run multiple tests simultaneously,
   by setting this option to anything higher than 1.</p>

   <p>For SPECrate runs, the default is the number of base copies.  For SPECspeed runs, the default is 1, that is,
   effectively off, but the feature can be turned on by setting it to something higher than 1.</p>

   <p class="snugbot">If the feature is enabled, and if <a href="#parallel_test_submit">parallel_test_submit</a> is also set,
   the settings for <a href="#submit">submit</a> and <a href="#bind">bind</a> will be used to distribute jobs if they're
   set.</p>

   <p class="snugbot"><b>Notes: </b>See notes under <span class="ttnobr">parallel_setup</span>, <a
   href="#parallel_setup_notes">above</a>.</p>
   
   </td>
</tr>

<tr>
   <td id="parallel_test_submit" > <tt>parallel_test_submit</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>0</tt></td>
   <td> <p class="snugtop">Whether or not to use your submit and bind settings when doing parallel_test.  When you specify <a
   href="#parallel_test">parallel_test</a> &gt; 1, by default your submit and bind settings are <strong>not</strong> applied,
   because typically the operating system's default policies  can be trusted to do an adequate job scheduling this
   (non-timed) work.  </p>
   
   <p class="snugbot"><b>Notes: </b>See notes under <span class="ttnobr">parallel_setup</span>, <a
   href="#parallel_setup_notes">above</a>.</p>
   
   </td>
</tr>

-->
<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="plain_train" > <tt>plain_train</tt> </td>
   <td><tt>H,N</tt></td>
   <td><tt>1</tt></td>
   <td>When true (set to 1, 'yes', or 'true'), does not apply any submit commands to the feedback training run.  It also
   causes the monitor_* hooks to be ignored for the feedback training run.  <!-- <span class="oldnews">(History: The plain_train
   feature  was added in SPEC CPU2006 V1.0.)</span>--></td>
</tr>

<tr>
   <td id="power" > <tt>power</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>none</tt></td>
   <td>When this is set to yes, it tells the tools to collect power data during the run.
   </td>
</tr>

<tr>
   <td id="power_analyzer" > <tt>power_analyzer</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>none</tt></td>
   <td>This provides a list of names that are associated with the power meters the 
   tools will use to communicate with the SPEC power daemon.
   These names will then be used in the descriptive fields options which relate to describing the 
   power meters.  When used with the descriptive fields, only the letters and numbers are 
   used in the {id} portion of the field.
   </td>
</tr>

<tr>
   <td id="preenv" ><a class="external" href="runspec.html#preenv"> <tt>preenv</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>1</tt></td>
   <td><p class="snugtop">Use <tt>preENV_</tt> lines in the config file.  When this option is set (the default), lines of the form
   <span class="ttnobr">preENV_&lt;<i>variable</i>&gt; = &lt;<i>value</i>&gt;</span> will cause <tt>runspec</tt> to set the
   specified environment variable to <i>value</i> and re-exec <tt>runspec</tt> to perform the run.  The restart is done in order
   to enforce the "<a class="external" href="runrules.html#section3.4">unchanging environment</a>" run rule.</p>  

   <p>Multiple <tt>preENV_</tt> settings may appear in the config file.</p>

   <p>For an example of the use of <tt>preENV</tt> settings, see the discussion of <tt>$LD_LIBRARY_PATH</tt> in the description of
   <a class="external" href="runspec.html#make_bundle">make_bundle</a>.</p> 

   <p class="snugbot"><b>Note</b> that both the <tt>preenv</tt> option and any <span class="ttnobr">preENV_&lt;<i>variable</i>&gt; =
   &lt;<i>value</i>&gt;</span> lines must appear in the header section of the config file, where the entire run is affected.
   If you are looking for a way to affect the environment of an individual benchmark, try <a
   href="#env_vars">env_vars</a>.</p>
<!--

   <p><span class="oldnews">(History: The preenv option was added in SPEC CPU2006 V1.1)</span></p>
   
   <p class="snugbot"><span class="new">New with SPEC CPU2006 V1.2,</span> the logging for <tt>preENV</tt> has changed
   to reduce confusion and to add useful information.  The change is described in <a class="external"
   href="changes-in-v1.2.html#logfiles">changes-in-v1.2.html</a>.</p>
-->
   </td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="reportable" ><a class="external" href="runspec.html#reportable"> <tt>reportable</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>0</tt></td>
   <td>Strictly follow reporting rules, to the extent that it is practical to enforce them by automated means.  The tester
   remains responsible for ensuring that the runs are rule compliant.  You must set <tt>reportable</tt> to generate a valid
   run suitable for publication and/or submission to SPEC. </td>
</tr>
    
<!--
<tr>
   <td id="rate" ><a class="external" href="runspec.html#rate"> <tt>rate</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>0</tt></td>
   <td>SPECrate vs SPECspeed testing.  Specify 1 for SPECrate metrics, 0 for SPECspeed metrics.</td>
</tr>
-->
    
<tr>
   <td id="rebuild" ><a class="external" href="runspec.html#rebuild"> <tt>rebuild</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>0</tt></td>
   <td>Rebuild binaries even if they exist.</td>
</tr>

<tr>
   <td id="runlist" ><a class="external" href="runspec.html#runlist"> <tt>runlist</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>none</tt></td>
   <td>What benchmarks to run.  Names can be abbreviated, just as on the command line.  See the long discussion of run order in 
<a class="external" href="runspec.html#runlist">runspec.html</a>.</td> 
</tr>

<tr>
   <td id="section_specifier_fatal" > <tt>section_specifier_fatal</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>1</tt></td>

   <td>While parsing the config file, if a <a href="#section_marker">section specifier</a> is found that
   refers to an unknown benchmark or benchset, an error is output and the run stops.  Set <span
   class="ttnobr">section_specifier_fatal=0</span> in the header section of your config file to convert this error into a
   warning and allow the run to continue.  The ability to convert section specifier errors into warnings is probably of use
   only for benchmark developers.
<!--
   
   <p class="snugbot"><span class="oldnews">(History: Prior to CPU2006, section specifier errors were silently ignored -
   which sometimes led to surprising results for testers.  As of SPEC CPU2006 V1.0, by default, surprises are prevented by
   making the errors very visible.)</span> </p>--></td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="sendmail" > <tt>sendmail</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>/usr/sbin/<br />sendmail</tt></td>
   <td>When using the <tt>mail</tt> output format, and when the mailmethod is <tt>sendmail</tt>, this specifies the location of the
   sendmail binary.  <!-- <span class="oldnews">(History: The ability to mail reports  was added in SPEC CPU2006 V1.0.)</span>--></td>
</tr>

<tr>
   <td id="setprocgroup" ><a class="external" href="runspec.html#setprocgroup"> <tt>setprocgroup</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>1</tt></td>
   <td>Set the process group.  On Unix-like systems, improves the chances that ^C gets the whole run, not just one of the
   children.</td>
</tr>

<tr>
   <td id="size" ><a class="external" href="runspec.html#size"> <tt>size</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>ref</tt></td>
   <td>Size of input set.  If you are in the early stages of testing a new compiler or new set of options, you might set this
   to <tt>test</tt> or <tt>train</tt>.  </td>
</tr>

<tr>
   <td id="srcalt" ><a name="src.alt"> </a><tt>src.alt</tt> </td>
   <td><tt>N</tt></td>
   <td><tt>''</tt></td>
   <td><p class="snugtop">Name of subdirectory under <span class="ttnobr">&lt;benchmark&gt;/src/src.alt/</span> from which to
   draw approved source code modifications.  Set this in the named section for the benchmark(s) where you wish to have src.alt(s)
   applied.  Multiple src.alts may be specified for a single benchmark; the names should be separated by commas.  If the
   specified alternate sources are not for the version of the suite in use, or if they are corrupt, the build will fail.<br
   /></p>

   <p class="snugbot">You may also spell this option as <tt>srcalt</tt>.<br />
   Any use of this feature is automatically noted in reports. <br /> 
   See also the chapter "<a href="#sectionIX">About Alternate Sources</a>", below.</p>
<!--
   <p class="snugbot"><span class="oldnews">(History: Automatic reporting of src.alts  was added in SPEC CPU2006
   V1.0.)</span></p>
-->
   </td>
</tr>

<tr>
   <td id="strict_rundir_verify" > <tt>strict_rundir_verify</tt> </td>
   <td><tt>H,N</tt></td>
   <td><tt>1</tt></td>
   <td><p class="snugtop">When set, the tools will verify that the file contents in existing run directories match the
   expected MD5 checksums.  Normally, this should always be on, and reportable runs will force it to be on.  Turning it off
   might make the setup phase go a little faster while you are tuning the benchmarks.  <!-- <span class="oldnews">(History:
   SPEC CPU2000 provided fewer controls over the degree of verification.)</span>--></p>
   
   <p class="snugbot">Developer notes: setting <span class="ttnobr">strict_rundir_verify=0</span>  might be useful when
   prototyping a change to a workload or testing the effect of differing workloads.  Note, though, that once you start changing
   your installed tree for such purposes it is easy to get lost; you might as well keep a pristine tree without modifications, and
   use a second tree that you <a class="external" href="utility.html#convert_to_development">convert_to_development</a>.</p> 
   </td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr id="sysinfo">
   <td id="sysinfo-program" > <tt>sysinfo_program</tt> <a name="sysinfo_program"> </a></td>
   <td><tt>H</tt></td>
   <td><tt>'specperl $[top]/Docs/sysinfo'</tt></td>

   <td><p class="snugtop">The name of an executable program or script that automatically fills out some of the
   information about your system configuration.  An example sysinfo program is on your kit.  To use the example, 
   add this line near the top of your config file (i.e. in the <a href="#header">header section</a>): </p>
   
   <p class="codeexample">sysinfo_program = specperl $[top]/Docs/sysinfo
<!--
   <br /> <span class="alarm" style="font-family:serif">(Note: this is the default for CPU2006 V1.2)</span>--></p>

   <p> If you would like to turn the feature off, you can use:</p>
   <p class="codeexample">sysinfo_program = </p> 
   
   <p><span class="alarm" style="font-family:serif">Warning:</span> it is possible that SPEC may decide to <span
   class="u">require</span> use of a sysinfo utility at a future time.   If that occurs, the online copy of this document at <a
   class="external" href="http://www.spec.org/omp2012/Docs/config.html#sysinfo">www.spec.org/omp2012/Docs/config.html</a> will be
   updated to so indicate.</p>  

   <p class="snugbot">Details about the sysinfo utility may be found in the section  <a href="#sysinfo-detail">About sysinfo</a>, below, including
   how to <a href="#sysinfo-outputs">selectively enable output</a> types, how to <a href="#sysinfo-warnings">resolve conflicting
   field warnings</a>, and how to <a href="#writing-a-sysinfo">write your own</a> sysinfo utility.</p>
<!--
   <p class="snugbot"><span class="new">The example sysinfo program is substantially updated for CPU2006 V1.2</span></p>
-->
   </td>

</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="table" ><a class="external" href="runspec.html#table"> <tt>table</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>1</tt></td>
   <td>In ASCII reports, include information about each execution of the benchmark.</td>
</tr>

<tr>
   <td id="teeout" > <tt>teeout</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>0</tt></td>
   <td>Run output through tee so you can see it on the screen.  Primarily affects builds, but also provides some
   information about progress of runtime, by showing you the <tt>specinvoke</tt> commands.</td>
</tr>

<tr>
   <td id="temp_meter" > <tt>temp_meter</tt> </td>
   <td><tt>H</tt></td>
   <td><tt>none</tt></td>
   <td>This provides a list of names associated with the temperature meters
   the tools will use to communicate with the SPEC power daemon.
   These names will then be used in the descriptive fields options which relate to describing the 
   temperature meters.
   </td>
</tr>

<tr>
   <td id="threads" > <tt>threads</tt> </td>
   <td><tt>H,N</tt></td>
   <td><tt>none</tt></td>
   <td>Sets the number of threads to be passed to the environment variable OMP_NUM_THREADS.
   </td>
</tr>

<tr>
   <td id="train_with" ><a class="external" href="runspec.html#train_with"> <tt>train_with</tt></a> </td> 
   <td><tt>H,N</tt></td>
   <td><tt>train</tt></td>
   <td><p class="snugtop">Select the workload with which to train binaries built using feedback-directed optimization.</p>

   <p>The ability to train with alternate workloads <!-- would not normally be applicable to CPU2006; the feature was added for the
   benefit of a different suite that uses the same toolset.  Nevertheless, it -->could be used, for example when studying the
   efficacy of different training methods, as follows: (1) First <a class="external"
   href="utility.html#convert_to_development">convert</a> your tree to a development tree; (2) place your new training workload
   under <span class="ttnobr">nnn.benchmark/data/myworkload</span>.  (3) Give it the same structure as the existing training
   workload: an <span class="ttnobr">input/</span> directory, an <span class="ttnobr">output/</span> directory, and a <span
   class="ttnobr">reftime</span> file with contents similar to the one found in <span
   class="ttnobr">nnn.benchmark/data/train/reftime</span>. </p> 

   <p class="snugbot">For <a href="#reportable">reportable</a> runs, you cannot use binaries that were trained with alternate workloads.</p>
<!--
   <p class="snugbot"> <span class="oldnews">(History: The train_with feature was added in SPEC CPU2006 V1.1.)</span> </p>
-->
   </td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;"> 
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="tune" ><a class="external" href="runspec.html#tune"> <tt>tune</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>base</tt></td>
   <td>default tuning level.  In a reportable run, must be either <tt><b>all</b></tt> or <tt><b>base</b></tt>.</td>
</tr>
    
<tr>
   <td id="use_submit_for_speed" > <tt>use_submit_for_speed</tt> </td>
   <td><tt>H,N</tt></td>
   <td><tt><!--0-->1</tt></td>
   <!--<td>If set, use submit commands for SPECspeed runs as well as SPECrate runs. </td> -->
   <td>Allow the use of submit commands for benchmark runs. </td> 
</tr>

<tr>
   <td id="verbose" ><a class="external" href="runspec.html#verbose"> <tt>verbose</tt></a> </td> 
   <td><tt>H</tt></td>
   <td><tt>5</tt></td>
   <td>Verbosity level.  Select level 1 through 99 to control how much debugging info <tt>runspec</tt> prints out.  For more
   information, see the section on the <a href="#sectionVIII.B">log file</a>, below.</td>
</tr>

<tr>
   <td id="version_url" > <tt>version_url</tt> </td>
   <td><tt>H</tt></td>
   <!-- <td><tt>http://<br />www.<br />spec.org/<br />omp2012/<br />current_<br />version</tt></td>-->
   <td><tt>{version}</tt></td>
   <td>If <a href="#check_version">version checking</a> is enabled, this specifies the location from which the version
   information should be fetched.
   The default name {version} is <tt>http://www.spec.org/omp2012/current_version</tt></td>
</tr>

<tr>
   <td id="voltage_range" > <tt>voltage_range</tt> </td> 
   <td><tt>H</tt></td>
   <td><tt>none</tt></td>
   <td>Set the maximum voltage in volts to be used by the power analyzer(s) for power measurement.
   </td>
</tr>



</table>


<h3 id="sectionII.C">II.C. <a name="sysinfo-detail"></a>About sysinfo</h3>

<p>A <a href="#sysinfo">sysinfo program</a> is an executable program or script that automatically fills out some of the
system description fields that are addressed to <a href="#sectionI.B.4">readers</a> of your results.  If you provide one, it
will be called by <span class="ttnobr">runspec</span> early during its execution.   </p>

<div style=" width: 80%; margin-left:10%; padding:.5em .5em .1em; border:thin solid #446688;" id="WhySysinfo"><p
class="snugtop"><b>Why sysinfo?</b>  </p>
<ol>
<li>The primary value of a sysinfo program is that it creates a <b>contemporaneous</b> record of the system under test.</li>
<li>The record is created under the control of the SPEC toolset.</li>
<li>Because system configuration information is automatically recorded, it is not subject to human transcription error.</li>
<li>Therefore, a sysinfo program can remove ambiguity such as "I remember that I upgraded the version of the
operating system, but I can't quite recall whether that was before or after I did the re-run of the SPECompG2012 test."</li>
</ol>
</div>

   <p class="snugbot">This section includes information about:</p> 
   <ul>
   <li><a href="#sysinfo-location">Where to find</a> the example sysinfo program</li>
   <li>How to <a href="#sysinfo-enable">turn it on or off</a></li>
   <li>How to <a href="#sysinfo-outputs">selectively enable output</a> types</li> 
   <li>How to <a href="#sysinfo-warnings">resolve conflicting field warnings</a></li> 
   <li>An <a href="#sysinfo-example-outputs">example</a> to clarify output types and destinations</li>
   <li>How to <a href="#writing-a-sysinfo">write your own</a> sysinfo utility.</li>
   </ul>



<h4 id="sectionII.C.1">II.C.1. The example sysinfo program</h4>

   <p><!-- <span class="new">New with CPU2006 V1.2,</span> -->SPEC is providing a greatly expanded example sysinfo program, with
   support for several operating systems, including Linux, Mac OS X, Microsoft Windows, and Solaris.   </p>

   <p><span style="border:thin solid red;margin:1em 5em;padding:8px;" class="alarm">Note that the example sysinfo program is
   enabled by default!</span></p> 

   <p>It is on by default because SPEC believes that the benefits listed in the box above, <a href="#WhySysinfo">Why
   sysinfo?</a>, outweigh its limitations.</p>

   <p>SPEC is aware that there are many dependencies and differences among hardware and software platforms, and that these
   change from time to time.   Thus its status as an "example": you may need to modify the example in order to use it on your
   system.</p>

  <p>If your operating system is not recognized, the utility will print "Sorry, (name of os) is not supported by (name of
  program)."</p>

<h5 id="sectionII.C.1.a">II.C.1.a. <a name="sysinfo-location"> </a>Location and updates</h5>

   <p>The example sysinfo utility is on your kit, as <span class="ttnobr">$SPEC/Docs/sysinfo</span> (Unix) or <span
   class="ttnobr">%SPEC%\Docs\sysinfo</span> (Windows).  </p>

   <p id="sysinfo-updates">It is possible that SPEC may update the example from time to time; if so, updates will be posted at <a
   class="external" href="http://www.spec.org/omp2012/Docs/sysinfo">http://www.spec.org/omp2012/Docs/sysinfo</a>.   <span
   style="font-size:90%;">(Note: the link goes to an executable file.  If your web browser objects to opening it, try saving it
   instead.)</span>  </p>  

   <p class="snugbot"><b>Version identification:</b> The example sysinfo program, as supplied by SPEC, includes a revision
   and date of update.  It generates its own md5sum when it is run.  If you are unsure whether the copy in your
   <tt>Docs/</tt> has been changed from SPEC's version:</p>
   <ol>
   <li>Make sure that <span class="ttnobr">$SPEC</span> (Unix) or <span class="ttnobr">%SPEC%</span> (Windows) is
   defined.</li> 
   <li>Download the latest from <a class="external"
   href="http://www.spec.org/omp2012/Docs/sysinfo">www.spec.org/omp2012/Docs/sysinfo</a>. </li>
   <li>Run it.</li>
   <li>Compare the md5sum to the copy in your <tt>Docs/</tt> directory.</li>
   </ol>

   <p>For example (on a system where <span class="ttnobr">curl(1)</span> is available to do the download):</p>

<pre>
$ <b>. ./shrc</b>
$ <b>mkdir update</b>
$ <b>cd update</b>
$ <b>curl -s -O http://www.spec.org/omp2012/Docs/sysinfo</b>
$ <b>chmod +x sysinfo</b>
$ <b>./sysinfo -p | grep Rev | tr $ " "</b>
#  Rev: 383    Date:: 2012-07-05 #  aa89b8fcf372a4a5b1ea1c40fe336477
$ <b>cd $SPEC/Docs</b>
$ <b>./sysinfo -p | grep Rev | tr $ " "</b>
#  Rev: 395    Date:: 2012-07-25 #  8f8c0fe9e19c658963a1e67685e50647
$ </pre>   

   <p>In the example above, the md5sum for the copy in the <tt>Docs</tt> directory is different than the copy freshly retrieved from
   SPEC's server.  The date also shows that the freshly retrieved copy is more recent.
   (Note: when you try this for yourself, feel free to skip the <tt>tr(1)</tt> command at the end.  It is
   there only to keep the dollar signs out of the above example text, which was deemed useful because otherwise SVN would
   automatically change the above example every time the document you are reading _now_ is checked in.)</p>

<h5 id="sectionII.C.1.b">II.C.1.b. Turning <a name="sysinfo-enable"> </a> the feature on or off </h5>
   <p><span id="UseSysinfo">To use the example sysinfo program,</span> add this line near the top of your config file (in the
   <a href="#header">header section</a>):</p>

   <p class="codeexample">sysinfo_program = specperl $[top]/Docs/sysinfo
   <br /> <span class="alarm" style="font-family:serif">(Note: this is the default behaviour)</span></p>

   <p>To turn it off, use:</p>

   <p class="codeexample">sysinfo_program = </p>

   <p><span class="alarm">Warning:</span> it is possible that, at a future time, SPEC may decide to <span class="u">require</span>
   use of a sysinfo utility for reportable results.  If that occurs, the online copy of this document at <a class="external"
   href="http://www.spec.org/omp2012/Docs/config.html#sysinfo">www.spec.org/omp2012/Docs/config.html</a> will be updated to so
   indicate.</p>  

<h5 id="sectionII.C.1.c">II.C.1.c. <a name="sysinfo-outputs"> </a>Output</h5>

<p>By default, there will be more information in your platform notes.   For example, by default Windows systems will include
lines such as these:</p>

<pre style="margin:2em;padding:8px;border:thin solid gray;width:600px;">
                             Platform Notes
                             --------------
  Sysinfo program C:\kit118/Docs/sysinfo
  $Rev: 506 $ $Date:: 2012-10-10 #$ \6d78399eddfd6b1e8813c4ae4a352725
  running on snowcrash Thu Aug 11 08:38:31 2011
 
  This section contains SUT (System Under Test) info as seen by
  some common utilities.  To remove or add to this section, see:
    http://www.spec.org/omp2012/Docs/config.html#sysinfo
 
  Trying 'systeminfo'
  OS Name       : Microsoft Windows 7 Professional
  OS Version    : 6.1.7601 Service Pack 1 Build 7601
  System Manufacturer: LENOVO
  System Model  : 2537LB8
  Processor(s)  : 1 Processor(s) Installed.
       [01]: Intel64 Family 6 Model 37 Stepping 5 GenuineIntel ~2400 Mhz
  BIOS Version  : LENOVO 6IET75WW (1.35 ), 2/1/2011
  Total Physical Memory: 3,892 MB
 
  Trying 'wmic cpu get /value'
  DeviceID      : CPU0
  L2CacheSize   : 256
  L3CacheSize   : 3072
  MaxClockSpeed : 2400
  Name          : Intel(R) Core(TM) i5 CPU M 520 @ 2.40GHz
  NumberOfCores : 2
  NumberOfLogicalProcessors: 4
 
  (End of data from sysinfo program)
</pre>

<p>Also by default, the example sysinfo program will try to parse the above information into system description fields,
such as:</p>

<pre>
hw_cpu_mhz         = 2400
hw_cpu_name        = Intel Core i5 M 520
hw_model           = 2537LB8
hw_nchips          = 1
sw_os000           = Microsoft Windows 7 Professional
sw_os001           = 6.1.7601 Service Pack 1 Build 7601
</pre>

   <p>The output is written to a <a href="#sectionI.C.3">section</a> named <tt>default:</tt> at the end of your config file.
   Therefore, by default, most of its output will be printed in all reports. </p> 

   <p id="sysinfo-edit"><b>Editing the output:</b>  The example sysinfo program does not replace the need for human
   intelligence.  Sysinfo creates <a href="#WhySysinfo">contemporaneous evidence</a>, and it may give you a start, but you
   will still have to understand your system, and you should examine its output carefully.  If you see incomplete or
   incorrect information, please observe the following guidelines:  </p> 

   <ul>
      <li><p><b>Please <span class="u">DO NOT</span> edit notes lines generated by sysinfo (such as notes_plat_sysinfo_100)</b></p>
      
      <p class="snugbot">Notes lines might be incorrect if, for example, a Linux utility changes its output format.  If such
      cases, sysinfo might be expecting an obsolete format and may produce incorrect notes.  <span class="alarm">In general,
      SPEC does not recommend editing <tt>notes_plat</tt> lines.</span>  Instead, if you see incorrect lines, please report
      the problem to SPEC; and do one of the following:</p>
         <ol>
         <li>Add an explanation below the sysinfo section.  For example: "<i>Note: although the above 'sysinfo' report shows
         4x CPU chips, the system as configured had effectively only 1 chip, because <tt>disable_smp</tt> was set in the
         BIOS.</i>"</li>
         <li>Or, use '<tt>-p</tt>', described below.</li>
         <li>Or, edit the rawfile to remove just the incorrect lines.</li>
         </ol></li>

      <li><p><b>Please <span class="u">DO</span> edit fields generated by sysinfo (such as <tt>hw_xxx</tt>)</b></p>  
      
      <p>System description fields are filled in by sysinfo using only the information that it can readily obtain from system
      utilities, which will often be incomplete or only partial.  Fields will typically need to be edited in the usual
      manner, as described in <a class="external" href="utility.html#rawformat">utility.html</a>.  </p>

   <p class="example">For example, suppose that sysinfo detects 63.84 GB of memory.  On seeing that, you realize, "My firmware ate
   a bit of memory prior to boot, and I really have 64 GB".  You then edit the <tt>hw_memory</tt> field to change it to to 64
   GB, and while you are there you add additional detail about DIMM types that was not visible to the utility, perhaps
   something like one of these:</p>
<pre>
   spec.omp2012.hw_memory: 64 GB (8 x 8 GB 2Rx4 PC3-10600R-9, ECC)
   spec.omp2012.hw_memory: 64 GB (16 x 4 GB 2Rx4 PC3L-10600R-9, ECC)
</pre>

   </li></ul>

   <p><b>Original output is archived:</b>  The original output of the sysinfo utility may be found by running <tt>rawformat</tt>
   with <a class="external" href="runspec.html#out">output format config </a>.  If the description has been edited, rawformat will
   output both <span class="ttnobr">.cfg</span> and <span class="ttnobr">.orig.cfg</span>.</p> 

   <p><b>Quieter output:</b>  If you prefer, you can send the output to config file <a href="#sectionI.C.1">comments</a>
   intead of reports, by adding one or both of these switches to the <a href="#UseSysinfo">above</a> sysinfo line:</p>

   <pre>
   -f   Write comments instead of fields (e.g, 'sw_os' becomes '# sw_os')
   -p   Write comments instead of platform notes</pre>

   <p><b>Comment destination:</b> Comments are written only to <a class="external" href="runspec.html#out">output format
   config</a>.  They do not appear in reports, and they are not written to the config file in your <span
   class="ttnobr">$SPEC/config</span> directory.  They are written to the copy in your <span class="ttnobr">$SPEC/result</span>
   directory.  This can make them easy to overlook, which is why the default is to write actual notes and fields, instead of
   writing only comments. See the <a href="#sectionII.C.1.e">example</a> below for more information about output destinations.
   </p> 


<h5 id="sectionII.C.1.d">II.C.1.d. Avoiding <a name="sysinfo-warnings"> </a>warnings about conflicting fields</h5>

<p>When the example sysinfo utility is run, you may see warnings such as this one:</p>
<pre>
WARNING: Your config file sets some fields that are also set by sysinfo:
  hw_cpu_name, sw_os
To avoid this warning in the future, see
    http://www.spec.org/omp2012/Docs/config.html#sysinfo
</pre>

<p>Any fields created by sysinfo (such as <tt>hw_cpu_name</tt>) are written to a <a href="#sectionI.C.3">section</a> named
<tt>default:</tt> at the end of your config file.  The warning means that you have already set one of the listed fields in
your <tt>default:</tt> section.  Because the sysinfo output comes at the end of your config file, its setting will override
the earlier config file settings, which may or may not be desirable.</p>

<p>To get rid of the warnings, you have four choices:</p>

<ol>
<li><p>You can remove the fields from your config file, and let the utility write them instead.  To find out exactly which
fields are written by the example sysinfo utility, search the <a href="#sectionII.C.1.a">source</a> for the
string:&nbsp; <span class="ttnobr">promisedfields</span></p></li>

<li><p>If you wish to allow the example sysinfo program to set some fields, while setting others yourself, remove the ones
that sysinfo is allowed to write, and move the others to a section that has a higher precedence than the <tt>default:</tt>
section.  For example:</p>
<pre>
gross=default=default=default:
hw_memory001 = 8 GB (2 x 4 GB 2Rx8 PC3-10600E-9, ECC, 
hw_memory002 = running at 1067 MHz and CL7)
</pre>

<p>Notice in the above example that the first <a href="#sectionI.C.3.a">section marker</a> is <span
class="ttnobr">int,fp</span>, which is higher priority than <tt>default</tt>.  The effect will be to always silently apply
the listed <tt>hw_memory001</tt> and <tt>hw_memory002</tt>, since all benchmarks are either integer or floating point.</p>

</li>

<li><p>If you wish to remove all the fields from the sysinfo output, you can use the <tt>-f</tt> switch, like so:</p>
<div class="codeexample">sysinfo_program = specperl $[top]/Docs/sysinfo -f</div></li>

<li><p>You can <a href="#sectionII.C.2">write your own</a> sysinfo program, or you can modify the supplied example.   <span
class="alarm">Note:</span> if you do so, you should retain a copy of the exact modified program together with your
results.</p>
</li>

</ol>



<h5 id="sectionII.C.1.e">II.C.1.e. Example: <a name="sysinfo-example-outputs"> </a>where does the example sysinfo program
send its output?</h5>
   
   <p class="l1">An example may help to clarify which files get which output.  On this system, <span
   class="ttnobr">$SPEC/config/dave.cfg</span> runs the 350.md test workload once, with text and config outputs:</p>

<pre>
   $ <b>cat dave.cfg</b>
   runlist         = 350.md
   size            = test
   iterations      = 1
   sysinfo_program = specperl $[top]/Docs/sysinfo 
   ext             = 0406
   output_format   = text,config

   default=default:
   CC              = /usr/bin/gcc 
   OPTIMIZE        = -O2 
   PORTABILITY     = -DSPEC_LP64
   $
</pre>

   <p class="l1">A second config file differs only in that it adds the <tt>-p</tt> switch.  </p>

<pre>
   $ <b>diff dave.cfg radish.cfg</b>
   4c4
   &lt; sysinfo_program = specperl $[top]/Docs/sysinfo 
   ---
   &gt; sysinfo_program = specperl $[top]/Docs/sysinfo -p
   $
</pre>

   <p class="l1">Both config files are used, creating output file sets 20 and 21:</p>

<pre>
   $ <b>for f in dave radish</b>
   &gt; <b>do</b>
   &gt;     <b>runspec -c $f | grep test.txt</b>
   &gt; <b>done</b>
       format: ASCII -&gt; /home/dave/omp2012/result/OMPG2012.020.test.txt
       format: ASCII -&gt; /home/dave/omp2012/result/OMPG2012.021.test.txt
</pre>

   <p class="l1">On this Linux system, a line from <span class="ttnobr">/proc/meminfo</span> about huge pages appears in
   several output files for run #20, but it is only a config file comment for run #21.</p>

<pre>
   $ <b>go result</b>
   /home/dave/omp2012/result
   $ <b>grep Hugep OMPG2012.020.test*</b>
   OMPG2012.020.test.cfg:notes_plat_sysinfo_110 = Hugepagesize:     2048 kB
   OMPG2012.020.test.rsf:spec.omp2012.notes_plat_sysinfo_110:  Hugepagesize:     2048 kB
   OMPG2012.020.test.txt:     Hugepagesize:     2048 kB
   $
   $ <b>grep Hugep OMPG2012.021.test*</b>
   OMPG2012.021.test.cfg:# Hugepagesize:     2048 kB
   $ 
</pre>

<h4 id="sectionII.C.2">II.C.2. <a name="writing-a-sysinfo"> </a>Writing your own sysinfo program</h4>

   <p class="l1">Of course, you are not limited to using the pre-supplied sysinfo program from the <tt>Docs/</tt> directory.
   You can write your own, by following these rules:</p>

   <ol class="l1">
   <li>The sysinfo program can be any executable program or script.  It does not have to be a Perl script. </li>
   <li>If you do want to write a Perl script, you can count on specperl being on the path (as in the example above). </li>
   <li>The sysinfo program is run prior to most other config file processing.  This means that most variables of the form
   <span class="ttnobr">$[var]</span> and <span class="ttnobr">${var}</span>  will not work</li>
   <li>You <i>can</i> use <span class="ttnobr">$[top]</span> to find the top of your SPEC OMP2012 tree.  </li>
   <li>The program should output lines of the form:
   
<pre>
name = value </pre>
   </li>

   <li>The lines should be output to standard output.  </li>

   <li>Only informational fields (hw_*, sw_*, notes*, test_sponsor, machine_name, license_num, tester, prepared_by) may be set;
   these settings will be inserted into the 'default=default=default=default' section, and will not be able to override any
   per-benchmark settings.</li>

   <li>Illegal lines will be silently discarded.  </li>

   <li>Standard config file comments are also allowed.</li>
   <li>Because the line checking is fairly simple-minded, some config file features such as line continuation, block quotes, and
   line appending are not available.</li>

   <li>The output from the sysinfo program will be included in the final config as if it had been part of the original config
   file.</li>

   <li>Arguments can be given to the command if necessary.  </li>

   <li>If the sysinfo_program fails to generate any output, the tools will write a warning to the log file.  Errors and
   warning messages from your program might not be captured to the log.</li>
   </ol>




<h2 id="sectionIII">III. Config file options for specmake</h2>

<p>For a complete list of options that are used by <tt>specmake</tt>, please see <a class="external"
href="makevars.html">makevars.html</a> and notice which variables are documented as OK to mention in a config file.</p> 

<p>Here are the commonly used variables:</p>


<table> 

<tr>
   <td id="compiler" > <tt>CC</tt> </td>
   <td>How to invoke your C compiler.</td>
</tr>
<tr>
   <td><tt>CXX</tt></td>
   <td>How to invoke your C++ compiler.</td>
</tr>
<tr>
   <td><tt>FC</tt></td>
   <td>How to invoke your Fortran compiler. <!-- <br /> <span class="oldnews">(History: Prior to SPEC CPU2006 V1.0, there were
   options for Fortran 77.  If you wish to use a Fortran 77 compiler for a benchmark in peak, set FC for that benchmark, not
   F77.)</span> --></td>
</tr>

<tr>
   <td>&nbsp;</td>
   <td>&nbsp;</td>
</tr>

<tr>
   <td id="ld" > <tt>CLD</tt> </td>
   <td>How to invoke the linker when compiling C programs.</td>
</tr>
<tr>
   <td><tt>CXXLD</tt></td>
   <td>How to invoke the linker when compiling C++ programs.</td>
</tr>
<tr>
   <td><tt>FLD</tt></td>
   <td>How to invoke the linker when compiling Fortran programs.</td>
</tr>

<tr>
   <td>&nbsp;</td>
   <td>&nbsp;</td>
</tr>

<tr>
   <td id="onestep" > <tt>ONESTEP</tt> </td>
   <td>If set, build from sources directly to final binary.  See the discussion in rule 2.3.7 of <a class="external"
   href="runrules.html#section2.3.7">runrules.html</a>. </td> 
</tr>

<tr>
   <td>&nbsp;</td>
   <td>&nbsp;</td>
</tr>

<tr>
   <td id="optimize" > <tt>OPTIMIZE</tt> </td>
   <td>Optimization flags to be applied for all compilers.</td>
</tr>
<tr>
<td><tt>COPTIMIZE</tt></td>
<td>Optimization flags to be applied when using your C compiler.</td>
</tr>

<tr>
<td><tt>CXXOPTIMIZE</tt></td>
<td>Optimization flags to be applied when using your C++ compiler.</td>
</tr>

<tr>
<td><tt>FOPTIMIZE</tt></td>
<td>Optimization flags to be applied when using your Fortran compiler.</td>
</tr>

<tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
</tr>

<tr>
   <td id="portability" > <tt>PORTABILITY</tt> </td>
   <td>Portability flags to be applied no matter what the compiler.</td>
</tr>
<tr>
   <td><tt>CPORTABILITY</tt></td>
   <td>Portability flags to be applied when using your C compiler.</td>
</tr>
<tr>
   <td><tt>CXXPORTABILITY</tt></td>
   <td>Portability flags to be applied when using your C++ compiler.</td>
</tr>
<tr>
   <td><tt>FPORTABILITY</tt></td>
   <td>Portability flags to be applied when using your Fortran compiler.</td>
</tr>
<tr>
   <td><tt>FPPPORTABILITY</tt></td>
   <td>Portability flags to be applied when pre-processing Fortran sources.  Note that since preprocessing is not a part of
   standard Fortran, SPEC supplies a copy of the freely available <tt>filepp</tt>, with minor modifications, as
   <tt>specpp</tt>.  Using <tt>specpp</tt> ensures that the preprocessing is done consistently across platforms.  If you need
   to define Fortran preprocessor variables, do not put them in <tt>FPORTABILITY</tt>. Instead, put them in
   <tt>FPPPORTABILITY</tt> or <tt>PORTABILITY</tt>.</td>
</tr>

<tr>
   <td>&nbsp;</td>
   <td>&nbsp;</td>
</tr>

<tr>
   <td id="rm_sources" > <tt>RM_SOURCES</tt> </td>
   <td>Remove a source file.  Should only be used for library substitutions that comply with <a class="external"
   href="runrules.html#section2.2.2">run rule 2.2.2</a>.</td> 
</tr>

<tr>
   <td>&nbsp;</td>
   <td>&nbsp;</td>
</tr>

<tr>
   <td id="pass" > <tt>PASSn_CFLAGS</tt> </td>
   <td>Flags for pass "n" C compilation when using feedback-directed optimization (FDO).  Typically n is either 1 or 2, for
   the compile done before the training run and the compile done after the training run.  See the chapter on <a
   href="#sectionVI">Using Feedback Directed Optimization</a> for more information.</td>
</tr>
<tr>
   <td><tt>PASSn_CXXFLAGS</tt></td>
   <td>Flags for pass "n" C++ compilation when using FDO.</td>
</tr>
<tr>
   <td><tt>PASSn_FFLAGS</tt></td>
   <td>Flags for pass "n" Fortran compilation when using FDO.</td>
</tr>
<tr>
   <td><tt>PASSn_LDFLAGS</tt></td>
   <td>Flags to use with the linker in pass "n" when using FDO.</td>
</tr>
</table>

<p>Note that you can also make up your own variable names, which <tt>specmake</tt> will use (and perform substitution on). For an
example of this feature, see the example file 
$(SPEC)/config/example-advanced.cfg. 
Search that file
for LIBS, and note the long comment which provides a walk-through of a complex substitution handled by <tt>specmake</tt>. 
</p> 


<h3 id="plusequals">The syntax "+=" is available (but should be used with caution)</h3>

<p><!--<span class="new">New with CPU2006 V1.2</span>, -->The syntax "<tt>+=</tt>" is available to add to <tt>specmake</tt>
options.</p>

<p>This option is available as a convenience to provide more flexible setting of options.</p>

<p>For example, consider this config file:</p>
<pre>
$ <b>cat tmp.cfg</b>
runlist = 372.smithwa

default:
OPTIMIZE       = -O1

gross=default:
OPTIMIZE       += -unroll

default=peak:
OPTIMIZE       += -outer-unroll

372.smithwa=peak:
OPTIMIZE       += -inner-unroll
</pre>

<p>Notice how options accumulate based on the section specifiers above, and that the accumulation varies (as expected)
depending on whether base or peak tuning is chosen:</p>

<pre>
   $ <b>runspec --config=tmp --tune=base --fake | grep genScalData.c</b>
   cc -c -o genScalData.o -DSPEC -DSPEC_OMP -DNDEBUG   -O1 -unroll   genScalData.c
   $ <b>runspec --config=tmp --tune=peak --fake | grep genScalData.c</b>
   cc -c -o genScalData.o -DSPEC -DSPEC_OMP -DNDEBUG   -O1 -outer-unroll -unroll   
   -inner-unroll genScalData.c
   $ 
</pre>

<p><span class="alarm">Caution:</span> although the option add to syntax flexibility when writing config files, that very
flexibility may be a disadvantage.  A config file that uses "<tt>+=</tt>" has the potential to introduce unwanted user surprises. 
Its effect will vary depending on precedence of section specifiers, as shown above; it will also vary depending on the order of
your config file, and (if you mix and match features), there are glorious opportunities to surprise yourself by mixing <tt>+=</tt>
with macros, include files, and variable substititution.  Don't do that.  Keep it simple.  Create conventions for your config
files, <span class="u">write them down, in config file comments</span>, and review the output (remember, <a class="external"
href="runspec.html#fake">--fake is your friend</a>).  Use the feature with caution, and drive responsibly.</p> 

<h3 id="about.auto.rebuilds">About Automatic Rebuilds</h3>

<!--
<p><span class="oldnews">(History: changed in SPEC CPU2006 V1.1)</span>  </p>
-->

<p><!-- Since the release of SPEC CPU2000, t-->The SPEC CPU toolset has attempted to keep config files and binaries in synch with each
other (unless you have set <a href="#check_md5">check_md5=0</a>, which is not recommended).  This generally means that edits
to your config file have often resulted in the binaries being rebuilt, sometimes to the dismay of testers who found that
rebuilds were attempted at inconvenient times.   The inconvenience was compounded by the fact that the first step in a
rebuild is to delete the old binary, so even a very fast interrupt of the run wouldn't help: once the rebuild would start,
your binary was gone.</p>

<!--
<p>As of SPEC CPU2006 V1.1, unexpected rebuilds have been reduced.</p>

<p>In SPEC CPU2006 V1.0, the tools were much more likely to trigger a rebuild of the benchmark binaries than they are in
later versions, because unrecognized options (e.g. a mis-spelled <tt>CXXOPTIMZIE</tt>, or a user-defined option such as
<tt>MY_OPTS</tt>) would be passed to <a class="external" href="utility.html#specmake">specmake</a>, and the tools had no way
to know what <tt>specmake</tt> did with such options.  Since SPEC CPU2006 V1.1, the tools record only the options actually
<span class="u">used</span> by <tt>specmake</tt>, plus the options that are sent to the shell (e.g. via <a
href="#fdo_pre0">fdo_pre0</a>), described in the next section). With this more careful recording, config file changes are
less likely to trigger rebuilds, unless they actually affect the generated binary.</p> 
-->

<p>The tools do <span class="u">not</span> promise to entirely eliminate unexpected rebuilds.  Occasionally, they may make
assumptions that seem conservative about config file options that might affect the generated binary.  In particular:
</p>
<ul>
   <li><a href="#fdo_pre0">fdo_*</a>: Changing fdo options typically will cause rebuilds - as they should, since, as
   described below, they affect how the build is done.</li>
   <li><a href="#makeflags">makeflags</a>: If you change makeflags to adjust the number of CPUs applied at build time,
   typically this will not cause a rebuild.  </li>
   <li><span class="ttnobr">makeflags + fdo_make_passN:</span> there is a corner case involving the combination of these
   options.   Consider a config file that sets both.  You make a change to <tt>makeflags</tt>, but you do NOT change the
   <tt>fdo_make_passN</tt> options.  Nevertheless, sometimes, a rebuild may occur.  This is a limitation of the tools and its
   algorithm for recording config file options that affect binaries. </li>
</ul> 

<p><b>Testing option sensitivity:</b> If you would like to test whether a config file option change might cause a rebuild,
without actually DOING the rebuild, here is a recommended procedure:</p>
<ol>
    <li>copy the config file to a test version (let's call it: <tt>mytest.cfg</tt>)</li>
    <li>make the edits in the <tt>mytest.cfg</tt></li>
    <li>make sure that <tt>mytest.cfg</tt> does NOT change the default for <a href="#check_md5">check_md5</a></li>
    <li>enter this command: <span class="ttnobr">runspec --config mytest --size test --iterations 1 --noignore_errors
    --nobuild ...</span></li>
</ol>

<p>In the above command:</p>
<ul>
<li>The <a class="external" href="runspec.html#size">--size test</a> runs the short workload, so the run will complete quickly. 
</li> 
<li>We run only one <a class="external" href="runspec.html#iterations">iteration</a>.</li> 
<li>Saying <a class="external" href="runspec.html#ignore_errors">--noignore_errors</a> will cause an exit on the first error.</li> 
<li>And, most importantly, the <a class="external" href="runspec.html#nobuild">--nobuild</a> prevents a rebuild.  Using this
option will cause the tools to complain and exit if they think the binary is out of date, but they will not attempt to actually do
the rebuild, and, in particular, your existing binary will not be deleted.</li> 
</ul>

<h2 id="sectionIV">IV. Config file options for the shell</h2>

<p>Some options in your config file cause commands to be executed by your shell (<tt>/bin/sh</tt>) or by the Windows command
interpreter (<tt>cmd.exe</tt>).</p>

<p style="background:#fff28a; font-size:115%; margin: 1em 30% 1em 15%; padding:1em; border:thin solid black;"> Because
<tt>runspec</tt> can cause arbitrary commands to be executed, <span class="alarm"> it is therefore important to read a config
file you are given before using it.</span></p>

<h3 id="sectionIV.A">IV.A. Options</h3>

<p>These are the options that cause commands to be executed:</p>

<table> 
<tr>
   <td id="bench_post_setup" > <tt>bench_post_setup</tt> </td>
   <td><p class="snugtop">Command to be executed after each benchmark's run directory setup phase.  The 
<!-- <a class="external"
   href="runrules.html#rule_3.2.5">-->run rules<!--</a>--> say that this feature may be used to cause data to be written to stable storage
   (e.g. <tt>sync</tt>).  The command must be the same for all benchmarks.  It will be run after each benchmark is setup, and for
   all workloads (test/train/ref)<!--, irrespective of the setting of <a href="#parallel_test">parallel_test</a>-->.</p> 

   <p class="snugbot">The <span class="ttnobr">bench_post_setup</span> option may appear only in the <a href="#sectionI.C.2">header
   section</a>.</p>
<!--
   <p class="snugbot"><span class="oldnews">(History: The bench_post_setup option was added in SPEC CPU2006
   V1.1.)</span></p>--></td>
</tr>

<tr>
   <td id="fdo_pre0" > <tt>fdo_pre0</tt> </td>
   <td>Commands to be executed before starting a feedback directed compilation series. </td>
</tr>

<tr>
   <td id="fdo_preN" > <tt>fdo_preN</tt> </td>
   <td>Commands to be executed before pass N.</td>
</tr>

<tr>
   <td id="fdo_make_cleanN" > <tt>fdo_make_cleanN</tt> </td>
   <td>Commands to be executed for cleanup at pass N.</td>
</tr>

<tr>
   <td id="fdo_pre_makeN" > <tt>fdo_pre_makeN</tt> </td>
   <td>Commands to be done prior to Nth compile.</td>
</tr>

<tr>
   <td id="fdo_make_passN" > <tt>fdo_make_passN</tt> </td>
   <td>Commands to actually do the Nth compile.  </td>
</tr>

<tr>
   <td id="fdo_post_makeN" > <tt>fdo_post_makeN</tt> </td>
   <td>Commands to be done after the Nth compile.</td>
</tr>

<tr>
   <td id="fdo_runN" > <tt>fdo_runN</tt> </td>
   <td>Commands to be used for Nth training run.</td>
</tr>

<tr>
   <td id="fdo_postN" > <tt>fdo_postN</tt> </td>
   <td>Commands to be done at the end of pass N.</td>
</tr>

<tr>
   <td id="post_setup" > <tt>post_setup</tt> </td>
   <td><p class="snugtop">Command to be executed after all benchmark run directories have been set up.  The <!--<a class="external"
   href="runrules.html#rule_3.2.5">-->run rules<!--</a>--> say that this feature may be used to cause data to be written to stable storage
   (e.g. <tt>sync</tt>).</p>  

   <p class="snugbot">Notes: </p>

   <ol style="margin-top:.2em;">

   <li><p style="margin-top:.2em;">This option may only be specified in the <a href="#sectionI.C.2">header
   section</a>.</p></li>

   <li><p>The <span class="ttnobr">post_setup</span> option is not executed if <a
   href="#minimize_rundirs">minimize_rundirs</a> is set.  </p></li>

<!--
   <li><p>If you pick <span class="ttnobr">all</span> for your <a href="#runlist">runlist</a>, <span
   class="ttnobr">post_setup</span> is not executed separately for int and fp; it is executed only for the whole set of
   benchmarks.  See the discussion of <a class="external" href="runspec.html#runorderall">run lists</a> in runspec.html. </p></li>    
-->
   
<!--
   <li><p>If <a href="#parallel_test">parallel_test</a> is greater than 1, <span class="ttnobr">post_setup</span> is not
   executed for test and train.  </p></li>-->

   </ol> 

   <p><b>Example 1:</b> In a reportable run of <span class="ttnobr">all</span> with <span class="ttnobr">parallel_test</span>
   set to 1, you will get three instances of <span class="ttnobr">post_setup</span> (see note 3 above).</p>

   <p class="snugbot"><b>Example 2:</b> In a reportable run of <span class="ttnobr">all</span> with <span class="ttnobr">parallel_test</span>
   set to &gt;1, you will get one instance of <span class="ttnobr">post_setup</span> (see notes 3 and 4 above).</p>
<!--
   <p class="snugbot"><span class="oldnews">(History: The post_setup option was added in SPEC CPU2006 V1.1)</span></p>
  --> 
   </td>
</tr>

<tr>
   <td id="submit"> <tt>submit</tt> </td>
   <td>Commands to be used to distribute jobs across a multiprocessor system, as described <a href="#submit">below</a> in the
   section on <a href="#sectionIV.C">Using Submit</a> 
</td>

</tr>
</table>

<h3 id="sectionIV.B">IV.B. <a name="fdo.intro"></a>Using and Changing fdo Options</h3>

<p>Many examples of using the <tt>fdo_</tt> options are provided in the chapter on <a href="#sectionVI">Using Feedback
Directed Optimization</a>.  A few introductory remarks are appropriate here:</p>

<p>Before setting an <tt>fdo</tt> option, you will want to observe the defaults, and of course your changes will have to
comply with the run rules.  </p>

<p id="fdodefault"><b>About fdo Defaults:</b> To see the defaults for the various fdo commands, use the 
<a class="external"
href="runspec.html#fake">--fake</a> switch.  For example:</p> 
<pre>
$ <b>cat &gt; test.cfg</b>
OPTIMIZE = -O2
PASS1_CFLAGS = -feedback:collect
PASS2_CFLAGS = -feedback:apply
$
$ <b>runspec --action build --fake -c test -T peak 372</b>
...
specmake -n --always-make build FDO=PASS2 2&gt; fdo_make_pass2.err | tee fdo_make_pass2.out

%% Fake commands from fdo_make_pass2 (specmake -n --always-make build FDO=PASS...):
cc -c -o genScalData.o -DSPEC -DSPEC_OMP -DNDEBUG  -feedback:apply -O2     genScalData.c
cc -c -o verifyData.o -DSPEC -DSPEC_OMP -DNDEBUG   -feedback:apply -O2     verifyData.c
...
</pre>
<p>In this example, we see that by default <span class="ttnobr">fdo_make_pass2</span> causes <a class="external"
href="utility.html#specmake">specmake</a> to be invoked with <span class="ttnobr">--always-make build FDO=PASS2</span>, which
causes various <span class="ttnobr">cc</span> compiler commands to be generated.</p> 

<p><b>About changes to fdo options:</b> You are allowed to modify the commands that are generated in order to support various
compilation models. <a href="#cleanmodify">An example</a> is provided in the chapter on Using Feedback-Directed Optimization. Of
course, your modifications must comply with the run rules: for example, you could not use an <span class="ttnobr">fdo</span> hook
to get around the 
<a class="external" href="runrules.html#section2.2.1">prohibition on mentioning names</a>.  If you are in doubt
whether a change to an <span class="ttnobr">fdo</span> hook is legal, <a class="external" href="techsupport.html">please write to
SPEC</a>. </p> 

<h3 id="sectionIV.C">IV.C. <a name="submit"></a> Using submit</h3>

<!--
<p>The config file feature <span class="ttnobr">submit</span> allows you to enter commands that will distribute jobs across a
multiprocessor system.</p>
-->
<p>The config file feature <span class="ttnobr">submit</span> allows you to enter commands that will be run in conjuction
with the benchmark commands.  This capability is very useful for the SPEC CPU2006 rate benchmarks as well as SPEC MPI2007
benchmarks.  See those benchmarks for further examples of how it may be used.  The following
description will discuss items beyond the needs of SPEC OMP2012.
</p>

<h4 id="sectionIV.C.1">IV.C.1 Basic Usage</h4>

<p>Normally <span class="ttnobr">submit</span> is used with the config file variable <a href="#command">$command</a> plus
your operating system's facilities that assign jobs to processors, such as <span class="ttnobr">dplace</span>, <span
class="ttnobr">pbind</span>, <span class="ttnobr">procbind</span>, <span class="ttnobr">prun</span>, <span
class="ttnobr">start/affinity</span>, or <span class="ttnobr">taskset</span>.  </p>

<p>Consider the following SPEC CPU2006 example. 
This config file runs 2 copies of 401.bzip2 in SPECrate mode, assigning them to processors with the Linux
<span class="ttnobr">taskset</span> command:</p>

<pre>
$ <b>cat tmp.cfg</b>
copies   = 2
runlist  = 401.bzip2
rate     = 1
submit   = taskset -c $SPECCOPYNUM $command

default=base:
OPTIMIZE = -O2
$ <b>runspec --config tmp </b>
</pre>

<p>In the example above, <span class="ttnobr">$SPECCOPYNUM</span> acquires the values 0 and 1, causing processors 0 and 1
to be assigned the work of the 401.bzip2 commands.</p>

<h4 id="sectionIV.C.2">IV.C.2 Useful features related to submit </h4>

<p>The following applies to SPEC CPU2006.  It is provided for more information about <span class="ttnobr">submit</span>.</p>

<p>Optionally, you may also wish to use the SPEC tool features <!--<a href="#bind">-->bind<!--</a>-->, <!--<a
href="#command_add_redirect">-->command_add_redirect<!--</a>-->, and/or <!--<a href="#SPECCOPYNUM">-->$SPECCOPYNUM<!--</a>-->.  To see how <span
class="ttnobr">submit</span> fits in with these tools features, please see the <!--&nbsp;&nbsp;--> <a
href="#sectionI.D.1.d"><!--several</a> &nbsp;&nbsp; <a href="#sectionI.D.1.e">detailed</a> &nbsp;&nbsp; <a
href="#sectionI.D.2.b">-->example<!--s--></a> <!--&nbsp;&nbsp;--> in the section on <a href="#sectionI.D" >Variable Substitution</a>, above.
</p>

       <p style="margin:.8em 25% .8em 10%; padding:.1em .2em; border:thin solid gray;"><i>You might also want to search published
       results at <a class="external" href="http://www.spec.org/cpu2006/">www.spec.org/cpu2006</a> for systems that are similar to
       your system.  If you see SPECrate runs for such systems, the config files associated with them may have examples that
       combine the features in ways that are useful on your architecture. </i></p> 

<h4 id="sectionIV.C.3">IV.C.3 <a name="submitcontinuation"></a>Continuation of Submit Lines</h4>

<p>The following example is again taken from SPEC CPU2006.  
It is provided for more information about <span class="ttnobr">submit</span>.</p>

<p class="snugbot">Continuation of multiple <span class="ttnobr">submit</span> lines is supported, using <a
href="#continuation">continuation rules</a> similar to other fields.  </p>

<p>Here is an example from a Solaris system:</p>

<pre id="submit3line">
$ <b>cat tmp.cfg</b>
rate        = 1               # In SPECrate mode,
copies      = 2               # run 2 copies of
runlist     = 410.bwaves      # 410.bwaves, using 
size        = test            # the small "test" worklad.
iterations  = 1               # Just run it once.

command_add_redirect = 1      # Include redir. ops in $command

submit0 = echo 'pbind -b $SPECCOPYNUM \$\$ &gt;&gt; pbind.out' &gt; dobmk
submit2 = echo "$command" &gt;&gt; dobmk
submit4 = sh dobmk

default=base:
OPTIMIZE = -O
$ <b>runspec -c tmp2</b>
</pre>

<p class="snugbot">As noted in the comments, the above example runs 2 copies of 410.bwaves with the "test" workload.  On
Solaris, processors are assigned work using the <span class="ttnobr">pbind</span> command.  The line with <span
class="ttnobr">submit0</span> causes a small file, <span class="ttnobr">dobmk</span>, to be created with the result of:</p>

<pre> echo 'pbind -b $SPECCOPYNUM \$\$ &gt;&gt; pbind.out'</pre> 

<p class="snug">That is, assign the current process to the processor whose number matches the current SPECCOPYNUM, and
send the output of the <span class="ttnobr">pbind</span> command to file <span class="ttnobr">pbind.out</span>.
The line with <span class="ttnobr">submit2</span> adds to <span class="ttnobr">dobmk</span> the actual command that
runs the benchmark, including any needed IO redirection (because <span class="ttnobr">command_add_redirect</span> is set).
Finally, the line with <span class="ttnobr">submit4</span> actually runs the benchmark.  </p>

<!--
<p><span class="oldnews">(History: The feature to allow continuation of submit lines was added in SPEC CPU2006
V1.1.)</span></p>
-->
<div id="sidebar.quoting" style="margin-left:2em;background:#ececec;">
<h5>Sidebar: About Quoting and Submit</h5>

<p class="snugbot">The above example uses all three common Unix types of quoting: backslashes, single quotes, and double
quotes.  </p>
<pre>
submit0 = echo 'pbind -b $SPECCOPYNUM \$\$ &gt;&gt; pbind.out' &gt; dobmk
submit2 = echo "$command" &gt;&gt; dobmk
submit4 = sh dobmk
</pre>
<p class="snugtop">The details of the quoting may be more than you want to know, but if you develop or maintain <span
class="ttnobr">submit</span> options, you may want to carefully consider these types of quoting.</p>

<p>(1)&nbsp;The designator for the current process is quoted using backslashes <span class="ttnobr">\$\$</span> to prevent <span
class="ttnobr">runspec</span> from trying to interpret it.  We <span class="u">do</span> want <span class="ttnobr">runspec</span>
to interpret <span class="ttnobr">$SPECCOPYNUM</span>, and it does so.   Let's look at the lines that <a class="external"
href="utility.html#specinvoke">specinvoke</a> actually runs: <i>[excerpted, white space adjusted, line wraps added]</i>:</p> 
<pre>$ <b>go bwaves run</b>
/export/home/kit107/benchspec/CPU2006/410.bwaves/run
$ <b>cd run_base_test*0</b>
$ <b>specinvoke -nr</b>
# Starting run for copy #0
echo 'pbind -b 0 $$ &gt;&gt; pbind.out' &gt; dobmk;
echo "../run_base_test_none.0000/bwaves_base.none 2&gt;&gt; bwaves.err" &gt;&gt; dobmk;
sh dobmk

# Starting run for copy #1
echo 'pbind -b 1 $$ &gt;&gt; pbind.out' &gt; dobmk;
echo "../run_base_test_none.0000/bwaves_base.none 2&gt;&gt; bwaves.err" &gt;&gt; dobmk;
sh dobmk
$ 
</pre>
<p class="snugtop">Notice above that <span class="ttnobr">$SPECCOPYNUM</span> has become <span class="ttnobr">0</span> and
<span class="ttnobr">1</span>, but <span class="ttnobr">$$</span> remains unchanged by the SPEC tools. </p> 

<p class="snugbot">(2)&nbsp;The second type of quoting is the set of single quotes that surround the phrase that is written
to <span class="ttnobr">dobmk</span></p>

<pre>echo 'pbind -b 0 $$ &gt;&gt; pbind.out' &gt; dobmk</pre>

<p class="snugbot">With single quotes, interpretation of <span class="ttnobr">$$</span> is delayed until <span
class="ttnobr">dobmk</span> itself is running: <span class="ttnobr">dobmk</span> gets bound to a processor, and so does its
child a moment later:</p>
<pre style="margin-top:.1em;">../run_base_test_none.0000/bwaves_base.none 2&gt;&gt; bwaves.err</pre>

<div style="background:lightblue;color:black;margin:.3em 6em;padding:.2em 1em;">
<p><b>Sidebar to the sidebar:</b> If we use double quotes instead of single quotes here, an interesting bug happens.  In that
case, <span class="ttnobr">$$</span> gets interpreted by the parent shell and the parent pid is inserted.  A little later,
<span class="ttnobr">dobmk</span> runs, and obediently binds its parent to a processor.  It does not bind <span
class="u">itself</span>, though, and that causes a problem.  (<i>"Wait, wait"</i>, you say, <i>"Bindings are inherited, so
binding the parent should be fine, right?"</i>  Well, no.  Bindings are inherited only for newly created processes.  Binding
your parent doesn't do a thing for yourself.  So, you definitely want the <span class="ttnobr">$$</span> to be <span
class="ttnobr">dobmk</span>'s PID, not its parent's.)</p>
</div>

<p>(3)&nbsp;Lastly, double quotes surround <span class="ttnobr">$command</span> in the line</p>
<pre>submit2 = echo "$command" &gt;&gt; dobmk</pre>  
<p>For this case, single or double would have been fine.  The <span class="ttnobr">$command</span> variable gets interpreted
by the SPEC tools, and after that, there's no further interpretation needed.</p>

<p>Here are the contents of the <span class="ttnobr">dobmk</span> files by the time all is done:</p>

<pre>$ <b>go bwaves run</b>
/export/home/kit107/benchspec/CPU2006/410.bwaves/run
$ <b>cat run_base_test*0/dobmk</b>
pbind -b 0 $$ &gt;&gt; pbind.out
../run_base_test_none.0000/bwaves_base.none 2&gt;&gt; bwaves.err
$ <b>cat run_base_test*1/dobmk</b>
pbind -b 1 $$ &gt;&gt; pbind.out
../run_base_test_none.0000/bwaves_base.none 2&gt;&gt; bwaves.err
$ 
</pre>

<p><b>Hints:</b> When debugging <span class="ttnobr">submit</span> options, increase the log <a href="#verbose">verbosity</a>
level.  Capture standard output from your binding command -- <span class="ttnobr">pbind.out</span>
in this example.  </p>

<p>It would also be a very good idea to capture standard error.  The <tt>submit0</tt> line above could be improved:</p>
<pre>$ <b>diff tmp.cfg better.cfg</b>
9c9
&lt; submit0 = echo 'pbind -b $SPECCOPYNUM \$\$ &gt;&gt; pbind.out' &gt; dobmk
---
&gt; submit0 = echo 'pbind -b $SPECCOPYNUM \$\$ &gt;&gt; pbind.out 2&gt;&gt; pbind.err' &gt; dobmk
$
</pre>

<p>Use the command that allows you to query results of binding - e.g. <span class="ttnobr">pbind -q</span> on
Solaris <i>[excerpted, white space adjusted]</i>:</p>

<pre>
$ <b>pbind -q</b>
process id 23025: 0
process id 23029: 1
process id 23026: 1
process id 23030: 0
$ <b>ps -ef | grep -e dobmk -e bwav</b>
john 23025  0:00 sh dobmk
john 23029  0:12 ../run_base_test_none.0000/bwaves_base.none
john 23026  0:00 sh dobmk
john 23030  0:12 ../run_base_test_none.0000/bwaves_base.none
</pre>
</div>


<h4 id="sectionIV.C.4">IV.C.4 <a name="submitnotes"></a> Reporting of submit usage</h4>

<p>If you use the <span class="ttnobr">submit</span> feature, a notes section will automatically be created to indicate that
you have done so.  </p>
<pre>
                                 Submit Notes
                                 ------------
    The config file option 'submit' was used.
</pre>

<p class="snugbot">You can add notes to that section, or customize it as you wish, by creating lines with <span
class="ttnobr">notes_submit_NNN</span>.  The phrase </p>
<pre>The config file option 'submit' was used</pre>
<p class="snugtop"><span class="u"><b>must</b></span> appear somewhere in your notes; if it doesn't, it will get added.</p>

<p>For example, if your config file has:</p>

<pre>
notes_submit_000 =
notes_submit_005 = Processes were assigned to specific processors using 'pbind' commands.  The config
notes_submit_010 = file option 'submit' was used, along with a list of processors in the 'BIND'
notes_submit_015 = variable, to generate the pbind commands.  (For details, please see the config file.)
notes_submit_020 =
</pre>

<p>then your report will include a section that looks like this:</p>

<pre>
                                 Submit Notes
                                 ------------
    
     Processes were assigned to specific processors using 'pbind' commands.  The config
     file option 'submit' was used, along with a list of processors in the 'BIND'
     variable, to generate the pbind commands.  (For details, please see the config file.)
</pre>

<p>Notice in the example that the key phrase (<span class="ttnobr">The config file option 'submit' was used</span>) was
wrapped across two lines.  That's fine.  You can break it in the middle, and you can vary the capitalization, just so long as
you include it.  If you don't include it, then it will be automatically added at the top of the Submit Notes section.</p>

<!--
   <p class="snugtop" style="margin-left:3em"><b>Note: now you see it, now you don't:</b> The best part of this feature is
   that the entire section, including all your added notes, will <span class="u">automatically disappear</span> if you do a
   run that does not use <span class="ttnobr">submit</span> -- for example, a SPECspeed run (*).  The intent is to make life
   easier for common usage of config files: when you do SPECrate runs, the section appears; when you do SPECspeed runs, it
   disappears (*), and you don't have to remember to edit the notes section each time that you switch between SPECspeed
   metrics and SPECrate metrics.</p>

   <p style="margin-left:6em;">(*) (Assuming that you have kept the default setting of <a
   href="#use_submit_for_speed">use_submit_for_speed</a> = 0)  </p>

<p><span class="oldnews">(History: The Submit Notes section was added in SPEC CPU2006 V1.1.)</span></p>
-->



<h2 id="sectionV">V. Config file options for readers</h2>

<p>Whether or not you send your result to SPEC, you should fully disclose how you achieved the result.  If it requires the
installation of the GoFastLinker, you should say so.  By setting the appropriate fields in the config file, you can cause
information about the GoFastLinker to appear in the reports that are intended for humans.</p>

<h3 id="sectionV.A">V.A. Descriptive fields</h3>

<p>Here are the fields that you can set to describe your testbed to readers:</p>

<table> 

<!--
<tr>
   <th id="company_name"><span class="switchstrike">company_name</span></th>
   <td><span class="alarm">Do not use.  This field is obsolete</span>.  You are probably looking for <a
   href="#hw_vendor">hw_vendor</a>, <a href="#tester">tester</a>, or <a href="#test_sponsor">test_sponsor</a>.  See the
   example under <a href="#test_sponsor">test_sponsor</a>.</td>
</tr>
-->

<tr>
   <td id="hw_avail" > <tt>hw_avail</tt> </td>
   <td>Date hardware first shipped.  If more than one date applies, use the LATEST one.</td>
</tr>

<tr>
   <td id="hw_cpu_name" > <tt>hw_cpu_name</tt> </td>
   <td>Manufacturer-determined formal processor name.</td>
</tr>

<tr>
   <td id="hw_cpu_char" > <tt>hw_cpu_char</tt> </td>
   <td>Technical characteristics to help identify the processor.  (You'll find more information about the intended use of
   <tt>hw_cpu_name</tt> vs. <tt>hw_cpu_char</tt> in the <a class="external" href="runrules.html#section4.2.2">run rules</a>.)</td> 
</tr>

<tr>
   <td id="hw_cpu_mhz" > <tt>hw_cpu_mhz</tt> </td>
   <td>Normal operating speed of the CPUs, in MHz.</td>
</tr>

<tr>
   <td id="hw_cpu_max_mhz" > <tt>hw_cpu_max_mhz</tt> </td>
   <td>Maximum speed of the CPUs, in MHz. This may be what is referred to as
the maximum turbo speed of the CPUs.  If turbo is disabled, or there is no
other speed of the CPUs, please just list the normal operating speed (same
as hw_cpu_mhz).</td>
</tr>

<tr>
   <td id="hw_disk" > <tt>hw_disk</tt> </td>
   <td><p class="snug">Disk subsystem for the SPEC run directories.  Three important <b>Notes</b>:</p>
   <ol class="snugbot">
   <li>Only a single file system may be used for the run directories, as described in the run rules at <a class="external"
       href="runrules.html#section3.1.2">Rule 3.1.2</a>.</li> 
   <li>If the <a href="#output_root">output_root</a> feature is used, its disk subsystem should be the one described
   here.</li>
   <li>Disks used for other purposes - such as the system disk - are usually not a performance-relevant variable, so need not
   be described.  Note that if you wish to do so, you can extend this field using the same <a
   href="#continuation">continuation rules</a> as other fields (so, you could use <tt>hw_disk01</tt>, <tt>hw_disk02</tt>,
   etc).</li>
   </ol>
   </td>
</tr>

<tr>
   <td id="hw_fpu" > <tt>hw_fpu</tt> </td>
   <td>Floating point unit.</td>
</tr>

<tr>
   <td id="hw_memory" > <tt>hw_memory</tt> </td>
   <td>Size of main memory (and other performance-relevant information about memory, as discussed in the <a class="external"
   href="runrules.html#memoryconfig">run rules</a>.)</td> 
</tr>

<tr>
   <td id="hw_model" > <tt>hw_model</tt> </td>
   <td>Model name.</td>
</tr>

<tr>
   <td id="hw_nchips" > <tt>hw_nchips</tt> </td>
   <td>Number of CPU chips configured.  See the discussion of CPU counting in the <a class="external"
   href="runrules.html#cpucount">run rules</a>.</td> 
</tr>

<tr>
   <td id="hw_ncores" > <tt>hw_ncores</tt> </td>
   <td>Number of CPU cores configured.  See the discussion of CPU counting in the <a class="external"
   href="runrules.html#cpucount">run rules</a>.</td> 
</tr>

<tr>
   <td id="hw_ncoresperchip" > <tt>hw_ncoresperchip</tt> </td>
   <td>Number of CPU cores per chip.  See the discussion of CPU counting in the <a class="external"
   href="runrules.html#cpucount">run rules</a>.</td> 
</tr>

<tr>
   <td id="hw_ncpuorder" > <tt>hw_ncpuorder</tt> </td>
   <td>Valid number of processors orderable for this model, including a unit.  For example, "2, 4, 6, or 8 chips".</td>
</tr>

<tr>
   <td id="hw_nthreadspercore" > <tt>hw_nthreadspercore</tt> </td>
   <td>Number of hardware threads per core.  See the discussion of CPU counting in the <a class="external"
   href="runrules.html#cpucount">run rules</a>.</td> 
</tr>

<tr>
   <td id="hw_other" > <tt>hw_other</tt> </td>
   <td>Any other performance-relevant hardware.</td>
</tr>

<tr>
   <td id="hw_pcache" > <tt>hw_pcache</tt> </td>
   <td>1st level (primary) cache.</td>
</tr>

<tr>
   <td id="hw_power_cal_date" > <tt>hw_power_{id}_cal_date</tt> </td>
   <td>The date the power meter was last calibrated.</td>
</tr>

<tr>
   <td id="hw_power_cal_label" > <tt>hw_power_{id}_cal_label</tt> </td>
   <td>The calibration label.</td>
</tr>

<tr>
   <td id="hw_power_cal_org" > <tt>hw_power_{id}_cal_org</tt> </td>
   <td>The name of the organization or institute that did the calibration.</td>
</tr>

<tr>
   <td id="hw_power_met_inst" > <tt>hw_power_{id}_met_inst</tt> </td>
   <td>The name of the metrology institute that certified the organization
   that did the calibration of the meter.</td>
</tr>

<tr>
   <td id="hw_power_connection" > <tt>hw_power_{id}_connection</tt> </td>
   <td>Description of the interface used to connect the power analyzer to the 
    PTDaemon host system, e.g. RS-232 (serial port), USC, GPIB, etc.</td>
</tr>

<tr>
   <td id="hw_power_label" > <tt>hw_power_{id}_label</tt> </td>
   <td>description</td>
</tr>

<tr>
   <td id="hw_power_model" > <tt>hw_power_{id}_model</tt> </td>
   <td>The model name of the power analyzer used for this benchmark run.</td>
</tr>

<tr>
   <td id="hw_power_serial" > <tt>hw_power_{id}_serial</tt> </td>
   <td>The serical number uniquely identifying the
   power analyzer.</td>
</tr>

<tr>
   <td id="hw_power_setup" > <tt>hw_power_{id}_setup</tt> </td>
   <td>A brief description of which devices were measured by this device.</td>
</tr>

<tr>
   <td id="hw_power_vendor" > <tt>hw_power_{id}_vendor</tt> </td>
   <td>Company which manufactures and/or sells the power analyzer.  </td>
</tr>

<tr>
   <td id="hw_psu" > <tt>hw_psu</tt> </td>
   <td>The number and ratings (in Watts) of the systems power supplies.</td>
</tr>

<tr>
   <td id="hw_psu_info" > <tt>hw_psu_info</tt> </td>
   <td>Details about the power supplies, like vendor part number, 
manufacturer, etc. </td>
</tr>


<tr>
   <td id="hw_scache" > <tt>hw_scache</tt> </td>
   <td>2nd level cache.</td>
</tr>

<tr>
   <td id="hw_tcache" > <tt>hw_tcache</tt> </td>
   <td>3rd level cache.</td>
</tr>

<tr>
   <td id="hw_ocache" > <tt>hw_ocache</tt> </td>
   <td>4th level or other form of cache.</td>
</tr>

<tr>
   <td id="hw_temperature_connection" > <tt>hw_temperature_{id}_connection</tt> </td>
   <td>Description of the interface used to connect the temperature meter to the 
    PTDaemon host system, e.g. RS-232 (serial port), USC, GPIB, etc.</td>
   <td></td>
</tr>

<tr>
   <td id="hw_temperature_label" > <tt>hw_temperature_{id}_label</tt> </td>
   <td>description</td>
</tr>

<tr>
   <td id="hw_temperature_model" > <tt>hw_temperature_{id}_model</tt> </td>
   <td>The model name of the temperature meter used for this benchmark run.</td>
</tr>

<tr>
   <td id="hw_temperature_serial" > <tt>hw_temperature_{id}_serial</tt> </td>
   <td>description</td>
</tr>

<tr>
   <td id="hw_temperature_setup" > <tt>hw_temperature_{id}_setup</tt> </td>
   <td>Brief description of how the location of the sensor, e.g.
   50 mm in fron of th SUT main airflow intake".</td>
</tr>

<tr>
   <td id="hw_temperature_vendor" > <tt>hw_temperature_{id}_vendor</tt> </td>
   <td>Company which manufactures and/or sells the temperature meter.  </td>
</tr>

<tr>
   <td id="hw_vendor" > <tt>hw_vendor</tt> </td>
   <td>The hardware vendor.  An example of usage of this and related fields is given in the <a
   href="#test_sponsor">test_sponsor</a> section.  </td>
</tr>

<tr>
   <td id="license_num" > <tt>license_num</tt> </td>
   <td>The SPEC license number for either the <a href="#tester">tester</a> or the <a
   href="#test_sponsor">test_sponsor</a>.</td>
</tr>

<!--
<tr>
   <th id="machine_name"><span class="switchstrike">machine_name</span></th>
   <td><span class="alarm">Do not use.  This field is obsolete</span> (and has been since SPEC CPU95 was retired).</td>
</tr>
-->

<tr>
   <td id="prepared_by" > <tt>prepared_by</tt> </td>
   <td>Is never output.  If you wish, you could set this to your own name, so that the rawfile will be tagged with your name
   but not the formal reports. </td>
</tr>

<!--
<tr>
   <td id="sw_auto_parallel" > <span class="switchstrike"><tt>sw_auto_parallel</tt></span> </td>
   <td><p class="snugtop"><span class="oldnews">(History: As of SPEC CPU2006 V1.1, the sw_auto_parallel field has been
   retired.)</span>  If your compiler creates binaries that use multiple processors, you should instead make sure that your
   flags file indicates this by setting the new flag attribute <a class="external"
   href="flag-description.html#parallel">parallel="yes"</a>.  The tools will notice if you use a flag that has the new flag
   attribute set, and if so will automatically include that information in the reports.</p> 

   <p class="snugbot">See the  discussion of <a href="#parallelreporting">parallel reporting</a>, below.  See also the
   description for <tt><a href="#sw_parallel_other">sw_parallel_other</a></tt> and <tt><a
   href="#sw_parallel_defeat">sw_parallel_defeat</a></tt>.</p>
   </td>
</tr>
-->

<tr>
   <td id="sw_avail" > <tt>sw_avail</tt> </td>
   <td>Availability date for the software used.  If more than one date, use the LATEST one.</td>
</tr>

<tr>
   <td id="sw_base_ptrsize" > <tt>sw_base_ptrsize</tt> </td>
   <td>
   Size of pointers in base.  Report:
       <ul class="snug">
       <li>"<tt>32-bit</tt>" if all benchmarks in base are compiled with switches that request only 32-bit pointers.</li>
       <li>"<tt>64-bit</tt>" if all benchmarks in base are compiled with switches that request only 64-bit pointers.</li>
       <li>"<tt>32/64-bit</tt>" if there is a mix of 32-bit and 64-bit.  For example, if the C++ benchmarks use 32-bit
       pointers, while the Fortran and C benchmarks use 64-bit, then you would report "32/64-bit" here.</li>
       </ul></td>
</tr>


<tr>
   <td id="sw_compiler" > <tt>sw_compiler</tt> </td>
   <td>Name and version of compiler.  Note that if more than one compiler is used, you can employ <a
   href="#sectionV.B">continuation lines</a>.  (This applies to most of the fields discussed here, but is emphasized for
   <tt>sw_compiler</tt> because it is common that testers first find themselves wanting to use continuation lines when
   documenting their compiler set.)  </td>
</tr>

<tr>
   <td id="sw_file" > <tt>sw_file</tt> </td>
   <td><p class="snugtop">File system (ntfs, ufs, nfs, etc) for the SPEC run directories.  Three important <b>Notes</b>:</p>
   <ol class="snugbot">
   <li>Only a single file system may be used for the run directories, as described in the run rules at <a class="external"
       href="runrules.html#section3.1.2">Rule 3.1.2</a>.</li> 
   <li>If the <a href="#output_root">output_root</a> feature is used, its file system should be the one described
   here.</li>
   <li>File systems used for other purposes - such as for the operating system - are usually not a performance-relevant
   variable, so need not be described.  But if you wish to do so, you can extend this field using the same <a
   href="#sectionV.B">continuation rules</a> as other fields (so, you could use <tt>sw_file01</tt>, <tt>sw_file02</tt>,
   etc).</li>
   </ol>
   </td>
</tr>
   
<tr>
   <td id="sw_os" > <tt>sw_os</tt> </td>
   <td>Operating system name and version.</td>
</tr>

<tr>
   <td id="sw_other" > <tt>sw_other</tt> </td>
   <td>Any other performance-relevant non-compiler software used, including third-party libraries, accelerators, etc.</td>
</tr>

<!--
<tr>
   <td id="sw_parallel_defeat" > <tt>sw_parallel_defeat</tt> </td>
   <td>This field is only set in raw files, and can only be applied by <span class="ttnobr">rawformat</span>. See the description
   in <a class="external" href="utility.html#sw_parallel_defeat">utility.html</a>, and the discussion of <a
   href="#parallelreporting">parallel reporting</a>, below. 
   </td>
</tr>

<tr>
   <td id="sw_parallel_other" > <tt>sw_parallel_other</tt> </td>
   <td><p class="snugtop">Yes or no.  If this field is set to yes, then the run is assumed to have used auto-parallelization
   technology separate from the compilation system.   Set this field to "yes" if the tested system uses libraries that spread
   work across multiple processors, or other non-compiler<a href="#sw_parallel_other_note">(*)</a> means that cause
   individual benchmark executables to spread their work across multiple processors.</p>

   <p>(This field can be specified in config files or in rawfiles, just like almost all other fields.)</p>

   <p style="margin-left:3em;" id="sw_parallel_other_note">* If your compiler does the parallelization, specify it in the
   flags file, using the <a class="external" href="flag-description.html#parallel">parallel flag attribute</a>.</p> 

   <p class="snugbot">See the run rules <a class="external" href="runrules.html#autopar">section on reporting of auto
   parallel</a>, and the discussion of <a href="#parallelreporting">parallel reporting</a>, below. <span
   class="oldnews">(History: The sw_parallel_other feature was added in SPEC CPU2006 V1.1)</span></p> 
   </td>
</tr>
-->

<tr>
   <td id="sw_peak_ptrsize" > <tt>sw_peak_ptrsize</tt> </td>
   <td> Size of pointers in peak.  Report:
       <ul class="snug">
       <li>"<tt>32-bit</tt>" if all benchmarks in peak are compiled with switches that request only 32-bit pointers.</li>
       <li>"<tt>64-bit</tt>" if all benchmarks in peak are compiled with switches that request only 64-bit pointers.</li>
       <li>"<tt>32/64-bit</tt>" if there is a mix of 32-bit and 64-bit.  </li>
       </ul></td>
</tr>

<tr>
   <td id="sw_state" > <tt>sw_state</tt> </td>
   <td>Multi-user, single-user, default, etc.  <!--<span class="oldnews">(History: effective as of the release of SPEC CPU2006
   V1.1)</span>, t-->The rules have been clarified regarding documentation of system state and tuning, in rules <a
   class="external" href="runrules.html#section3.1.1">3.1.1</a>, <a class="external" href="runrules.html#section4.2.3">4.2.3</a>
   (paragraphs c and d), and <a class="external" href="runrules.html#section4.2.4">4.2.4</a> (paragraph f).</td> 
</tr>

<tr>
   <td id="tester" > <tt>tester</tt> </td>
   <td>The entity actually carrying out the tests.  An optional field; if not specified, defaults to <tt>test_sponsor</tt>.
   An example is given in the <a href="#test_sponsor">test_sponsor</a> section.  </td>
</tr>

<!--
<tr>
   <th id="tester_name"><span class="switchstrike">tester_name</span></th>
   <td><span class="alarm">Do not use.  This field is obsolete</span>.  You are probably looking for <a
   href="#hw_vendor">hw_vendor</a>, <a href="#tester">tester</a>, or <a href="#test_sponsor">test_sponsor</a>.  See the
   example under <a href="#test_sponsor">test_sponsor</a>.</td>
</tr>
-->

<tr>
   <td id="test_date" > <tt>test_date</tt> </td>
   <td>When the tests were run.  <!--<span class="oldnews">(History: since the release of SPEC CPU2006 V1.1)</span>, t-->This field
   is populated automatically based on the clock in the system under test.  Setting this in the config file will generate a
   warning and the setting will be ignored.  If your system clock is incorrect, then the value may be edited in the raw file
   (see <a class="external" href="utility.html#rawformat">utility.html</a>).  It's better to avoid the necessity to edit, by
   setting your system clock properly.</td> 
</tr>

<tr>
   <td id="test_sponsor" > <tt>test_sponsor</tt> </td>
   <td><p class="snugtop">The entity sponsoring this test.  An optional field; if not specified, defaults to
   <a href="#hw_vendor">hw_vendor</a>.</p>
   <p style="margin:0em 4em; text-align:justify;">For example, suppose that the Genius Compiler Company wants to show off
   their new compiler on the TurboBlaster 9000 computer, but does not happen to own a maxed-out system with eight thousand
   processors.  Meanwhile, the Pawtuckaway State College Engineering department has just taken delivery of such a system.  In
   this case, the compiler company could contract with the college to test their compiler on the big machine.  The fields
   could be set as:</p>
<pre>
      test_sponsor = Genius Compilers
      tester       = Pawtuckaway State College
      hw_vendor    = TurboBlaster
</pre>

   </td>
</tr>

<!--
<tr>
   <th id="VENDOR"><span class="switchstrike">VENDOR</span></th>
   <td><span class="alarm">Do not use.  This field is obsolete</span>, and has been since SPEC CPU92 was retired.  It
   is ancient, useless, vestigial, degenerate, deprecated, and leftover.  Repetition is a form of emphasis.</td>
</tr>
-->

</table>


<h3 id="sectionV.B">V.B. Field scoping and <a name="continuation"></a>numbered continuation lines
</h3>

   <p>Fields can appear and disappear based upon scope.  For example, you can define the compiler optimizations you use
   for all benchmarks while adding those for peak only in the peak section.  You can also have notes which apply
   to all runs and add additional notes for another section.  </p>

   <p>Most <a href="#nocontinue">(*)</a> fields can be continued to another line by appending a numeral, for example <span
   class="ttnobr">sw_os1</span>, <span class="ttnobr">sw_os2</span>, <span class="ttnobr">sw_os3</span> if you need 3 lines
   to fully identify your operating system.</p>

   <p>Here is an example that uses both of these features:</p>

<pre>   default=default=default=default:
   OPTIMIZE    = -fast -xipo=2
   notes_000   =  System used mega-threading scheduler.

   default=peak=default=default:
   COPTIMIZE    = -xhyper -lsmash
   FOPTIMIZE    = -xblaster -lpile
   notes_001    = Smash library was used to allow potater tool optimization.
   notes_002    = Pile library allowed dynamic adjustment of spin delay, set with BLASTER=17.
</pre>

<p>In the above example, the information about the mega-threading scheduler will be printed for both base and peak
runs.  The information about the smash and pile libraries will only be printed for peak runs.</p>

<p>Note that the numerals above will be converted to a more formal style of three-digit numbers with leading zeros in the raw
file; as discussed in <a class="external" href="utility.html#cont">utility.html</a>, if you edit a rawfile you must use the more
formal style of <tt>000</tt>, <tt>001</tt>, etc.</p> 

   <p id="nocontinue" style="margin-left:3.5em; text-indent:-1.5em">(*) The fields which cannot be continued are the ones
   that are expecting a simple integer, such as: <span class="ttnobr">hw_nchip</span>, <span class="ttnobr">hw_ncores</span>,
   <span class="ttnobr">hw_ncoresperchip</span>, <span class="ttnobr">hw_nthreadspercore</span>, <span
   class="ttnobr">license_num</span>; and the ones that are expecting a date: <span class="ttnobr">hw_avail</span>, and <span
   class="ttnobr">sw_avail</span>.</p>

<h3 id="sectionV.C">V.C. <a name="free.form.notes"></a>Additional notes for the reader</h3>

<p class="snugbot">In addition to the pre-defined fields, you can write as many notes as you wish.  These notes are printed
in the report, using a fixed-width font.  For example, you can use notes to describe software or hardware information with
more detail beyond the predefined fields:</p>
<pre>
   notes_os_001  = The operating system used service pack 2 plus patches 
   notes_os_002  = 31415, 92653, and 58979.  At installation time, the 
   notes_os_003  = optional "Numa Performance Package" was selected.
</pre>

<h4 id="sectionV.C.1">V.C.1 Notes sections</h4>

<p> There are 8 different notes sections.  <!--<span class="oldnews">(History: prior to SPEC CPU2006 V1.0, there was only one
section.)</span>--> If there are no notes in a particular section, it is not output, so you don't need to worry about making
sure you have something in each section.</p>

   <p>The sections, in order of appearance, are as follows:</p>
   <ol>
     <li id="notes_comp"><span class="ttnobr">notes_comp_NNN</span> -- Notes about compiler invocation.</li>
     <li id="notes_port"><span class="ttnobr">notes_port_NNN</span> -- Notes about portability options.</li>
     <li id="notes_base"><span class="ttnobr">notes_base_NNN</span> -- Notes about base optimization options.</li>
     <li id="notes_peak"><span class="ttnobr">notes_peak_NNN</span> -- Notes about peak optimization options.</li>
     <li id="notes_submit"><span class="ttnobr">notes_submit_NNN</span>   -- Notes about use of the <a
     href="#submit">submit</a> option.</li>
     <li id="notes_os"  ><span class="ttnobr">notes_os_NNN</span>   -- Notes about operating system tuning and changes.</li>
     <li id="notes_plat"><span class="ttnobr">notes_plat_NNN</span> -- Notes about platform tuning and changes.</li>
     <li id="notes_part"><span class="ttnobr">notes_part_NNN</span> -- Notes about component parts (for kit-built systems).</li>
     <li id="notes"     ><span class="ttnobr">notes_NNN</span> -- General notes.</li>
   </ol>

<p>Notes about the submit command are described <a href="#submitnotes">above</a>, with the description of the <a
href="#submit">submit</a> option.  <!-- <span class="oldnews">(History: the notes_submit feature was added with SPEC CPU2006
V1.1.)</span> --></p>

<h4 id="sectionV.C.2">V.C.2 Note numbering</h4>

<p>Start your notes with the name of the notes section where you want the note to appear, and then add numbers to define the
order of the lines.  Within a section, notes are sorted by line number.  The <tt>NNN</tt> above is not intended to indicate
that you are restricted to 3 digits; you can use a smaller or larger number of digits as you wish, and you can skip around as
you like: for example, ex-BASIC programmers might naturally use line numbers 100, 110, 120...  But note that if you say <span
class="ttnobr">notes_plat782348320742972403</span> you just might encounter the dreaded (and highly unusual) "out of memory"
error, so don't do that. </p>

<p>You can optionally include an underscore just before the number, but <span class="alarm">beware:</span> if you say both
<span class="ttnobr">notes_plat_105</span> and <span class="ttnobr">notes_plat105</span>, both are considered to be the same
line.  The last one mentioned will replace the first, and it will be the only one output. </p>

<h4 id="sectionV.C.3">V.C.3 Additional <a name="notestags"> </a>tags</h4>

<p>For all sections you can add an optional additional tag of your choosing before the numbers.   Notes will be organized
within the tags.  <!--<span class="new">(Prior to CPU2006 V1.2, this feature was not available for the General notes.)</span>--></p>

<p>The intent of the feature is that it may allow you to organize your system information in a manner that better suits your
own categories for describing it.</p>

<p>For example:</p>

<pre>   $ <b>cat tmp.cfg</b>
   size                 = test
   iterations           = 1
   output_format        = text
   teeout               = 1
   runlist              = smithwa
   tune                 = base

   notes_part_greeting_011  = ++ how
   notes_part_greeting_20   = ++ you?
   notes_part_greeting_012  = ++ are
   notes_part_aname_1       = ++ Alex,
   notes_part_080           = ++ hi

   $ <b>runspec --config tmp > /nev/dull</b>
   $ <b>cd ../result</b>
   $ <b>ls -t *test.txt | head -1</b>
   OMPG2012.101.test.txt
   $ <b>grep ++ *101*txt</b>
        ++ hi
        ++ Alex,
        ++ how
        ++ are
        ++ you?
   $ 
</pre>

<h4 id="sectionV.C.4">V.C.4 <a name="links"></a> Links in notes sections</h4>

<p>You can mention URLs in your notes section.  <!--<span class="oldnews">(History: since the release of SPEC CPU2006
V1.1,)</span>--> html reports will correctly render them as hyperlinks.  For example:</p> 
<pre>
notes_plat_001 = Additional detail may be found at
notes_plat_002 = http://www.turboblaster.com/servers/big/green/
</pre>

<p class="snugbot">If you like, you can use descriptive text for the link by preceding it by the word LINK and adding the
descriptive text in square brackets:</p>

<pre>LINK url AS [descriptive text]</pre>

<p class="snug">The brackets may be omitted if your descriptive text is a single word, without blanks.</p>

<p>For example:</p>

<pre>notes_plat_001 = Additional detail may be found at 
notes_plat_002 = LINK http://www.turboblaster.com/servers/big/green/ AS [TurboBlaster Servers]</pre>

<p class="snugtop">When the above appears in an html report, it is rendered as:
</p>
<div class="resultpage"> <div class="notes"> <h2><a class="external"
href="http://www.spec.org//omp2012/Docs/result-fields.html#PlatformNotes">Platform Notes</a></h2> 
<pre>
 Additional detail may be found at 
 <a href="#links">TurboBlaster Servers</a>
</pre>
</div>
</div>

<p class="snugbot">And in a text report, it appears as:</p>
<pre>                                Platform Notes
                                --------------
     Additional detail may found at 
     TurboBlaster Servers (http://www.turboblaster.com/servers/big/green/)
</pre>

<p class="snugtop">Since the text report is not a context in which the reader can click on a link, it is spelled out instead.
<b>Note that because the text report spells the link out, the text line is wider</b> than in HTML, PS, and PDF reports.  When
deciding where to break your notes lines, you'll have to pick whether to plan line widths for text (which may result in
thin-looking lines elsewhere) or plan your line widths for HTML/PS/PDF (which may result in lines that fall of the right edge
with text).  The feature <a href="#notes_wrap_columns">notes_wrap_columns</a> won't help you here, since it is applied before
the link is spelled out.</p>

<!--<p><span class="oldnews">(History: the LINK AS feature was added in SPEC CPU2006 V1.1)</span></p>-->

<h4 id="sectionV.C.5">V.C.5 <a name="attachments"></a> Attachments</h4>

<p class="snugbot">You can cause files to be attached to a result with this syntax:</p>
<pre>ATTACH url AS [descriptive text]</pre>
<p class="snugtop">Unlike links (described in the previous section), if you use ATTACH, the mentioned file is actually copied
into your result directory.  </p>

<p class="snugbot">For example, the notes below will cause 
<span class="ttnobr">/Users/john/Desktop/power.jpg</span> and <span class="ttnobr">/Users/john/Desktop/fan.jpg</span> 
to be copied into the result directory:
</p>
<pre>
notes_plat_110 = Stated performance depends on proper cooling, as shown in the 
notes_plat_120 = ATTACH file:///Users/john/Desktop/power.jpg AS [power supply photo] 
notes_plat_130 = and ATTACH file:///Users/john/Desktop/fan.jpg AS [fan diagram] 
</pre>

<p>When the above notes are used with an HTML report, they appear as:</p>

<div class="resultpage"> <div class="notes"> <h2><a class="external"
 href="http://www.spec.org/omp2012/Docs/result-fields.html#PlatformNotes">Platform Notes</a></h2> 
  <pre>
 Stated performance depends on proper cooling, as shown in the
 <a href="#attachments">power supply photo</a> 
 and <a href="#attachments">fan diagram</a>
</pre>
 </div>
 </div>

<p class="snugbot">And in a text report, they appear as:</p>
<pre>                                Platform Notes
                                --------------
     Stated performance depends on proper cooling, as shown in the
     power supply photo (OMPG2012.011.test.jpg) 
     and fan diagram (OMPG2012.011.test.1.jpg)
</pre>

<p class="snugtop">In the text report, you can see that when <span class="ttnobr">fan.jpg</span> and <span
class="ttnobr">power.jpg</span> were copied into the result directory, they were given names to show which result they
correspond to: <span class="ttnobr">OMPG2012.011.test.jpg</span> and <span class="ttnobr">OMPG2012.011.test.1.jpg</span>.
<b>Note that since the text report spells the name of the attachment out, the text line is wider</b>  than in HTML, PS, and
PDF reports.  When deciding where to break your notes lines, you'll have to decide whether to plan line widths for text
(which may result in thin-looking lines elsewhere) or plan your line widths for HTML/PS/PDF (which may result in lines that
fall off the right edge with text).  The feature <a href="#notes_wrap_columns">notes_wrap_columns</a> won't help you here,
since it is applied before the attachment name is spelled out.</p>
<!--
<p><span class="oldnews">(History: the ATTACH feature was added in SPEC CPU2006 V1.1.)</span></p>
-->

<!--
<h3 id="sectionV.D">V.D. <span id="parallelreporting">About Auto Parallel Reporting</span></h3>

<p class="snugbot"> If benchmarks are automatically optimized to use multiple threads, cores, and/or chips at run time, the
tester needs to indicate this in the report as</p>
<p style="margin:.2em 3em;font-family:serif;font-weight:bold;font-size:115%;">Auto Parallel: Yes</p>  
<p class="snugtop">For SPEC CPU2006 V1.0, it was sometimes difficult to ensure that reports were accurate, in part because there
can be multiple sources of run-time parallelism (as described in the <a class="external" href="runrules.html#autopar">run
rules</a>).</p> 
<p>With SPEC CPU2006 V1.1, the V1.0 method of filling out the above field, <a
href="config.html#sw_auto_parallel">sw_auto_parallel</a>, has been retired, and three new features have been introduced to better
reflect these sources of parallelism. </p> 
<ul style="list-style-type:lower-roman;">
<li>When writing a flags file, the <a class="external" href="flag-description.html#parallel">parallel</a> flag attribute should be
set for compiler flags that cause binaries to be multi-threaded.  Then, when binaries that use those flags are run, the report
type will be listed as "Auto Parallel: Yes".  </li> 
<li>The config file field <a  href="config.html#sw_parallel_other">sw_parallel_other</a> should be set when there are other
(non-compiler) sources of parallelism.</li> 
<li>A rawfile-only field, <a  href="config.html#sw_parallel_defeat">sw_parallel_defeat</a>, can be used to indicate that, despite
any other settings,  a tested system has been forced to run in a single-threaded mode (for example, by removing all but one
processor).  </li></ul> 
<p class="snugbot">The intent is that the most common case will be handled automatically:</p>

<ul class="snug"> 

<li class="snug">Commonly, the SPEC tools will use (i) to automatically determine whether the run is parallel.
For this case, (ii) and (iii) will not be needed. </li>  
<li class="snug">If your source of parallelism is not visible to the SPEC toolset, you can set (ii).  </li>
<li class="snug">Rarely, you can take a software stack which appears to be parallel, but explain 
with (iii) why it was not.  </li>
</ul>

<p class="snugbut ">Overall, the setting of the <b>Auto Parallel</b> field in reports can be thought of as if it were derived 
from this logic:</p>
<pre>   (i | ii) &amp; (&not; iii)</pre>
<p class="snug">... or for the benefit of those readers who think in FORTRAN, it is as if the derivation were:</p>
<pre>  ( I .OR. II ) .AND. ( .NOT. III) 
</pre>
-->


<h2 id="sectionVI">VI. Using Feedback Directed Optimization (FDO)</h2>

<p>Feedback Directed Optimization (FDO) is an application build method that involves:</p>
<ul>
<li>Building the program,</li>
<li>Running a sample "training" workload,</li>
<li>Collecting a profile during the training run, and</li>
<li>Applying the profile to produce a modified program.</li>
</ul>
<p> The modified program is expected to run faster than if FDO had not been used.  FDO is also sometimes
known as PBO, for Profile-Based Optimization.</p>

<p>This section explains how various controls interact when using feedback.  Those controls are:</p>

<ol>
<li>The <a href="#sectionIII">specmake</a> options <b>PASS*n</b>.</li>
<li>The <a href="#sectionIV">shell</a> options <b>fdo*n</b>.</li>
<li>The config file <a href="#feedback">feedback</a> option.</li>
<li>The runspec switch <a class="external" href="runspec.html#feedback">--feedback</a>.</li> 
</ol>

<h3 id="sectionVI.A">VI.A. The minimum requirement: <tt>PASSn_&lt;language&gt;FLAGS</tt>, <tt>PASSn_&lt;language&gt;OPTIMIZE</tt>, or <tt>fdo*n</tt></h3>

<p>The default is to build without feedback.  To use FDO, you must add either the <tt>PASSn_&lt;language&gt;FLAGS</tt>, <tt>PASSn_&lt;language&gt;OPTIMIZE</tt>, or <tt>fdo*n</tt> options.
The <tt>PASSn</tt> options let you specify additional flags for the pre-defined sequence of steps within each build
pass, where "<tt>n</tt>" indicates the build pass number.  The <tt>fdo*n</tt> options let you add entire commands to build
passes, including setup and cleanup commands.</p>

<ul>

    <li><p><b>PASSn*:</b> The most common way of using FDO is to add <span
    class="ttnobr">PASS1_&lt;<i>language</i>&gt;FLAGS</span> and <span
    class="ttnobr">PASS2_&lt;<i>language</i>&gt;FLAGS</span> options, which specify flags to be added to each of multiple
    compiler and/or link steps.  These options, which are summarized in the section on <a href="#sectionIII">specmake</a>,
    cause multiple compiles.  The first compile creates an executable image with instrumentation.  That image is run with the
    SPEC-provided training workload, and the instrumentation collects data about the run (a profile).  Finally, the program
    is recompiled, and the compiler uses the profile to improve its optimizations.</p>

    <p>Use this method if your desired build sequence is <span style="white-space:nowrap"><i>compile - train -
    recompile</i></span>.  </p>

    <p class="snugbot">For example, if you set </p>
    <pre>    FC           = tbf90
    OPTIMIZE     = --fast
    PASS1_FFLAGS = --CollectFeedback 
    PASS2_FFLAGS = --ApplyFeedback</pre> 
    <p class="snugtop">then the tools will use <span class="ttnobr">tb90 --fast --CollectFeedback</span> to create an
    instrumented binary; will run it with the SPEC-provided training workload; and then will recompile with <span
    class="ttnobr">tbf90 --fast --ApplyFeedback </span> to create a new binary.</p></li>

    <li id="fdo.mod"><p><b>fdo*n:</b> Although the <span style="white-space:nowrap"><i>compile - train - recompile</i></span>
    method is common, many other FDO models are also possible, such as <span style="white-space:nowrap"><i>compile - train -
    othertool</i></span>, where <i>othertool</i> uses the profile to improve the executable image without requiring a
    recompile.  The <a href="#sectionIV">shell options <tt>fdo*n</tt></a> can be used to construct more flexible FDO methods.
    Unlike <tt>PASSn*</tt>, which is limited to just adding flags to the commands issued by <tt>specmake</tt>, the
    <tt>fdo</tt> options let you add entirely different commands. Here are two examples of how you can set or change
    <tt>fdo</tt> options:</p>
    
    <p class="snugbot"><b>Modifying fdo Example 1:</b> Using a postoptimizer </p>
    <pre>    FC        = tbf90
    OPTIMIZE  = -fast -profile:fbdir
    fdo_post1 = /usr/bin/postoptimizer --profile:fbdir</pre>
    <p class="snugtop">In this example, the SPEC tools will use <span class="ttnobr">tbf90 -fast -profile:fbdir</span> to
    create a binary; will run the binary with the SPEC-provided training workload; and then will run the
    <tt>postoptimizer</tt>.  The compiler is not re-run after the training run.  Instead, the <tt>postoptimizer</tt> consumes
    a profile from the feedback directory <tt>fbdir</tt>, and uses this profile to modify the binary.</p>

    <p id="cleanmodify" class="snugbot"><b>Modifying fdo Example 2:</b> changing cleanup </p>
    <pre>    350.md,352.namd,357.bt331=peak:
    OPTIMIZE = -O2 
    PASS1_LDFLAGS = -PGINSTRUMENT -incremental:no
    PASS2_LDFLAGS = -PGOPTIMIZE   -incremental:no
    fdo_make_clean_pass2 = del /q *.exe
    fdo_make_pass2 = specmake build FDO=PASS2</pre>

    <p class="snugtop">By default, the tools will clean up all object files from previous passes.  This example modifies the
    action <span class="ttnobr">fdo_make_clean_pass2</span> to delete only the executables (<span
    class="ttnobr">.exe</span>), effectively keeping the object (<span class="ttnobr">.obj</span>) files.  The line <span
    class="ttnobr">fdo_make_pass2</span> causes <span class="ttnobr">specmake</span> to be invoked to build using a
    simplified command line.  By default, the line would have included the GNU make switch <span
    class="ttnobr">--always-make</span>; the modified line drops that switch.</p>

    <p>Before modifying the <span class="ttnobr">fdo</span> hooks, you should learn what they do by default, as described 
    <a href="#fdodefault">above</a>.</p> 
    
    
    </li>
</ul>
    

<h3 id="sectionVI.B">VI.B. Combining <tt>PASS*n</tt> and <tt>fdo*n</tt>; fake is your friend</h3>

<p>The <tt>PASSn*</tt> and <tt>fdo*n</tt> options can be freely used together.  For example, here's a config file that
builds 357.bt331 peak (as specified on the first three lines), with both <tt>PASSn</tt> and <tt>fdo</tt> options:</p>

<pre>
$ <b>cat tmp.cfg</b>
action       = build
runlist      = GemsFDTD
tune         = peak

PASS1_FFLAGS = --CollectFeedback
PASS2_FFLAGS = --ApplyFeedback
fdo_run2     = $command
fdo_post2    = /usr/bin/postoptimizer

$ <b>runspec --config tmp --fake | \
  grep -e add.f -e bt.err -e postopt | grep -v %%</b>
f90 -c -o add.o --CollectFeedback add.f
../build_peak_none.0000/bt &gt; bt.out 2&gt;&gt; bt.err
f90 -c -o add.o --ApplyFeedback add.f
../build_peak_none.0000/bt &gt; bt.out 2&gt;&gt; bt.err
/usr/bin/postoptimizer
$ 
</pre>

<p class="snugtop">In the <tt>runspec</tt> command, we use the <a class="external" href="runspec.html#fake">--fake</a> option to
quickly examine how the build will work.  Using <span class="ttnobr">--fake</span> is highly recommended when you are trying to
debug your feedback commands, because it is much quicker than actually doing the builds.  The fake output is searched with the
Unix <tt>grep</tt> command; on Windows you would construct a <tt>findstr</tt> command.  The example picks out lines of interest:
</p> 

<ul style="list-style-type:none">
  <li>"<tt>-e add.f</tt>" matches a sample line from the compile commands, </li>
  <li>"<tt>-e bt.err</tt>" matches the line that runs the benchmark with the training workload, </li>
  <li>"<tt>-e postopt</tt>" matches the postoptimizer line, and  </li>
  <li>"<tt>-v %%</tt>" excludes some commentary lines that aren't needed for this example.</li>
</ul>

<p>Having done all this, we can confirm that the above config file causes the build sequence to be
<span style="white-space:nowrap"><i>compile - train - compile - train - othertool</i></span>.</p>
  
<p>The sharp-eyed reader may wonder "What is this '<span class="ttnobr">fdo_run2 = $command</span>' line in the config file?"
In the second pass, actually running the benchmark is optional, because it is possible that your pass 2 tools might not need
another run of the benchmark.  One could imagine a build system that notices everything interesting during the pass 1 run,
and which causes that interesting information to be carried around by the binary itself, so that it never needs to be
regenerated.  To say "Yes, please do run it again", you add the above <tt>fdo_run2</tt> line.</p>

<p>More complex examples can be constructed.  If you mention <tt>PASS1</tt>, <tt>fdo_pre2</tt>, <tt>fdo_post2</tt>,
<tt>PASS3</tt>, and <tt>fdo_post4</tt>, then you will end up with four passes.  The numbers serve to order the passes, but if
you skip numbers then the tools will not attempt to invent things to do in the "missing" passes. </p> 


<h3 id="sectionVI.C">VI.C. Interaction with the config file <tt>feedback</tt> option</h3>

<p>If you use either <tt>PASSn*</tt> or <tt>fdo*n</tt> (or both), then, by default, feedback will happen.  The config file
option <a href="#feedback">feedback</a> provides an additional control, an "on/off" switch which allows, or disallows, the
options selected with <tt>PASSn*</tt> and <tt>fdo*n</tt>.</p>  

<p>A common usage model is to use <tt>PASSn*</tt> or <tt>fdo*n</tt> to turn on feedback for a whole set of benchmarks, and
then use the option <tt>feedback=0</tt> to turn it off for individual benchmarks.  For example:</p>

<pre>
$ <b>cat miriam1.cfg</b>
action    = build
tune      = peak
runlist   = md,bwaves,bt331

fdo_post1 = /usr/bin/merge_feedback fbdir

350.md:
feedback=0

357.bt331:
feedback=1

$ <b>runspec --fake --config miriam1  | grep -e Building -e merge_feedback \
  | grep -v %%</b>
  Building 350.md peak none default: (build_peak_none.0000)
  Building 351.bwaves peak none default: (build_peak_none.0000)
/usr/bin/merge_feedback fbdir
  Building 357.bt331 peak none default: (build_peak_none.0000)
/usr/bin/merge_feedback fbdir
$
</pre>

<p class="snugtop">In this example, we build peak md, bwaves, and bt331 (notice the first three lines of the config file) and
once again use <a class="external" href="runspec.html#fake">--fake</a> and <tt>grep</tt> in a fashion similar to the
previous example.  In this case, we can see that the <tt>fdo_post1</tt> command was used for two of the three benchmarks from the
runlist, since  by default <tt>feedback=1</tt>.</p> 

<h3 id="sectionVI.D">VI.D. If the config file <tt>feedback</tt> option is used at multiple levels</h3>

<p>If the <tt>feedback</tt> option is used at more than one level within a config file, the usual <a
href="#sectionI.C.3.a">precedence rules</a> apply.  For example, the next config file specifies the <tt>feedback</tt> option
both for a set of benchmarks and for some individual benchmarks:</p>

<pre>
$ <b>cat miriam2.cfg</b>
action    = build
tune      = peak
runlist   = md,bwaves,bt331

fdo_post1 = /usr/bin/merge_feedback fbdir

default=peak:
feedback=0

350.md:
feedback=0

357.bt331:
feedback=1

$ <b>runspec --fake --config miriam2 | grep -e Building -e merge_feedback \
   | grep -v %%</b>
  Building 350.md peak none default: (build_peak_none.0000)
  Building 351.bwaves peak none default: (build_peak_none.0000)
  Building 357.bt331 peak none default: (build_peak_none.0000)
/usr/bin/merge_feedback fbdir
$ 
</pre>

<p class="snugtop">In the above example, 351.bwaves was built without feedback because of the <span
class="ttnobr">feedback=0</span> line in the section named "<span class="ttnobr">default=peak:</span>".  But 357.bt331
was built with feedback (from <span class="ttnobr">fdo_post1</span>) because it had a higher priority setting of <span
class="ttnobr">feedback=1</span> in the section named "<span class="ttnobr">357.bt331:</span>".</p>


<h3 id="sectionVI.E">VI.E. Interaction with <tt>runspec --feedback</tt></h3>

<p>As explained in <a href="#sectionII.A">section II.A</a>, if an option is mentioned on both the command line and in a
config file, the command line does not win over named sections, but it does win over the <a href="#header">header
section</a>.  Examples of both follow.</p> 

<ul>
   <li><p>Here, the config file <a href="#feedback">feedback</a> option is used in a named section, and the <tt>runspec</tt>
   option <a class="external" href="runspec.html#feedback">--feedback</a> is also used.  This is the same config file as in the
   previous example, with the added switch on <tt>runspec</tt>.</p> 
<pre>
$ <b>cat miriam2.cfg</b>
action    = build
tune      = peak
runlist   = md,bwaves,bt331

fdo_post1 = /usr/bin/merge_feedback fbdir

default=peak:
feedback=0

350.md:
feedback=0

357.bt331:
feedback=1

$ <b>runspec --fake --config miriam2 | grep -e Building -e merge_feedback \
   | grep -v %%</b>
  Building 350.md peak none default: (build_peak_none.0000)
  Building 351.bwaves peak none default: (build_peak_none.0000)
  Building 357.bt331 peak none default: (build_peak_none.0000)
/usr/bin/merge_feedback fbdir
$
</pre>
   <p class="snugtop">You can see above that the command line option had no effect: it cannot win over an option set in a named
   section (<span class="ttnobr">default=peak:</span>).</p></li>

   <li><p>But if the <tt>runspec</tt> option is used with a config file that adjusts feedback in the <a href="#header">header
   section</a>, then the <span class="ttnobr">--feedback</span> switch <b>does</b> have an effect:</p>
<pre>
$ <b>cat miriam3.cfg</b>
action    = build
tune      = peak
runlist   = md,bwaves,bt331

fdo_post1 = /usr/bin/merge_feedback fbdir

feedback=0

350.md:
feedback=0

357.bt331:
feedback=1

$ <b>runspec --fake --config miriam3 | grep -e Building -e merge_feedback \
   | grep -v %%</b>
  Building 350.md peak none default: (build_peak_none.0000)
  Building 351.bwaves peak none default: (build_peak_none.0000)
/usr/bin/merge_feedback fbdir
  Building 357.bt331 peak none default: (build_peak_none.0000)
/usr/bin/merge_feedback fbdir
$
</pre>

<p>In the above example, 351.bwaves does get the <tt>fdo_post1</tt> command.</p>

</li>

</ul>

<h3 id="sectionVI.F">VI.F. More examples </h3>

<p>For more examples of feedback, see the annotated example of a log file that uses FDO in <a href="#sectionVIII.C">section
VIII.C.</a> and the <tt>Example-medium.cfg</tt> config file in your <tt>config</tt> directory.</p>

<hr id="macros" />

<h2 id="sectionVII">VII.  The config file preprocessor</h2>

<p><!--<span class="oldnews">(History: as of the release of SPEC CPU2006 V1.0)</span> -->The tools implement a configuration file
macro preprocessor.  The preprocessor can be used in a variety of ways; for example to communicate settings from your shell
environment into runspec:</p>

<pre>
$ <b>cat &gt; jan.cfg</b>
notes01 = Today, I am happily running in directory %{MYDIR} on system %{HOST}
$ <b>runspec --config jan --define MYDIR=$PWD --define HOST=`hostname` \
  --fakereportable gross --output_format text | grep txt</b>
        format: ASCII -&gt; /jan/omp2012/result/OMPG2012.090.txt
$ <b>grep Today /jan/omp2012/result/OMPG2012.090.txt</b>
     Today, I am happily running in directory /jan/omp2012/config on system civilized-03
$ 
</pre>


<p>The config file preprocessor is called a
macro processor because it allows you to define <i>macros</i>, which are brief abbreviations for longer constructs.  If
you've ever used the C preprocessor, the concepts will be familiar, though the syntax is slightly different.</p>

<p>The preprocessor is automatically run whenever you use <span class="ttnobr">runspec</span>.  Or, you can run it separately, as
<span class="ttnobr">configpp</span>, which is documented in <a class="external"
href="utility.html#configpp">utility.html</a>.</p> 

<p>Preprocessor directives begin with the percent (%) character.  This character <b>must</b> be the first character on the
line.  Any amount of spaces or tabs may separate the percent from the directive.</p>

<p id="percentspace">The following are okay:</p>
<pre>
%define foo
%    define bar
%		undef hello!
</pre>

<p>The following are <b>not</b> okay:</p>
<pre>
# Space in the first column
 %define foo

# Tab in the first column
	%define foo

# This isn't CPP!
#define foo
</pre>

<h3 id="sectionVII.A">VII.A  Defining macros</h3>

<p>The preprocessor is all about macros.  There are no macros defined by default, so unless you define some macros, the
preprocessor can't do much for you.</p>

<p>Macros can be defined in two ways:</p>
<ol>
 <li>On the command line, using the <a class="external" href="runspec.html#define">--define</a> switch, or</li> 
 <li>In the configuration file, using the '%define' preprocessor directive:

<pre>
# Define a simple macro
%define foo bar
# Now the macro called 'foo' has the value 'bar'

# It's not necessary for a macro to have a value to be useful
%define baz
# Now the macro called 'baz' is defined, but it has no value.
</pre>
    <p>Note that no quoting is necessary when specifying the names of macros or
    their values.</p></li>
</ol>

<p>Macros defined in both ways are entirely equivalent.  Because ones set on the command-line are defined first, it's not
possible to use the command line to override a macro definition that occurs in the config file itself.  It may help to think
of a series of '%define' directives, one per --define, as being prepended to the config file.</p>

<p>The values assigned to macros do <b>NOT</b> follow the same quoting rules as variables in the config file.  In particular,
you may <b>NOT</b> use line continuation, line appending, or block quotes.  You may have a value of arbitrary length, but in
the interests of config file readability and maintainability, please keep them relatively short.</p>

<p>You will receive a warning if a previously defined macro is re-defined.</p>

<p>Macro names may only be composed of alphanumeric characters, underscores, and hyphens, and they <b>ARE</b> case-sensitive.</p>

<p>A macro that has not been defined will not be substituted.  A macro that has been defined, but which has not been assigned
a value, has the value "1".</p>

<h3 id="sectionVII.B">VII.B  Un-doing macro definition</h3>

<p>Sometimes you want to make the preprocessor forget about a macro that you taught it.  This is easily accomplished.</p>

<p>Macros can be undefined in two ways:</p>
<ol>
 <li>On the command line, using the <a class="external" href="runspec.html#undef">--undef</a> switch, or</li> 
 <li>In the configuration file, using the '%undef' preprocessor directive.

<pre>
%define foo bar
# Now the macro called 'foo' has the value 'bar'

%undef foo
# Now it doesn't
</pre>
<p>Note that no quoting is necessary when specifying the names of macros.</p></li>
</ol>

<p>Like <a href="#sectionVII.A">macro definition</a>, the undefinition requests can't affect macros set in the config file because
those definitions effectively happen after the un-definition.  For this reason, command-line undefinition is basically
useless; it can only undo macros also set on the command line.<br /> So why was such a useless ability added to the tools?
The writer likes orthogonality.</p>

<h3 id="sectionVII.C">VII.C  Using macros</h3>

<p>By now you're probably over that initial euphoric rush that comes from wantonly defining and undefining macros, and you're
looking for something more.  This is it!</p>

<p>When you want to <b>use</b> the value of a macro, you refer to it by name.  Unfortunately, the syntax for this is not as
simple as you might hope.  It's not too complicated, though; to have the preprocessor expand the macro 'foo', just write</p>
<pre>
  %{foo}
</pre>
<p>in the place where you'd like it to appear.  Given the following config file snippet:</p>
<pre>
%define foo Hello_
%define bar baz
%define foobar Huh?
%define foobaz What?
%define Hello_baz Please don't do this
</pre>

<p>Here's a handy table to see the various ways you can reference these values:</p>

<table>
<tr>
   <th>Macro reference</th>
   <th>Value</th>
</tr>
<tr>
   <td>%{foo}</td>
   <td>Hello_</td>
</tr>
<tr>
   <td>%{bar}</td>
   <td>baz</td>
</tr>
<tr>
   <td>%{foobar}</td>
   <td>Huh?</td>
</tr>
<tr>
   <td>%{foobaz}</td>
   <td>What?</td>
</tr>
<tr>
   <td>%{Hello_baz}</td>
   <td>Please don't do this</td>
</tr>
</table>

<p>Easy, right?  The following is also possible:</p>

<table>
<tr>
   <td>%{foo%{bar}}</td>
   <td>What?</td>
</tr>
<tr>
   <td>%{%{foo}%{bar}}</td>
   <td>Please don't do this</td>
</tr>
</table>


<p>Because macro values can only be one line long, it's not possible to use the preprocessor to macro-ize large chunks of
your config file at once, as may be common practice for advanced users of CPP.</p>

<p id="macro.notdefined">A macro that has not been defined will not be substituted.  Thus the following case is the expected
behavior:</p>
<pre>
$ <b>cat tmp.cfg</b>
OPTIMIZE = %{FOO}
$ <b>runspec -c tmp -i test -T base smithwa</b>
...
cc -c -o genScalData.o -DSPEC -DSPEC_OMP -DNDEBUG   %{FOO}   genScalData.c
</pre>
<p> Your C compiler probably won't know what to do with with <tt>%{FOO}</tt>.  If you want to substitute an empty string,
then assign it one:</p>
<pre>
$ <b>runspec -c tmp -i test -T base --define FOO="" smithwa</b>
</pre>

<p>Note that the following are NOT equivalent:</p>
<pre>
   --define FOO=""
   --define FOO
</pre>
<p>The former sets FOO to an empty string.  The latter, effectively, sets it to "1".</p>


<h3 id="sectionVII.D">VII.D  Conditionals</h3>

<p>Defining, undefining, and expanding macros is quite an enjoyable activity in and of itself, and can even be useful on
occasion.  However, conditionals add an entirely new dimension to config file processing: the ability to include and exclude
entire sections of text based on macros and their values.</p>

<h4 id="sectionVII.D.1">   VII.D.1. %ifdef .. %endif </h4>

<p>The %ifdef conditional provides a way to determine whether or not a particular macro has been defined.  If the named macro
has been defined, the conditional is true, and the text to the matching %endif is included in the text of the config file as
evaluated by runspec.  Note that the matching %endif may not necessarily be the <i>next</i> %endif; conditionals may be
nested.</p>

<p>For example, given the following section of a config file:</p>

<pre>
%define foo
%ifdef %{foo}
This text will be included
%endif

%ifdef %{bar}
This text will not be included
%endif
</pre>

<p>The preprocessor would produce the following output:</p>

<pre>
This text will be included
</pre>

<p>Note especially the quoting used for the macro names in the conditional; the only time macro name quoting may be omitted
is when defining or undefining it.</p>

<h4 id="sectionVII.D.2">   VII.D.2. %ifndef .. %endif </h4>

<p>The %ifndef conditional is the converse of <a href="#sectionVII.D.1">%ifdef</a>; If the named macro has <b>not</b> been defined,
the conditional is true, and the text to the matching %endif is included in the text of the config file as evaluated by
runspec.  Note that the matching %endif may not necessarily be the <i>next</i> %endif; conditionals may be nested.</p>

<p>Given a slightly modified version of the example from earlier:</p>

<pre>
%define foo
%ifndef %{foo}
Now THIS text will not be included
%endif

%ifndef %{bar}
This text WILL be included
%endif
</pre>

<p>The preprocessor would produce the following output:</p>

<pre>
This text WILL be included
</pre>

<h4 id="sectionVII.D.3">   VII.D.3. %if .. %endif </h4>

<p>Checking whether or not a macro is defined is quite useful, but it's just a subset of the more general conditional
facility available.  This general form is</p>

<pre>%if <b>expression</b>
...
%endif
</pre>

<p>The expression is evaluated using a subset of the Perl interpreter, so the possibilities for testing values are fairly
broad.  For example,</p>

<pre>
%ifdef %{foo}
...
%endif
</pre>

<p>is exactly equivalent to</p>

<pre>
%if defined(%{foo})
...
%endif
</pre>

<p>Likewise,</p>

<pre>
%ifndef %{foo}
...
%endif
</pre>

<p>is exactly equivalent to</p>

<pre>
%if !defined(%{foo})
...
%endif
</pre>

<p>Using the general form, it's possible to string conditionals together:</p>

<pre>
%if defined(%{foo}) &amp;&amp; !defined(%{bar}) || %{baz} == 0
...
%endif
</pre>

<p>If a macro contains a string value, you must supply quotes:</p>

<pre>
%if '%{foo}' eq 'Hello, Dave.'
...
%endif
</pre>

<p>You may also perform basic math on macro values:</p>

<pre>
%if %{foo} * 2004 > 3737
...
%endif
</pre>

<p>More precisely, the Perl operations allowed are the <span class="ttnobr">:base_core</span> and <span
class="ttnobr">:base_math</span> bundles, with the ability to dereference and modify variables disallowed.  For more details,
see the source code for <span class="ttnobr">config.pl</span> (the <span class="ttnobr">eval_pp_conditional</span>
subroutine) and Perl's own Opcode documentation.</p> 

<h4 id="sectionVII.D.4">   VII.D.4. %else </h4>

<p>It's possible to get by without the "else" part of the classic "if .. then ..  else" trio, but it's not any fun.  It works
as you'd expect:</p>

<pre>
%define foo
%ifndef %{foo}
This text will not be included
%else
This text WILL be included (from the else clause)
%endif
</pre>

<p>The preprocessor would produce the following output:</p>

<pre>
This text WILL be included (from the else clause)
</pre>

<p>Only one %else per conditional is allowed.</p>

<h4 id="sectionVII.D.5">   VII.D.5. %elif </h4>

<p>%elif is another convenience that's been added.  For those not familiar with CPP, it's an "else if" construct.  You may
have as many of these as you'd like.  Given:</p>

<pre>
%define foo Hello!

%if !defined(%{foo})
This text will not be included
%elif defined(%{bar})
This text won't be included either
%elif '%{foo}' eq 'Hello!'
This text WILL be included (from the second elif clause)
%else
Alas, the else here is left out as well.
%endif
</pre>

<p>The preprocessor would produce the following output:</p>

<pre>
This text WILL be included (from the second elif clause)
</pre>

<h3 id="sectionVII.E">VII.E  Informational Directives</h3>

<p>It's often helpful to be able to warn or exit on certain conditions.  Perhaps there's a macro that <i>must</i> be set to
a particular value, or maybe it's just very highly recommended.</p>

<h4 id="sectionVII.E.1">   VII.E.1. %warning</h4>

<p>%warning does just what you'd expect; when the preprocessor encounters this directive, it prints the text following to
stdout and the current log file, along with its location within the file being read, and continues on.</p>

<p>Consider:</p>
<pre>
%if !defined(%{somewhat_important_macro})
% warning You have not defined somewhat_important_macro!
%endif
</pre>

<p>When run through the preprocessor, this yields the following output:</p>

<pre>
  $ <b>configpp -c warning.cfg</b>
  runspec v1698 - Copyright 1999-2012 Standard Performance Evaluation Corporation
  Using 'linux-suse10-amd64' tools
  Reading MANIFEST... 12932 files
  Loading runspec modules................
  Locating benchmarks...found 14 benchmarks in 10 benchsets.
  Reading config file '/export/bmk/omp2012/config/warning.cfg'
  
  ****
  WARNING: You have not defined somewhat_important_macro! on line 2
           of /export/bmk/omp2012/config/warning.cfg
  ****
  
  Pre-processed configuration file dump follows:
  --------------------------------------------------------------------
  # Invocation command line:
  # /export/bmk/omp2012/bin/configpp --configpp -c warning.cfg
  # output_root was not used for this run
  ############################################################################
  
  --------------------------------------------------------------------
  
  The log for this run is in /export/bmk/omp2012/result/OMP2012.023.log
  
  runspec finished at Wed Jul 25 12:38:48 2012; 2 total seconds elapsed
</pre>

<h4 id="sectionVII.E.2">   VII.E.2. %error</h4>

<p>Like <a href="#sectionVII.E.1">%warning</a>, %error logs an error to stderr and the log file.  <b>Un</b>like <a
href="#sectionVII.E.1">%warning</a>, though, it then stops the run.</p>

<p>Consider a slightly modified version of the previous example:</p>
<pre>
%if !defined(%{REALLY_important_macro})
% error You have not defined REALLY_important_macro!
%endif
</pre>

<p>When run through the preprocessor, this yields the following output:</p>

<pre>
  $ <b>configpp -c error.cfg</b>
  runspec v1698 - Copyright 1999-2012 Standard Performance Evaluation Corporation
  Using 'linux-suse10-amd64' tools
  Reading MANIFEST... 12932 files
  Loading runspec modules................
  Locating benchmarks...found 14 benchmarks in 10 benchsets.
  Reading config file '/export/bmk/omp2012/config/error.cfg'
  
  *************************************************************************
    ERROR: You have not defined REALLY_important_macro! on line 2
           of /export/bmk/omp2012/config/error.cfg
  *************************************************************************
  
  
  There is no log file for this run.
  
  *
  * Temporary files were NOT deleted; keeping temporaries such as
  * /export/bmk/omp2012/tmp
  * (These may be large!)
  *
  runspec finished at Wed Jul 25 12:41:24 2012; 1 total seconds elapsed


  $ <b>echo $?</b>
  1
</pre>

<p>Unlike a warning, the error will be close to the last
thing output.  As you can see from the output of 'echo $?', runspec has exited with an error code 1.</p>



<h2 id="sectionVIII">VIII.  Output files - and how they relate to your config file</h2>

<p>This section describes how the location and contents of several kinds of output files are influenced by your config
file.</p>

<h3 id="sectionVIII.A">VIII.A. Automatic backup of config files</h3>

<p>It was mentioned above that the <a href="#sectionI.C.4">MD5 section</a> of the config file is written automatically by the
tools.  Each time your config file is updated, a backup copy is made.  Thus your config directory may soon come to look like
this:</p>

<pre>   $ <b>cd $SPEC/config</b>
   $ <b>ls tmp.cfg*</b>
   tmp.cfg                   tmp.cfg.2012-08-11_0842   tmp.cfg.2012-08-11_1631
   tmp.cfg.2012-08-10_2007   tmp.cfg.2012-08-11_0847   tmp.cfg.2012-08-11_1632
   tmp.cfg.2012-08-10_2010   tmp.cfg.2012-08-11_0853   tmp.cfg.2012-08-11_1731
   tmp.cfg.2012-08-10_2048   tmp.cfg.2012-08-11_0854   tmp.cfg.2012-08-11_1731a
   tmp.cfg.2012-08-10_2051   tmp.cfg.2012-08-11_0855   tmp.cfg.2012-08-12_0921
   tmp.cfg.2012-08-10_2054   tmp.cfg.2012-08-11_0856   tmp.cfg.2012-08-13_0846
   tmp.cfg.2012-08-10_2058   tmp.cfg.2012-08-11_0857   tmp.cfg.2012-08-13_0846a
   tmp.cfg.2012-08-10_2105   tmp.cfg.2012-08-11_0858   tmp.cfg.2012-08-13_0849
   tmp.cfg.2012-08-10_2105a  tmp.cfg.2012-08-11_0903   tmp.cfg.2012-08-13_0850
   tmp.cfg.2012-08-10_2106   tmp.cfg.2012-08-11_0904   tmp.cfg.2012-08-16_0957
   tmp.cfg.2012-08-10_2125   tmp.cfg.2012-08-11_0905   tmp.cfg.2012-08-18_1133
   tmp.cfg.2012-08-10_2125a  tmp.cfg.2012-08-11_0906   tmp.cfg.2012-08-19_1626
   tmp.cfg.2012-08-10_2126   tmp.cfg.2012-08-11_1348   tmp.cfg.2012-08-19_1627
   tmp.cfg.2012-08-10_2127   tmp.cfg.2012-08-11_1349   tmp.cfg.2012-08-19_1634
   tmp.cfg.2012-08-11_0811   tmp.cfg.2012-08-11_1349a  tmp.cfg.2012-08-19_1638
   tmp.cfg.2012-08-11_0823   tmp.cfg.2012-08-11_1349b  tmp.cfg.2012-08-19_1718
   tmp.cfg.2012-08-11_0835   tmp.cfg.2012-08-11_1553   tmp.cfg.2012-08-19_1720
   tmp.cfg.2012-08-11_0836   tmp.cfg.2012-08-11_1556   tmp.cfg.2012-08-19_1731
   tmp.cfg.2012-08-11_0838   tmp.cfg.2012-08-11_1557   tmp.cfg.2012-08-21_0611
   tmp.cfg.2012-08-11_0839   tmp.cfg.2012-08-11_1627   tmp.cfg.2012-08-21_0622
   tmp.cfg.2012-08-11_0840   tmp.cfg.2012-08-11_1629   tmp.cfg.2012-08-21_0652
   $
</pre>

<p>If this feels like too much clutter, you can disable the backup mechanism, as described under <a
href="#backup_config">backup_config</a>.  Note that doing so may leave you with a risk of losing the config file in case of a
filesystem overflow or system crash.  A better idea may be to periodically remove just portions of the clutter, for example
by typing:</p>

<pre>   $ <b>rm tmp.cfg.2012-08-1*</b>
   $ <b>ls tmp.cfg*</b>
   tmp.cfg                  tmp.cfg.2012-08-21_0622
   tmp.cfg.2012-08-21_0611  tmp.cfg.2012-08-21_0652
   $ 
</pre>


<h3 id="sectionVIII.B">VIII.B. The log file and verbosity levels</h3>

<p><tt>$SPEC/result</tt> (Unix) or <tt>%SPEC%\result</tt> (Windows) contains reports and log files.  When you are doing a
build, you will probably find that you want to pay close attention to the log files such as <span
class="ttnobr">OMP2012.001.log</span>.  Depending on the verbosity level that you have selected, it will contain detailed
information about how your build went.</p>

<p>The SPEC tool suite provides for varying amounts of output about its actions during a run.  These levels range from the
bare minimum of output (level 0) to copious streams of information that are probably useful only to tools developers (level
99).  Selecting one output level gives you the output from all lower levels, which may cause you to wade through more output
than you might like.</p>

<h4 id="sectionVIII.B.1"> VIII.B.1. Useful <a name="usefulsearch"></a>Search Strings</h4>

<p class="l1">When you are trying to find your way through a log file, you will probably find these (case-sensitive) search
strings useful:</p>

<table class="l1">
<tr><th>runspec:</th><td>The runspec command for this log. </td></tr>

<tr><th>Running</th><td>Printed at the top of a run of a benchmark.  </td></tr>

<tr><th>#</th><td>Printed at the top of a run of a benchmark for runs with multiple iterations.  Useful for finding the ref
workloads in reportable runs.  </td></tr>

<tr><th>runtime</th><td>Printed at the end of a benchmark run.  </td></tr>
<!--
<tr><th>Copy</th><td>Times for individual copies in a SPECrate run.  </td></tr>
-->
<tr><th>Building</th><td>Printed at the beginning of a benchmark compile.  </td></tr>

<tr><th>Elapsed&nbsp;compile</th><td>Printed at the end of a benchmark compile.  </td></tr>

</table>

<h4 id="sectionVIII.B.2">VIII.B.2. About <a name="debuglogs"></a>Temporary Debug Logs</h4>

<p class="l1">There are also temporary debug logs, such as <span class="ttnobr">OMP2012.001.log.debug</span>.  A debug log
contains very detailed debugging output from the SPEC tools, as if <a class="external" href="runspec.html#verbose">--verbose
99</a> had been specified. </p> 

<p class="l1">For a successful run, the debug log will be removed automatically, unless you specify "<a class="external"
href="runspec.html#keeptmp">--keeptmp</a>" on the command line, or "<a href="#keeptmp">keeptmp=1</a>" in your config file.</p> 

<p class="l1">For a failed run, the debug log is kept.  The debug log may seem overwhelmingly wordy, repetitive, detailed,
redundant, repetitive, and long-winded, and therefore useless.  Suggestion: after a failure, try looking in the regular log
first, which has a default verbosity level of 5.  If your regular log doesn't have as much detail as you wish, then you can
examine the additional detail in the debug log.  </p>

<p class="l1">If you file a <a class="external" href="techsupport.html">support request</a>, you may be asked to send in the debug
log.</p> 

<!--<p class="l1"><span class="oldnews">(History: Temporary debug logs were added in SPEC CPU2006 V1.1.)</span></p>-->

<h4 id="sectionVIII.B.3">VIII.B.3. Definitions of verbosity levels</h4>

<p class="l1">The 'level' referred to in the table below is selected either in the config file <a href="#verbose">verbose</a>
option or in the runspec command as in '<tt>runspec --verbose <b>n</b></tt>'.</p>
   
<p class="l1">Levels higher than 99 are special; they are always output to your log file.  You can also see them on the
screen if you set verbosity to the specified level minus 100.  For example, the default log level is 5.  This means that on
your screen you will get messages at levels 0 through 5, and 100 through 105.  In your log file, you'll find find the same
messages, plus the messages at levels 106 through 199.</p>

<table>
<tr>
   <td><b>Level</b></td>  
   <td><b>What you get</b></td>
</tr>

<tr>
   <td><tt>0</tt></td>
   <td>Basic status information, and most errors.  These messages can not be turned off.</td>
</tr>

<tr>
   <td><tt>1</tt></td>
   <td>List of the benchmarks which will be acted upon.</td>
</tr>

<tr>
   <td><tt>2</tt></td>
   <td>A list of possible output formats, as well as notification when beginning and ending each phase of operation (build,
   setup, run, reporting).</td>
</tr>

<tr>
   <td><tt>3</tt></td>
   <td>A list of each action performed during each phase of operation (e.g. "Building 350.md", "Setting up
   376.kdtree")</td>
</tr>

<tr>
   <td><tt>4</tt></td>
   <td>Notification of benchmarks excluded</td>
</tr>

<tr>
   <td><tt>5 (default)</tt></td>
   <td>Notification if a benchmark somehow was built but nevertheless is not executable.</td>
</tr>

<tr>
   <td><tt>6</tt></td>
   <td>Time spent doing automatic flag reporting.</td>
</tr>

<tr>
   <td><tt>7</tt></td>
   <td>Actions to update SPEC-supplied flags files.</td>
</tr>

<tr>
   <td><tt>10</tt></td>
   <td>Information on basepeak operation.</td>
</tr>

<tr>
   <td><tt>12</tt></td>
   <td>Errors during discovery of benchmarks and output formats.</td>
</tr>

<tr>
   <td><tt>15</tt></td>
   <td>Information about certain updates to stored config files</td>
</tr>

<tr>
   <td><tt>24</tt></td>
   <td>Notification of additions to and replacements in the list of benchmarks.</td>
</tr>

<tr>
   <td><tt>30</tt></td>
   <td>A list of options which are included in the MD5 hash of options used to determine whether or not a given binary needs
   to be recompiled.</td>
</tr>

<tr>
   <td><tt>35</tt></td>
   <td>A list of key=value pairs that can be used in command and notes substitutions, and results of env_var settings.</td>
</tr>

<tr>
   <td><tt>40</tt></td>
   <td>A list of 'submit' commands for each benchmark.</td>
</tr>

<tr>
   <td><tt>70</tt></td>
   <td>Information on selection of median results.</td>
</tr>

<tr>
   <td><tt>89</tt></td>
   <td>Progress comparing run directory MD5s for executables.</td> 
</tr>

<tr>
   <td><tt>90</tt></td>
   <td>Time required for various internal functions in the tools.</td>
</tr>

<tr>
   <td><tt>95, 96, 97, 98</tt></td>
   <td>Flag parsing progress during flag reporting (progressively more detail)</td>
</tr>


<tr>
   <td><tt>99</tt></td>
   <td>Gruesome detail of comparing MD5 hashes of files being copied during run directory setup.</td>
</tr>

<tr>
   <td colspan="2">
   --- Messages at the following levels will always appear in your log files  --- </td>
</tr>

<tr>
   <td><tt>100</tt></td>
   <td>Various config file errors, such as bad preprocessor directives, bad placement of certain options, illegal
   characters...</td>
</tr>

<tr>
   <td><tt>102</tt></td>
   <td>Information about output formats that could not be loaded.</td>
</tr>

<tr>
   <td><tt>103</tt></td>
   <td>A tally of successes and failures during the run broken down by benchmark.</td>
</tr>

<tr>
   <td><tt>106</tt></td>
   <td>A list of runtime and calculated ratio for each benchmark run.</td>
</tr>

<tr>
   <td><tt>107</tt></td>
   <td>Dividers to visually block each phase of the run.</td>
</tr>

<tr>
   <td><tt>110</tt></td>
   <td>Elapsed time for each portion of a workload (if an executable is invoked more than once).</td>
</tr>

<tr>
   <td><tt>120</tt></td>
   <td>Messages about which commands are being issued for which benchmarks.</td>
</tr>

<tr>
   <td><tt>125</tt></td>
   <td>A listing of each individual child processes' start, end, and elapsed times.</td>
</tr>

<tr>
   <td><tt>130</tt></td>
   <td>A nice header with the time of the runspec invocation and the command line used.  Information about what happened with
   your <a href="#sysinfo-program">sysinfo program</a></td>
</tr>

<tr>
   <td><tt>140</tt></td>
   <td>General information about the settings for the current run.</td>
</tr>

<tr>
   <td><tt>145</tt></td>
   <td>Messages about file comparisons.</td>
</tr>

<tr>
   <td><tt>150</tt></td>
   <td>List of commands that will be run, and details about the settings used for comparing output files.  Also the contents
   of the makefile written.</td>
</tr>

<tr>
   <td><tt>155</tt></td>
   <td>Start, end, and elapsed times for benchmark run.</td>
</tr>

<tr>
   <td><tt>160</tt></td>
   <td>Start, end, and elapsed times for benchmark compilation.</td>
</tr>

<tr>
   <td><tt>180</tt></td>
   <td>stdout and stderr from commands run</td>
</tr>

<tr>
   <td><tt>190</tt></td>
   <td>Start and stop of <a href="#delay">delay</a>s</td>
</tr>

<tr>
   <td><tt>191</tt></td>
   <td>Notification of command line used to run specinvoke.</td>
</tr>
</table>


<h3 id="sectionVIII.C">VIII.C. Log file example: Feedback-directed optimization.</h3>

<p>In this section, two things are attempted: a guided tour of how to find some of the interesting parts in a log file, and
an explanation of how the SPEC toolset implements feedback-directed optimization, which is commonly abbreviated FDO.  The
technique is also known as Profile-Based Optimization, or PBO.</p>

<p>To use FDO, you typically compile a program twice.  The first compile creates an image with instrumentation.  Then, you
run the program, with a "training" workload, and the instrumentation collects data about the run: a profile.  Finally, you
re-compile the program, and the compiler uses the profile to improve its optimizations.</p>

<p>The SPEC tools makes all of this relatively easy.  Here's a config file that builds 372.smithwa with FDO:</p>

<pre>   $ <b>cat brian.cfg</b>
   ext                  = blue271
   iterations           = 1 
   output_format        = text
   teeout               = 1 
   runlist              = smithwa
   tune                 = peak
   
   gross=peak:
   
   OPTIMIZE       = -fast -m64 -xopenmp
   PASS1_CFLAGS   = -xprofile=collect:./fb
   PASS1_LDFLAGS  = -xprofile=collect:./fb
   PASS2_CFLAGS   = -xprofile=use:./fb
   PASS2_LDFLAGS  = -xprofile=use:./fb
   $ 
</pre>

<p>The <tt>PASSxx</tt> lines above cause FDO to happen.  Each of the profiling switches is specified twice because we need
them to be applied both for compiles and for the link.  Let's invoke <tt>runspec</tt> with the above config file, searching
the output for lines that contain either "<tt>Training</tt>" or "<tt>verifyData.o</tt>", which is a handy string to pick out both
a sample compile line and the link line:</p> 

<pre>
   $ <b>runspec --config brian --size test | grep -e Training -e verifyData.o</b>
   cc -c -o verifyData.o -DSPEC -DSPEC_OMP -DSPEC_OPENMP -DNDEBUG    
      -xprofile=collect:./fb    -fast -m64 -xopenmp verifyData.c
   cc  -fast -m64 -xopenmp -xprofile=collect:./fb  sequenceAlignment.o 
      getUserParameters.o genSimMatrix.o genScalData.o verifyData.o 
      pairwiseAlign.o scanBackward.o verifyAlignment.o mergeAlignment.o 
      verifyMergeAlignment.o dispElapsedTime.o specrand.o -lm -o smithwaterman
   Training 372.smithwa with the train workload
   cc -c -o verifyData.o -DSPEC -DSPEC_OMP -DSPEC_OPENMP -DNDEBUG    
      -xprofile=use:./fb -fast -m64 -xopenmp verifyData.c
   cc -fast -m64 -xopenmp -xprofile=use:./fb  sequenceAlignment.o 
      getUserParameters.o genSimMatrix.o genScalData.o verifyData.o 
      pairwiseAlign.o scanBackward.o verifyAlignment.o mergeAlignment.o 
      verifyMergeAlignment.o dispElapsedTime.o specrand.o -lm -o smithwaterman
   $ 
</pre>

<p>Above, you can see the basic flow: compile using the switch <span class="ttnobr">-xprofile=collect</span> for both
the compile and link lines; run the training workload; then recompile with <span class="ttnobr">-xprofile=use</span>. </p>

<p>Let's go a little deeper by taking apart the log file.  This section uses the actual log file from the above
<tt>runspec</tt> command, but white space has been adjusted.</p>

<p>The first thing to look for when you're trying to make sure you've found the right log file is the line that contains the
string <span class="ttnobr">runspec:</span></p>

<pre>   $ <b>grep runspec: *031.log</b>
   runspec: runspec --config brian --size test
   $ 
</pre>
<p>Yes, this looks like the right log.  To find the section where the benchmark is built, search for "<tt>Building</tt>",
which is soon followed by information about what was written to the makefile:</p>

<pre>
------------------------------------------------------------------------
When checking options for /export/bmk/omp2012/benchspec/OMP2012/372.smithwa/exe/smithwaterman_peak.blue271, 
  no MD5 sums were
  found in the config file.  They will be installed after build.
  <b>Building</b> 372.smithwa peak blue271 default: (build_peak_blue271.0000)
Wrote to makefile 
  '/export/bmk/omp2012/19/benchspec/OMP2012/372.smithwa/build/build_peak_blue271.0000/Makefile.deps':

# These are the build dependencies

$(addsuffix $(OBJ), $(basename specrand.c)): 
    specrand.c $(addsuffix $(OBJ),$(basename specrand.h) )
$(addsuffix $(OBJ), $(basename verifyData.c)): 
    verifyData.c $(addsuffix $(OBJ),$(basename sequenceAlignment.h) )
$(addsuffix $(OBJ), $(basename getUserParameters.c)): 
    getUserParameters.c $(addsuffix $(OBJ),$(basename sequenceAlignment.h) )
$(addsuffix $(OBJ), $(basename genSimMatrix.c)): 
    genSimMatrix.c $(addsuffix $(OBJ),$(basename sequenceAlignment.h) )
$(addsuffix $(OBJ), $(basename genScalData.c)): 
    genScalData.c $(addsuffix $(OBJ),$(basename sequenceAlignment.h) )
$(addsuffix $(OBJ), $(basename mergeAlignment.c)): 
    mergeAlignment.c $(addsuffix $(OBJ),$(basename sequenceAlignment.h pairwiseAlign.c) )
$(addsuffix $(OBJ), $(basename dispElapsedTime.c)): 
    dispElapsedTime.c $(addsuffix $(OBJ),$(basename sequenceAlignment.h) )
$(addsuffix $(OBJ), $(basename pairwiseAlign.c)): 
    pairwiseAlign.c $(addsuffix $(OBJ),$(basename sequenceAlignment.h) )
$(addsuffix $(OBJ), $(basename verifyAlignment.c)): 
    verifyAlignment.c $(addsuffix $(OBJ),$(basename sequenceAlignment.h) )
$(addsuffix $(OBJ), $(basename scanBackward.c)): 
    scanBackward.c $(addsuffix $(OBJ),$(basename sequenceAlignment.h) )
$(addsuffix $(OBJ), $(basename sequenceAlignment.c)): 
    sequenceAlignment.c $(addsuffix $(OBJ),$(basename sequenceAlignment.h) )
$(addsuffix $(OBJ), $(basename verifyMergeAlignment.c)): 
    verifyMergeAlignment.c $(addsuffix $(OBJ),$(basename sequenceAlignment.h) )
# End dependencies
Wrote to makefile 
   '/export/bmk/omp2012/benchspec/OMP2012/372.smithwa/build/build_peak_blue271.0000/Makefile.spec':
TUNE=peak
EXT=blue271
NUMBER=372
NAME=smithwa
SOURCES= sequenceAlignment.c getUserParameters.c genSimMatrix.c \
         genScalData.c verifyData.c pairwiseAlign.c scanBackward.c \
         verifyAlignment.c mergeAlignment.c verifyMergeAlignment.c \
         dispElapsedTime.c specrand.c
EXEBASE=smithwaterman
NEED_MATH=yes
BENCHLANG=C
ONESTEP=
CONESTEP=

OPTIMIZE         = -fast -m64 -xopenmp
OS               = unix
PASS1_CFLAGS     = -xprofile=collect:./fb
PASS1_LDFLAGS    = -xprofile=collect:./fb
PASS2_CFLAGS     = -xprofile=use:./fb
PASS2_LDFLAGS    = -xprofile=use:./fb
absolutely_no_locking = 0
abstol           =
</pre>

<p>To tell the tools that we want to use FDO, we set <tt>PASS1_&lt;language&gt;FLAGS</tt> and
<tt>PASS2_&lt;language&gt;FLAGS</tt>.   If the tools see any use of these flags, they will perform two compiles.  The
particular compiler used in this example expects to be invoked twice: once with <tt>-xprofile=collect:./fb</tt> and then
again with <tt>-xprofile=use:./fb</tt>.</p>

<p>A useful search string in the log is "<span class="ttnobr">specmake</span>". 
You will have to search for 
"<span class="ttnobr">specmake</span>" a few times until you get down to here:
</p>

<pre>
  Compile for '372.smithwa' started at: Wed Jul 25 13:24:20 2012 (1343247860)
Issuing make.clean command 'specmake clean'
specmake clean 2> make.clean.err | tee make.clean.out
Start make.clean command: Wed Jul 25 13:24:20 2012 (1343247860)
Executing commands:
  specmake clean
-----------------------------
rm -rf *.o  trainset.out
find . \( -name \*.o -o -name '*.fppized.f*' -o -name '*.i' -o -name '*.mod' \) -print | xargs rm -rf
rm -rf smithwaterman
rm -rf smithwaterman.exe
rm -rf core
rm -rf
Stop make.clean command: Wed Jul 25 13:24:21 2012 (1343247861)
Elapsed time for make.clean command: 00:00:01 (1)
Issuing fdo_make_pass1 command '<b>specmake</b> --always-make build FDO=PASS1'
specmake --always-make build FDO=PASS1 2> fdo_make_pass1.err | tee fdo_make_pass1.out
Start fdo_make_pass1 command: Wed Jul 25 13:24:21 2012 (1343247861)
Executing commands:
  specmake --always-make build FDO=PASS1
-----------------------------
specmake: Circular sequenceAlignment.o <- sequenceAlignment.o dependency dropped.
cc -c -o sequenceAlignment.o -DSPEC -DSPEC_OMP -DSPEC_OPENMP -DNDEBUG    
   -xprofile=collect:./fb    -fast -m64 -xopenmp                 sequenceAlignment.c
cc -c -o getUserParameters.o -DSPEC -DSPEC_OMP -DSPEC_OPENMP -DNDEBUG    
   -xprofile=collect:./fb    -fast -m64 -xopenmp                 getUserParameters.c
cc -c -o genSimMatrix.o -DSPEC -DSPEC_OMP -DSPEC_OPENMP -DNDEBUG    
   -xprofile=collect:./fb    -fast -m64 -xopenmp                 genSimMatrix.c
</pre>

<p>You can see above that <tt>specmake</tt> is invoked with <tt>FDO=PASS1</tt>, which causes the
switches from <tt>PASS1_CFLAGS</tt> to be used.  If you want to understand exactly how this affects the build, read
<tt>$SPEC/benchspec/Makefile.defaults</tt>, along with the document <tt>$SPEC/Docs/makevars.html</tt>.</p>

<p>To find the training run, search forward for <tt>Training</tt></p>

<pre>
Stop options1 command: Wed Jul 25 13:24:28 2012 (1343247868)
Elapsed time for options1 command: 00:00:01 (1)
<b>Training</b> 372.smithwa with the train workload
Commands to run:
    -C /export/bmk/omp2012/benchspec/OMP2012/372.smithwa/build/build_peak_blue271.0000
    -o trainset.out -e trainset.err ../build_peak_blue271.0000/smithwaterman 32 (timed)
Specinvoke: /export/bmk/omp2012/bin/specinvoke 
  -d /export/bmk/omp2012/benchspec/OMP2012/372.smithwa/build/build_peak_blue271.0000 
  -e speccmds.err -o speccmds.stdout -f speccmds.cmd -C -q
Issuing command '/export/bmk/omp2012/bin/specinvoke 
  -d /export/bmk/omp2012/benchspec/OMP2012/372.smithwa/build/build_peak_blue271.0000 
  -e speccmds.err -o speccmds.stdout -f speccmds.cmd -C -q'
/export/bmk/omp2012/bin/specinvoke 
  -d /export/bmk/omp2012/benchspec/OMP2012/372.smithwa/build/build_peak_blue271.0000 
  -e speccmds.err -o speccmds.stdout -f speccmds.cmd -C -q
Start command: Wed Jul 25 13:24:28 2012 (1343247868)
Stop command: Wed Jul 25 13:25:44 2012 (1343247944)
Elapsed time for command: 00:01:16 (76)
Workload elapsed time (0:1) = 67.886497 seconds
Copy 0 of 372.smithwa (peak train) run 1 finished at Wed Jul 25 13:25:36 2012.  Total elapsed time: 67.886497
comparing files in '/export/bmk/omp2012/benchspec/OMP2012/372.smithwa/build/build_peak_blue271.0000'
comparing 'trainset.out' with abstol=, binary=, calctol=0, cw=, floatcompare=, ignorecase=, 
  obiwan=, reltol=1e-06, skipabstol=, skipobiwan=, skipreltol=, skiptol=
</pre>

<p class="snugbot">The key lines to notice above are the ones just after "<span class="ttnobr">Commands to run:</span>",
which begin with <tt>-o</tt>.  These lines cause <tt>specinvoke</tt> to run the freshly-built <tt>smithwa</tt> one time,
some benchmarks may have multiple runs here (they will have multiplt <tt>-o</tt> lines.
The <tt>-o</tt> and <tt>-e</tt> parameters to <tt>specinvoke</tt> indicate where it is to send standard output and standard
error.  Thus, for example</p>
<p class="exsnug">-o trainset.out -e trainset.err ../build_peak_blue271.0000/smithwaterman 32 (timed)</p>
<p class="snug">will cause this command to actually be run: </p>
<p class="exsnug">../build_peak_blue271.0000/smithwaterman 32 &gt; trainset.out 2&gt; trainset.err </p>
<p class="snugtop">For more information on specinvoke, see <a class="external"
href="utility.html#specinvoke">utility.html</a>.</p> 

<p>For some particular benchmarks, SPEC has supplied multiple workloads that are used to train them.  Why multiple
workloads?  Because a training set should provide the compiler with information about usage of the program which is, in the
opinion of the developer, representative of real-world use.  Of course, if the developer has actual evidence, instead of
merely an opinion, so much the better!  <!-- In this instance, the developer of the training workload has chosen to train bzip
with:</p>
<ol>
<li>The file <tt>input.program</tt>, which is a program binary;</li>
<li>An input in <tt>.jpg</tt> format, which is inherently already compressed and therefore not a particularly useful
application of bzip2 -- but real users do this; and </li>
<li>An input that contains a mixture of highly compressible and not-very-compressible data: <tt>input.combined</tt>.</li>
</ol>
-->


<p>You can see the inputs that SPEC has provided for training purposes in the directories <span
class="ttnobr">nnn.benchmark/data/train/input</span> and <span class="ttnobr">nnn.benchmark/data/all/input</span>.  In some
cases, the training workloads required significant development effort, but as a user of the suite you don't have to worry
about that; you can simply apply them.  SPEC is aware that there is some variation in the fidelity between the training
workloads vs. the timed "ref" workloads.  In the real world, also, training workloads used by program developers do not
correspond perfectly to how end users apply the programs.</p>

<p>In any case, the tester who employs the SPEC OMP2012 suite does not have to come up with his or her own training
workloads, and, indeed, is not allowed to do so under the run rules.</p>

<p>Notice that the log file tells us the workload elapsed time of <tt>smithwa</tt>:
67.886 seconds; and the total time: 67.886 seconds. If there would have been multiple
training datasets, there would be multiple workload elapsed times and the total time would
have been the sum of these times.</p>

<p>Finally, the compiler is run a second time, to use the profile feedback and build a new executable, at the 
second <tt>specmake</tt> build:</p>
<pre>
Start fdo_make_pass2 command: Wed Jul 25 13:25:45 2012 (1343247945)
Executing commands:
  <b>specmake</b> --always-make build FDO=PASS2
-----------------------------
specmake: Circular sequenceAlignment.o <- sequenceAlignment.o dependency dropped.
cc -c -o sequenceAlignment.o -DSPEC -DSPEC_OMP -DSPEC_OPENMP -DNDEBUG    
   -xprofile=use:./fb    -fast -m64 -xopenmp                 sequenceAlignment.c
cc -c -o getUserParameters.o -DSPEC -DSPEC_OMP -DSPEC_OPENMP -DNDEBUG    
   -xprofile=use:./fb    -fast -m64 -xopenmp                 getUserParameters.c
cc -c -o genSimMatrix.o -DSPEC -DSPEC_OMP -DSPEC_OPENMP -DNDEBUG    
   -xprofile=use:./fb    -fast -m64 -xopenmp                 genSimMatrix.c
cc -c -o genScalData.o -DSPEC -DSPEC_OMP -DSPEC_OPENMP -DNDEBUG    
   -xprofile=use:./fb    -fast -m64 -xopenmp                 genScalData.c
cc -c -o verifyData.o -DSPEC -DSPEC_OMP -DSPEC_OPENMP -DNDEBUG    
   -xprofile=use:./fb    -fast -m64 -xopenmp                 verifyData.c
cc -c -o pairwiseAlign.o -DSPEC -DSPEC_OMP -DSPEC_OPENMP -DNDEBUG    
   -xprofile=use:./fb    -fast -m64 -xopenmp                 pairwiseAlign.c
cc -c -o scanBackward.o -DSPEC -DSPEC_OMP -DSPEC_OPENMP -DNDEBUG    
   -xprofile=use:./fb    -fast -m64 -xopenmp                 scanBackward.c
cc -c -o verifyAlignment.o -DSPEC -DSPEC_OMP -DSPEC_OPENMP -DNDEBUG    
   -xprofile=use:./fb    -fast -m64 -xopenmp                 verifyAlignment.c
cc -c -o mergeAlignment.o -DSPEC -DSPEC_OMP -DSPEC_OPENMP -DNDEBUG    
   -xprofile=use:./fb    -fast -m64 -xopenmp                 mergeAlignment.c
cc -c -o verifyMergeAlignment.o -DSPEC -DSPEC_OMP -DSPEC_OPENMP -DNDEBUG    
   -xprofile=use:./fb    -fast -m64 -xopenmp                 verifyMergeAlignment.c
cc -c -o dispElapsedTime.o -DSPEC -DSPEC_OMP -DSPEC_OPENMP -DNDEBUG    
   -xprofile=use:./fb    -fast -m64 -xopenmp                 dispElapsedTime.c
specmake: Circular specrand.o <- specrand.o dependency dropped.
cc -c -o specrand.o -DSPEC -DSPEC_OMP -DSPEC_OPENMP -DNDEBUG    
   -xprofile=use:./fb    -fast -m64 -xopenmp                 specrand.c
cc  -fast -m64 -xopenmp  -xprofile=use:./fb  sequenceAlignment.o getUserParameters.o 
   genSimMatrix.o genScalData.o verifyData.o pairwiseAlign.o scanBackward.o 
   verifyAlignment.o mergeAlignment.o verifyMergeAlignment.o dispElapsedTime.o 
   specrand.o             -lm        -o smithwaterman
Stop fdo_make_pass2 command: Wed Jul 25 13:25:51 2012 (1343247951)
Elapsed time for fdo_make_pass2 command: 00:00:06 (6)
</pre>

<p>This time, <tt>specmake</tt> is invoked with <tt>FDO=PASS2</tt>, which is why the compile picks up the
<tt>PASS2_CFLAGS</tt>.</p>

<p>And that's it.  The tools did most of the work; the user simply set the PASSn flags in the config file.</p>

<h3 id="sectionVIII.D">VIII.D. Help, I've got too many logs!</h3>

<p>If you do a very large number of builds and runs, you may find that your result directory gets far too cluttered.  If it
does, you should feel free to issue commands such as these on Unix systems:</p>

<pre>   cd $SPEC
   mv result result_old
   mkdir result
</pre>

<p>On Windows, you could say:</p>

<pre>   cd %SPEC%
   rename result result_old
   mkdir result
</pre>

<h3 id="sectionVIII.E">VIII.E. Finding the build directory</h3>

<p>As described under <a class="external" href="runspec.html#disk_usage">"About Disk Usage" in runspec.html</a>, the SPEC tools
do the actual builds and runs in newly created directories.  The benchmark sources are never modified in the <tt>src</tt>
directory.</p> 

<p>The <tt>build</tt> directories for a benchmark are located underneath that benchmarks' top-level directory, typically
<span class="ttnobr">$SPEC/benchspec/OMP2012/nnn.benchmark/build</span> (Unix) or <span
class="ttnobr">%SPEC%\benchspec\OMP2012\nnn.benchmark\build</span> (Windows).   </p>

   <p class="l1">(If you are using the <a class="external" href="runspec.html#output_root">output_root</a> feature, then the first
   part of that path will change to be your requested root instead of <tt>SPEC</tt>; and if you change the default for <a
   href="config.html#build_in_build_dir">build_in_builddir</a>, then the last part of that path will be <tt>run</tt> instead of
   <tt>build</tt>.)</p> 

<p><!--<span class="oldnews">(History: As of the release of SPEC CPU2006 V1.0)</span> -->The build directories have logical names,
typically of the form <tt>build_&lt;tune&gt;_&lt;extension&gt;.0000</tt>.   For example, after the command <span
class="ttnobr">runspec --config jun09a --action build --tune base libquantum</span>, the following directory would be
created:</p>

<pre>
$ <b>cd $SPEC/benchspec/OMP2012/350.md/build</b>
$ <b>pwd</b>
/spec/joelw/benchspec/OMP2012/350.md/build
$ <b>ls -ld build*jun*</b>
drwxrwxr-x   2 joelw ptg    1536 Jun 10 14:49 build_base_jun09a.0000
$ 
</pre>

<p>On Windows, you would say <tt>cd %SPEC%\benchspec\OMP2012\350.md\build</tt> followed by <tt>dir build*</tt>.</p>

<p>If the directory <tt>build_&lt;tune&gt;_&lt;extension&gt;.0000</tt> already exists when a new build is
attempted for the same tuning and extension, the directory will be re-used, unless:</p>
<ul>
<li>You have set the environment variable <tt>SPEC_OMP2012_NO_RUNDIR_DEL</tt>, or </li>
<li>The directory has been left in a "locked" state by an aborted previous build. </li>
</ul>
<p>In such cases, the <tt>0000</tt> will be incremented until a name is generated that is available.  You can
find locked directories by searching for <tt>lock=1</tt> in the file
<tt>$SPEC/benchspec/OMP2012/&lt;nnn.benchmark&gt;/run/list</tt> (Unix) or
<tt>%SPEC%\benchspec\OMP2012\&lt;nnn.benchmark&gt;\run\list</tt> (Windows).
</p>

<p>When more than one build directory has been created for a given tuning and extension, you may need to trace the directory
back to the specific build attempt that created it.  You can do so by searching for the directory name in the log files:</p>

<pre>
$ <b>grep Building *log | grep build_base_jun09a.0001</b>
OMP2012.380.log:  Building 350.md ref base jun09a default: (build_base_jun09a.0001)
$ 
</pre>

<p>In the above example, the <tt>grep</tt> command locates log #380 as the log that corresponds to this run directory.  On
Windows, of course, you would use <tt>findstr</tt> instead of <tt>grep</tt>.</p>



<h3 id="sectionVIII.F">VIII.F. Files in the build directory</h3>

<p>A variety of files are output to the build directory.  Here are some of the key files which can usefully be examined:</p>


<table> 
<tr>
   <td><tt>Makefile.spec</tt></td>
   <td>The components for make that were generated for the current config file with the current set of runspec options. </td>
</tr>

<tr>
   <td><tt>options.out</tt></td>
   <td>For 1 pass compile: build options summary.</td>
</tr>

<tr>
   <td><tt>options1.out</tt></td>
   <td>For N pass compile: summary of first pass.</td>
</tr>

<tr>
   <td><tt>options2.out</tt></td>
   <td>For N pass compile: summary of second pass.</td>
</tr>

<tr>
   <td><tt>make.out</tt></td>
   <td>For 1 pass compile: detailed commands generated. </td>
</tr>

<tr>
   <td><tt>fdo_make_pass1.out</tt></td>
   <td> For N pass compile: detailed commands generated for 1st pass.</td>
</tr>

<tr>
   <td><tt>fdo_make_pass2.out</tt></td>
   <td> For N pass compile: detailed commands generated for 2nd pass.</td>
</tr>

<tr>
   <td><tt>*.err</tt></td>
   <td> The output from standard error corresponding to the above files.</td>
</tr>
</table>

<h3 id="sectionVIII.G">VIII.G. For more information</h3>

<p>For more information about how the run directories work, see the descriptions of <tt>specinvoke</tt>, <tt>specmake</tt>, and
<tt>specdiff</tt> in <a class="external" href="utility.html">utility.html</a>.</p> 


<h2 id="sectionIX">IX.  <a name="aboutsrc.alt"></a> About Alternate Sources </h2>

<p>Sometimes a portability issue may require use of alternative source code for a benchmark, and SPEC may issue the alternate as
a "src.alt".  The effect of applying a <a href="#srcalt">src.alt</a> is to modify the sources in the build directory.  This
chapter provides an example of applying a src.alt, and introduces development of src.alts.</p>

<h3 id="sectionIX.A">IX.A. <a name="src.alt.example"></a> Example: Applying a src.alt</h3>

<p>This example shows the effect of a src.alt, <span class="ttnobr">372.smithwa.no_line.omp2012.v1.0.tar.xz</span>, which
is an example src.alt.  There are not yet any approved for SPEC OMP2012; this is just an example.  A src.alt must have a
README, which for this example says, in part:</p>
<pre>
This change reduces confusion about line
numbers in compiler error or warning messages.

The diff is quite large, but the change is easy to describe.  All of the 
'#line' preprocessor directives in generated sources are removed.
</pre>

<p>If it were a real src.alt, one would download it from <a class="external"
href="http://www.spec.org/omp2012/src.alt/">www.spec.org/omp2012/src.alt</a>, and then apply it per the instructions (found
in the same README from which the above paragraphs were excerpted): </p> 
<pre>
$ <b>. ./shrc</b>
$ <b>specxz -dc 372.smithwa.no_line.omp2012.v1.0.tar.xz | spectar -xf  -</b>
</pre>

<p>Let's set up two build directories - one <span class="u">without</span> the change:</p>

<pre>
$ <b>cat $SPEC/config/without.cfg</b>
ext          = without
$

$ <b>runspec --action buildsetup -T base -c without -v 1 372.smithwa</b>
runspec v6624 - Copyright 1999-2012 Standard Performance Evaluation Corporation
Using 'macosx' tools
Reading MANIFEST... 19145 files
Loading runspec modules................
Locating benchmarks...Reading config file '/Volumes/OMP2012/omp2012/config/without.cfg'
Benchmarks selected: 372.smithwa


The log for this run is in /Volumes/OMP2012/omp2012/result/OMP2012.009.log

runspec finished at Thu Jul 21 17:20:53 2012; 2 total seconds elapsed
$ 
</pre>

<p>And a build directory <span class="u">with</span> the change:</p>

<pre>
$ <b>cat $SPEC/config/with.cfg</b>
ext          = with
372.smithwa:
srcalt      = no_line
$ 

$ <b>runspec --action buildsetup -T base -c with -v 1 403.gcc</b>
runspec v6624 - Copyright 1999-2012 Standard Performance Evaluation Corporation
Using 'macosx' tools
Reading MANIFEST... 19145 files
Loading runspec modules................
Locating benchmarks...Reading config file '/Volumes/OMP2012/omp2012/config/with.cfg'
Benchmarks selected: 372.smithwa
372.smithwa (base): "no_line" src.alt was used.


The log for this run is in /Volumes/OMP2012/omp2012/result/OMP2012.010.log

runspec finished at Thu Jul 21 17:22:12 2012; 2 total seconds elapsed
$
</pre>

<p>If we go look at those directories, the "<tt>with</tt>" directory has the expected change from the src.alt.  As mentioned in
the README above, preprocessor directives are removed (lines marked "<tt>-</tt>").  No lines are added, but if they were, they
would be marked with "<tt>+</tt>":</p>

<pre>
$ <b>diff -u build_base_without.0000/verifyData.c build_base_with.0000/verifyData.c</b>
--- build-base_without.0000/verifyData.c        2012-03-05 07:53:16.000000000 -0800
+++ build-base_with.0000/verifyData.c           2012-07-26 07:24:12.000000000 -0700
@@ -31,7 +31,6 @@
  * minSeparation  - [integer] minimum separation between start and end points
  */
 
-/* #line 34 "verifyData.c" */
 void verifyData(SIMMATRIX_T *simMatrix, SEQDATA_T *seqData,
                int minScore, int minSeparation) {
 
@@ -49,7 +48,6 @@
 #endif
 
   {
-/* #line 52 "verifyData.c" */
 
     /*
      * Map the OpenMP threads or MPI processes onto a rectangular
@@ -85,7 +83,6 @@
     n = seqData->mainLen;
     m = seqData->matchLen;
 
-/* #line 88 "verifyData.c" */
     iBeg = 1 + (n*myRow)/npRow;
     jBeg = 1 + (m*myCol)/npCol;
$
</pre>

<h3 id="sectionIX.B">IX.B. Developing a src.alt (brief introduction)</h3>

<p>If you are trying to create a new alternative source, you should become familiar with how to work in a sandbox,
temporarily <a class="external" href="runspec-avoidance.html">abandoning the tools</a> during your development phase.  (Or,
you can use <a class="external" href="utility.html#convert_to_development">convert_to_development</a> to make the whole
installation into one big sandbox.) Once you have developed your alternative source, you'll want to package it up with <a
class="external" href="utility.html#makesrcalt">makesrcalt</a>, and you'll need to <a class="external"
href="techsupport.html">contact SPEC</a> to get the source approved.  <!-- <span class="oldnews">(History: The
convert_to_development utility was added with SPEC CPU2006 V1.1, and makesrcalt was first newly documented in SPEC CPU2006
V1.1.)</span>  -->Both are much more fully discussed in <a class="external" href="utility.html">utility.html</a>. </p> 

<h2 id="sectionX">X.  <a name="troubleshooting"></a>Troubleshooting</h2>

<p>When something goes wrong, here are some things to check:</p>

<ol>

<li><p> Are there any obvious clues in the log file?  Search for the word "<tt>Building</tt>".  Keep searching until you hit
the next benchmark AFTER the one that you are interested in.  Now scroll backward one screen's worth of text.</p></li>

<li><p>Did your desired switches get applied?  Go to the build directory, and look at <tt>options*out</tt>.</p></li>

<li><p>Did the tools or your compilers report any errors?  Look in the build directory at <tt>*err</tt>.</p></li>

<li><p>What happens if you try the build by hand?  See the section on <tt>specmake</tt> in <a class="external"
href="utility.html#specmake">utility.html</a>.</p></li> 

<li><p>If an actual run fails, what happens if you invoke the run by hand?  See the information about "<span
class="ttnobr">specinvoke -n</span>" in <a class="external" href="utility.html#specinvoke">utility.html</a></p></li> 

<li><p>Do you understand what is in your path, and why?  Sometimes confusion can be greatly reduced by ensuring that you have
only what is needed, avoiding, in particular, experimental and non-standard versions of standard utilities.  </p>

<p class="l1"><span class="alarm">Note:</span> on Windows systems, SPEC recommends that Windows/Unix compatibility products should
be removed from the <tt>%PATH%</tt> prior to invoking <tt>runspec</tt>, in order to reduce the probability of certain 
difficult-to-diagnose error messages.</p></li> 

<li><p>Try asking the tools to leave more clues behind, with <a href="#keeptmp">keeptmp</a>.</p></li>

<li><p>Windows systems are not officially supported.  The tools do work with Windows, so any problems you 
encounter are probably in the benchmark itself and will require your effort in helping port the problematic
codes.</p></li>

</ol>

<hr />
<p>Copyright 1999-2012 Standard Performance Evaluation Corporation
<br />All Rights Reserved</p>


<!-- this space intentionally left blank: some empty space at the bottom increases the probability that clicking on a link in
the table of contents will actually position the desired section at the top of your browser window -->
<p style="margin-bottom:1900px;">&nbsp;</p>



</body>
</html>

